{
  "id": "issues-mini-window",
  "children": [
    {
      "view": "View?class=flex column;style.width=90vw;style.height=100%;style.padding=4rem;style.borderRadius=1rem;style.backgroundColor=#fff;style.cursor=default;style.gap=2rem;style.overflowY=auto;issues-data:().maintenances=_list?issues-data:()",
      "children": [
        {
          "children": [
            {
              "view": "Text?text=إستمارة عطل +if():[)(:issues-copied]:(منسوخ).elif():[)(:issues-edit-readonly]:(عرض).elif():[)(:issues-edit]:(تعديل).else():(جديد);style.fontSize=1.8rem;style.fontWeight=bolder"
            },
            {
              "view": "View?class=flexbox;style.gap=.5rem;style.marginRight=auto",
              "children": [
                {
                  "view": "View?class=flexbox pointer;tooltip.text=حذف;style.height=3.5rem;style.width=3.5rem;style.borderRadius=1.5rem;hover.style.backgroundColor=#eee;style.transition=.2s?!)(:new-issues;!)(:issues-edit-readonly",
                  "children": [
                    {
                      "view": "Icon?name=bi-trash;style.color=red;style.fontSize=1.8rem"
                    }
                  ],
                  "controls": [
                    {
                      "actions": "wait():erase:[update:issues-manager-list]?erase.collection=issues;erase.doc=issues-data:().id;wait():[():issues-mini-window.style():[opacity=0;pointerEvents=none;)(:zIndex-counter=)(:zIndex-counter-1;zIndex=1];new-issues:().del()]",
                      "event": "click?issues:().[issues-data:().id].del()?false"
                    }
                  ]
                },
                {
                  "view": "View?class=flexbox pointer;tooltip.text=حفظ;style.height=3.5rem;style.width=3.5rem;style.borderRadius=1.5rem;hover.style.backgroundColor=#eee;style.transition=.2s;click:[():save-issue.click()]?!)(:issues-edit-readonly",
                  "children": [
                    {
                      "view": "Icon?name=bi-check2;style.color=blue;style.fontSize=2.6rem"
                    }
                  ]
                },
                {
                  "view": "View?class=flexbox pointer;tooltip.text=خروج;style.height=3.5rem;style.width=3.5rem;style.borderRadius=1.5rem;hover.style.backgroundColor=#eee;style.transition=.2s",
                  "controls": [
                    {
                      "event": "click?():issues-mini-window.style():[opacity=0;pointerEvents=none;)(:zIndex-counter=)(:zIndex-counter-1;zIndex=1];)(:issues-data.del();)(:new-issues.del()"
                    }
                  ],
                  "children": [
                    {
                      "view": "Icon?name=bi-x-lg;style.color=#000;style.fontSize=1.8rem"
                    }
                  ]
                }
              ]
            }
          ],
          "view": "View?class=flex align-center;style.width=100%"
        },
        {
          "view": "View?style.width=100%;style.height=1px;style.backgroundColor=#ddd"
        },
        {
          "view": "View?class=flex column;style.width=100%;data=)(:issues-data;style.gap=2rem",
          "children": [
            {
              "view": "View?class=flex column;style.gap=1rem;style.width=100%",
              "children": [
                {
                  "view": "Text?style.width=100%;style.borderBottom=1px solid #ddd;style.fontSize=1.5rem;text=معلومات التسجيل;style.padding=1rem 0;style.fontWeight=bold"
                },
                {
                  "view": "View?style.gap=2rem;style.width=100%;style.display=grid;style.gridTemplateColumns=1fr 1fr 1fr;style.padding=1rem",
                  "children": [
                    {
                      "view": "Input?style.width=100%;style.height=4rem;label.text=الرمز;label.location=outside;readonly;path=id;clicked.style.border=2px solid #0080ff;style.borderRadius=.5rem"
                    },
                    {
                      "view": "Input?style.width=100%;style.height=4rem;label.text=تاريخ التسجيل;label.location=outside;readonly;input.value=data().creation-date.toSimplifiedDateTimeAr();clicked.style.border=2px solid #0080ff;style.borderRadius=.5rem"
                    },
                    {
                      "view": "Input?style.width=100%;style.height=4rem;label.text=فعّال;label.location=outside;readonly;input.value=if():[data().active]:فعّال:غير فعّال;path=active;clicked.style.border=2px solid #0080ff;style.borderRadius=.5rem;droplist.items=_array:فعّال:غير فعّال;droplist.align=right;if():[issues-edit-readonly:()]:[droplist.readonly=true]",
                      "controls": [
                        {
                          "event": "click:droplist?data()=if():[droplist-txt:()=فعّال]:true:false"
                        }
                      ]
                    }
                  ]
                }
              ]
            },
            {
              "view": "View?class=flex column;style.gap=1rem;style.width=100%",
              "children": [
                {
                  "view": "Text?style.width=100%;style.borderBottom=1px solid #ddd;style.fontSize=1.5rem;text=معلومات عامة;style.padding=1rem 0;style.fontWeight=bold"
                },
                {
                  "view": "View?style.gap=2rem;style.width=100%;style.display=grid;style.gridTemplateColumns=1fr 1fr 1fr;style.rowGap=3rem;style.padding=1rem",
                  "children": [
                    {
                      "view": "Input?style.width=100%;style.height=4rem;label.text=حالة العطل;label.location=outside;path=issue-status;data()=data:().collection.issue-status.status.0;clicked.style.border=2px solid #0080ff;readonly;style.borderRadius=.5rem;droplist.items='data:().collection.issue-status.status';droplist.align=right;if():[issues-edit-readonly:()]:[droplist.readonly=true]"
                    },
                    {
                      "view": "Input?style.width=100%;style.height=4rem;label.text=حساسية العطل;label.location=outside;data().issue-sensitivity=data().issue-sensitivity||ملحّ;path=issue-sensitivity;clicked.style.border=2px solid #0080ff;readonly;style.borderRadius=.5rem;droplist.items=_list:ملحّ:ملحّ جدا;droplist.align=right;if():[issues-edit-readonly:()]:[droplist.readonly=true]"
                    },
                    {
                      "view": "Input?style.width=100%;style.height=4rem;label.text=كيف تم التبليغ;label.location=outside;readonly;data().how-alert-received=data().how-alert-received||إتصال;path=how-alert-received;clicked.style.border=2px solid #0080ff;style.borderRadius=.5rem;droplist.items=_list:إتصال:إشعار صوتي:إشعار نظري:إشعار مسجّل;droplist.align=right;if():[issues-edit-readonly:()]:[droplist.readonly=true]",
                      "controls": [
                        {
                          "event": "click:droplist?if():[data()=إتصال]:[next().style().display=flex;next().next().style().display=flex]:[next().style().display=none;next().next().style().display=none]"
                        }
                      ]
                    },
                    {
                      "view": "Input?style.width=100%;style.height=4rem;label.text=المركز المبلّغ;label.location=outside;path=alerter-center;if():data():[input.value=centers:().find():[id=data()].name];clicked.style.border=2px solid #0080ff;style.borderRadius=.5rem;droplist.items='centers:().():name';droplist.align=right;if():[issues-edit-readonly:()]:[droplist.readonly=true]",
                      "controls": [
                        {
                          "event": "click:droplist?data()=centers:().find():[name=data()].id"
                        }
                      ]
                    },
                    {
                      "view": "Input?style.width=100%;style.height=4rem;label.text=الشخص المبلّغ;label.location=outside;path=alerter;if():data():[input.value=members:().find():[id=data()].name];clicked.style.border=2px solid #0080ff;style.borderRadius=.5rem;droplist.items='members:().filter():[id.in():[centers:().find():[id=Data().alerter-center].members]].():name';droplist.align=right;if():[issues-edit-readonly:()]:[droplist.readonly=true]",
                      "controls": [
                        {
                          "event": "click:droplist?data()=members:().find():[name=data()].id"
                        }
                      ]
                    },
                    {
                      "controls": [
                        {
                          "event": "click:droplist?data()=members:().find():[name=data()].id"
                        }
                      ],
                      "view": "Input?style.width=100%;style.height=4rem;label.text=الشخص الذي تلقى التبليغ;label.location=outside;path=receiver;if():data():[input.value=members:().find():[id=data()].name];clicked.style.border=2px solid #0080ff;style.borderRadius=.5rem;droplist.items='members:().filter():[center=user:().center].():name';droplist.align=right;if():[issues-edit-readonly:()]:[droplist.readonly=true]"
                    },
                    {
                      "controls": [
                        {
                          "event": "click:droplist?data()=networks:().find():[name=data()].id"
                        }
                      ],
                      "view": "Input?style.width=100%;style.height=4rem;label.text=الشبكة المعطلة;label.location=outside;path=network;if():data():[input.value=networks:().find():[id=data()].name];clicked.style.border=2px solid #0080ff;style.borderRadius=.5rem;droplist.items='networks:().():name';droplist.align=right;if():[issues-edit-readonly:()]:[droplist.readonly=true]"
                    },
                    {
                      "view": "Input?style.width=100%;style.height=4rem;label.text=نوع مكان العطل;readonly;label.location=outside;path=issue-place-type;data()=data()||مركز;clicked.style.border=2px solid #0080ff;style.borderRadius=.5rem;droplist.items=_list:مركز:محطة;droplist.align=right;if():[issues-edit-readonly:()]:[droplist.readonly=true]",
                      "controls": [
                        {
                          "event": "click:droplist?issue-place-type:()=if():[droplist-txt:()=محطة]:station:center"
                        }
                      ]
                    },
                    {
                      "view": "Input?style.width=100%;style.height=4rem;label.text=مكان العطل;label.location=outside;path=issue-place;if():data():[if():[Data().issue-place-type=محطة]:[input.value=stations:().find():[id=data()].name].elif():[Data().issue-place-type=مركز]:[input.value=centers:().find():[id=data()].name]];clicked.style.border=2px solid #0080ff;style.borderRadius=.5rem;droplist.items='if():[issue-place-type:()=station]:[stations:().():name]:[centers:().():name]';droplist.align=right;if():[issues-edit-readonly:()]:[droplist.readonly=true]",
                      "controls": [
                        {
                          "event": "click:droplist?if():[issue-place-type:()=station]:[data()=stations:().find():[name=data()].id]:[data()=centers:().find():[name=data()].id]"
                        }
                      ]
                    }
                  ]
                }
              ]
            },
            {
              "children": [
                {
                  "view": "Text?style.width=100%;style.borderBottom=1px solid #ddd;style.fontSize=1.5rem;text=معلومات أخرى;style.padding=1rem 0;style.fontWeight=bold"
                },
                {
                  "view": "View?style.gap=1rem;style.width=100%;class=flex column;style.padding=0 1rem",
                  "children": [
                    {
                      "view": "View?class=flex;style.width=100%;style.gap=2rem",
                      "children": [
                        {
                          "view": "View?class=flexbox pointer;style.border=2px solid #ddd;style.borderRadius=.5rem;style.backgroundColor=#fff;style.height=2rem;style.width=2rem;checked=data().monitor",
                          "children": [
                            {
                              "view": "Icon?class=flexbox;name=bi-check2;style.color=#444;style.fontSize=2.75rem;style.marginRight=-.5rem;style.marginBottom=.25rem;style.opacity=if():[parent().checked]:1:0;style.transition=.3s"
                            }
                          ],
                          "controls": [
                            {
                              "event": "click?().checked=().checked.opp();1stChild().style().opacity=if():[checked]:1:0;if():[checked]:[parent().next().style().display=grid]:[parent().next().style().display=none;data().monitor.del()]?!)(:issues-edit-readonly"
                            }
                          ]
                        },
                        {
                          "view": "Text?text=العطل ظاهر على الشاشة;style.fontSize=1.6rem"
                        }
                      ]
                    },
                    {
                      "children": [
                        {
                          "controls": [
                            {
                              "event": "click:droplist?data()=monitors:().find():[serial-number=data()].id"
                            }
                          ],
                          "view": "Input?label:[text=رقم شاشة المراقبة];style.width=100%;style.height=4rem;style.border=1px solid #ddd;path=monitor;if():data():[input.value=monitors:().find():[id=data()].serial-number];clicked.style.border=2px solid #0080ff;style.borderRadius=.5rem;droplist.items='monitors:().():serial-number';droplist.align=right;if():[issues-edit-readonly:()]:[droplist.readonly=true]"
                        }
                      ],
                      "view": "View?old-monitor:()=data().monitor;style.gap=2rem;style.width=100%;style.display=if():[data().monitor]:grid:none;style.gridTemplateColumns=1fr 1fr 1fr"
                    },
                    {
                      "view": "View?class=flex;style.width=100%;style.gap=2rem",
                      "children": [
                        {
                          "children": [
                            {
                              "view": "Icon?class=flexbox;name=bi-check2;style.color=#444;style.fontSize=2.75rem;style.marginRight=-.5rem;style.marginBottom=.25rem;style.opacity=if():[parent().checked]:1:0;style.transition=.3s"
                            }
                          ],
                          "controls": [
                            {
                              "event": "click?checked=().checked.opp();1stChild().style().opacity=if():[().checked]:1:0;if():[().checked]:[parent().next().style().display=grid]:[parent().next().style().display=none;data().main-device.del()]?!)(:issues-edit-readonly"
                            }
                          ],
                          "view": "View?class=flexbox pointer;style.border=2px solid #ddd;style.borderRadius=.5rem;style.backgroundColor=#fff;style.height=2rem;style.width=2rem;checked=data().main-device"
                        },
                        {
                          "view": "Text?text=تم تحديد مصدر العطل;style.fontSize=1.6rem"
                        }
                      ]
                    },
                    {
                      "children": [
                        {
                          "controls": [
                            {
                              "event": "click:droplist?data()=devices:().find():[name=data()].id"
                            }
                          ],
                          "view": "Input?label:[text=الجهاز الرئيسي المعطل];style.width=100%;style.height=4rem;style.border=1px solid #ddd;path=main-device;if():data():[input.value=devices:().find():[id=data()].name];clicked.style.border=2px solid #0080ff;style.borderRadius=.5rem;droplist.items='devices:().():name';droplist.align=right;if():[issues-edit-readonly:()]:[droplist.readonly=true];droplist.searchable"
                        }
                      ],
                      "view": "View?style.gap=2rem;style.width=100%;style.display=if():[data().main-device]:grid:none;style.gridTemplateColumns=1fr 1fr 1fr"
                    },
                    {
                      "view": "View?class=flex;style.width=100%;style.gap=2rem",
                      "children": [
                        {
                          "children": [
                            {
                              "view": "Icon?class=flexbox;name=bi-check2;style.color=#444;style.fontSize=2.75rem;style.marginRight=-.5rem;style.marginBottom=.25rem;style.opacity=if():[parent().checked]:1:0;style.transition=.3s"
                            }
                          ],
                          "controls": [
                            {
                              "event": "click?().checked=().checked.opp();1stChild().style().opacity=if():[().checked]:1:0;if():[().checked]:[parent().next().style().display=grid]:[parent().next().style().display=none;data().how-observer-can-fix-issue.del()]?!issues-edit-readonly:()"
                            }
                          ],
                          "view": "View?class=flexbox pointer;style.border=2px solid #ddd;style.borderRadius=.5rem;style.backgroundColor=#fff;style.height=2rem;style.width=2rem;checked=[data().observer-can-fix-issue||false]"
                        },
                        {
                          "view": "Text?text=يستطيع المراقب صيانة العطل;style.fontSize=1.6rem"
                        }
                      ]
                    },
                    {
                      "view": "View?style.gap=2rem;style.width=100%;style.display=if():[data().observer-can-fix-issue]:grid:none;style.gridTemplateColumns=1fr 1fr 1fr",
                      "children": [
                        {
                          "view": "Input?label:[text=وصف كيفية صيانة العطل];textarea;style.width=100%;style.height=8rem;style.border=1px solid #ddd;path=how-observer-can-fix-issue;clicked.style.border=2px solid #0080ff;style.borderRadius=.5rem;if():[issues-edit-readonly:()]:[readonly=true]"
                        }
                      ]
                    },
                    {
                      "children": [
                        {
                          "children": [
                            {
                              "view": "Icon?class=flexbox;name=bi-check2;style.color=#444;style.fontSize=2.75rem;style.marginRight=-.5rem;style.marginBottom=.25rem;style.opacity=if():[parent().checked]:1:0;style.transition=.3s"
                            }
                          ],
                          "view": "View?class=flexbox pointer;style.border=2px solid #ddd;style.borderRadius=.5rem;style.backgroundColor=#fff;style.height=2rem;style.width=2rem;checked=[data().issue-fixed-itself||false]",
                          "controls": [
                            {
                              "event": "click?().checked=().checked.opp();1stChild().style().opacity=if():[().checked]:1:0;if():[().checked]:[parent().next().style().display=grid]:[parent().next().style().display=none;data().how-issue-fixed-itself.del()]?!issues-edit-readonly:()"
                            }
                          ]
                        },
                        {
                          "view": "Text?text=لقد عالج العطل نفسه;style.fontSize=1.6rem"
                        }
                      ],
                      "view": "View?class=flex;style.width=100%;style.gap=2rem"
                    },
                    {
                      "children": [
                        {
                          "view": "Input?label:[text=وصف كيف عالج العطل نفسه];textarea;style.width=100%;style.height=8rem;style.border=1px solid #ddd;path=how-issue-fixed-itself;clicked.style.border=2px solid #0080ff;style.borderRadius=.5rem;if():[issues-edit-readonly:()]:[readonly=true]"
                        }
                      ],
                      "view": "View?style.gap=2rem;style.width=100%;style.display=if():[data().issue-fixed-itself]:grid:none;style.gridTemplateColumns=1fr 1fr 1fr"
                    }
                  ]
                }
              ],
              "view": "View?class=flex column;style.gap=1rem;style.width=100%;style.marginBottom=1rem"
            },
            {
              "children": [
                {
                  "view": "Text?style.width=100%;style.borderBottom=1px solid #ddd;style.fontSize=1.5rem;text=وصف العطل;style.padding=1rem 0;style.fontWeight=bold"
                },
                {
                  "view": "View?style.gap=2rem;style.width=100%;style.display=grid;style.gridTemplateColumns=1fr 1fr 1fr;style.padding=1rem",
                  "children": [
                    {
                      "view": "Input?textarea;style.width=100%;style.height=8rem;path=issue-description;clicked.style.border=2px solid #0080ff;style.borderRadius=.5rem;if():[issues-edit-readonly:()]:[readonly=true];style.border=1px solid #ccc"
                    }
                  ]
                }
              ],
              "view": "View?class=flex column;style.gap=1rem;style.width=100%"
            },
            {
              "children": [
                {
                  "view": "Text?style.width=100%;style.borderBottom=1px solid #ddd;style.fontSize=1.5rem;text=ملاحظات;style.padding=1rem 0;style.fontWeight=bold"
                },
                {
                  "view": "View?style.gap=2rem;style.width=100%;style.display=grid;style.gridTemplateColumns=1fr 1fr 1fr;style.padding=1rem",
                  "children": [
                    {
                      "view": "Input?textarea;style.width=100%;style.height=8rem;path=note;clicked.style.border=2px solid #0080ff;style.borderRadius=.5rem;if():[issues-edit-readonly:()]:[readonly=true];style.border=1px solid #ccc"
                    }
                  ]
                }
              ],
              "view": "View?class=flex column;style.gap=1rem;style.width=100%"
            }
          ]
        },
        {
          "view": "View?class=flexbox;style.width=100%;style.borderTop=1px solid #ddd;style.padding=2rem;style.justifyContent=flex-end;style.gap=1rem;style.marginTop=2rem;style.marginBottom=-1rem",
          "children": [
            {
              "controls": [
                {
                  "event": "click?issues-data:().maintenances=[issues-data:().maintenances||_list];save():[collection=issues;data=issues-data:()]:[():issues-mini-window.style():[opacity=0;pointerEvents=none];note():[text=تم تسجيل العطل بنجاح];issues:().replaceItem():[issues-data:()];new-issues:().del();update():[issues-manager-list]]"
                }
              ],
              "view": "Text:save-issue?class=flexbox pointer;style.height=3.25rem;style.borderRadius=1.5rem;style.width=10rem;style.color=#fff;style.backgroundColor=blue;text=حفظ;style.fontSize=1.3rem;style.opacity=0.8;hover.style.opacity=1;style.transition=.3s?!issues-edit-readonly:()"
            },
            {
              "view": "Text?class=flexbox pointer;style.height=3.25rem;style.borderRadius=1.5rem;style.width=10rem;style.color=#fff;style.backgroundColor=#888;text=خروج;style.fontSize=1.3rem;style.opacity=0.8;hover.style.opacity=1;style.transition=.3s",
              "controls": [
                {
                  "event": "click?():issues-mini-window.style():[opacity=0;pointerEvents=none;zIndex=1];issues-data:().del();new-issues:().del()"
                }
              ]
            }
          ]
        }
      ]
    }
  ],
  "view": "View?id=issues-mini-window;class=flexbox pointer;style.opacity=0;style.pointerEvents=none;style.position=absolute;style.top=0;style.left=0;style.right=0;style.bottom=0;style.backgroundColor=#00000060;style.zIndex=1;style.transition=.2s;style.padding=5vh 0",
  "functions": {}
}