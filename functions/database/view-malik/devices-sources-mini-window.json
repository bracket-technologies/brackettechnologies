{
  "id": "devices-sources-mini-window",
  "children": [
    {
      "type": "View?class=flex column;style.width=90vw;style.height=100%;style.padding=4rem;style.borderRadius=1rem;style.backgroundColor=#fff;style.cursor=default;style.gap=2rem;style.overflowY=auto?devices-sources-data:()",
      "children": [
        {
          "type": "View?class=flex align-device;style.width=100%",
          "children": [
            {
              "type": "Text?text=إستمارة جهاز +if():[)(:devices-sources-copied]:(منسوخ).elif():[)(:devices-sources-edit-readonly]:(عرض).elif():[)(:devices-sources-edit]:(تعديل).else():(جديد);style.fontSize=1.8rem;style.fontWeight=bolder"
            },
            {
              "type": "View?class=flexbox;style.gap=.5rem;style.marginRight=auto",
              "children": [
                {
                  "children": [
                    {
                      "type": "Icon?name=bi-trash;style.color=red;style.fontSize=1.8rem"
                    }
                  ],
                  "controls": [
                    {
                      "event": "click??false"
                    }
                  ],
                  "type": "View?class=flexbox pointer;tooltip.text=حذف;style.height=3.5rem;style.width=3.5rem;style.borderRadius=1.5rem;hover.style.backgroundColor=#eee;style.transition=.2s?!)(:new-devices-sources;!)(:devices-sources-edit-readonly"
                },
                {
                  "controls": [
                    {
                      "event": "click?save():[collection=resources-reference-devices;data=devices-sources-data:()]:[reference-devices:().replaceItem():[devices-sources-data:().clone()];if():[devices-sources-data:().devices.len()>0;devices:().find():[id.in():[devices-sources-data:().devices]]]:[my-devices=devices:().filter():[id.in():[devices-sources-data:().devices]].():[reference-device=devices-sources-data:().id];save():[collection=resources-reference-devices;data=().my-devices]];update():[devices-sources-manager-list];():devices-sources-mini-window.style():[opacity=0;pointerEvents=none];note():[text=تم حفظ الجهاز بنجاح];new-devices-sources:().del()]"
                    }
                  ],
                  "children": [
                    {
                      "type": "Icon?name=bi-check2;style.color=blue;style.fontSize=2.6rem"
                    }
                  ],
                  "type": "View:reference-device-save?class=flexbox pointer;tooltip.text=حفظ;style.height=3.5rem;style.width=3.5rem;style.borderRadius=1.5rem;hover.style.backgroundColor=#eee;style.transition=.2s?!)(:devices-sources-edit-readonly"
                },
                {
                  "controls": [
                    {
                      "event": "click?():devices-sources-mini-window.style():[opacity=0;pointerEvents=none;zIndex=1];devices-sources-data:().del();new-devices-sources:().del()"
                    }
                  ],
                  "type": "View?class=flexbox pointer;tooltip.text=خروج;style.height=3.5rem;style.width=3.5rem;style.borderRadius=1.5rem;hover.style.backgroundColor=#eee;style.transition=.2s",
                  "children": [
                    {
                      "type": "Icon?name=bi-x-lg;style.color=#000;style.fontSize=1.8rem"
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          "type": "View?style.width=100%;style.height=1px;style.backgroundColor=#ddd"
        },
        {
          "children": [
            {
              "type": "View?class=flex column;style.gap=1rem;style.width=100%",
              "children": [
                {
                  "type": "Text?style.width=100%;style.borderBottom=1px solid #ddd;style.fontSize=1.5rem;text=معلومات التسجيل;style.padding=1rem 0;style.fontWeight=bold"
                },
                {
                  "children": [
                    {
                      "type": "Input?style.width=100%;style.height=4rem;label.text=الرمز;label.location=outside;readonly;path=id;clicked.style.border=2px solid #0080ff;style.borderRadius=.5rem"
                    },
                    {
                      "type": "Input?style.width=100%;style.height=4rem;label.text=تاريخ التسجيل;label.location=outside;readonly;input.value=data().creation-date.toSimplifiedDateTimeAr();clicked.style.border=2px solid #0080ff;style.borderRadius=.5rem"
                    },
                    {
                      "controls": [
                        {
                          "event": "click:droplist?data()=if():[txt()=فعّال]:true:false"
                        }
                      ],
                      "type": "Input?style.width=100%;style.height=4rem;label.text=فعّال;label.location=outside;readonly;path=active;input.value=if():[data()]:فعّال:غير فعّال;clicked.style.border=2px solid #0080ff;style.borderRadius=.5rem;droplist.items=_array:فعّال:غير فعّال;droplist.align=right;if():[)(:devices-sources-edit-readonly]:[droplist.readonly=true]"
                    }
                  ],
                  "type": "View?style.gap=2rem;style.width=100%;style.display=grid;style.gridTemplateColumns=1fr 1fr 1fr;style.padding=1rem"
                }
              ]
            },
            {
              "type": "View?class=flex column;style.gap=1rem;style.width=100%",
              "children": [
                {
                  "type": "Text?style.width=100%;style.borderBottom=1px solid #ddd;style.fontSize=1.5rem;text=معلومات عامة;style.padding=1rem 0;style.fontWeight=bold"
                },
                {
                  "children": [
                    {
                      "type": "Input?style.width=100%;style.height=4rem;label.text=إسم الجهاز;label.location=outside;path=name;clicked.style.border=2px solid #0080ff;style.borderRadius=.5rem;if():[)(:devices-sources-edit-readonly]:[readonly=true]"
                    },
                    {
                      "type": "Input?style.width=100%;style.height=4rem;label.text=الإسم التجاری;label.location=outside;path=trade-name;clicked.style.border=2px solid #0080ff;style.borderRadius=.5rem;if():[)(:devices-sources-edit-readonly]:[readonly=true]"
                    },
                    {
                      "type": "Input?style.width=100%;style.height=4rem;label.text=نوع الجهاز;label.location=outside;readonly;path=type;clicked.style.border=2px solid #0080ff;style.borderRadius=.5rem;droplist.items='data:().collection.device-type.types';droplist.align=right;if():[)(:devices-sources-edit-readonly]:[droplist.readonly=true]"
                    },
                    {
                      "type": "Input?style.width=100%;style.height=4rem;label.text=البلد المصنع;label.location=outside;readonly;path=origin-country;clicked.style.border=2px solid #0080ff;style.borderRadius=.5rem;droplist.items='data:().public.countries-ar.countries-ar';droplist.align=right;if():[)(:devices-sources-edit-readonly]:[droplist.readonly=true]"
                    },
                    {
                      "type": "Input?style.width=100%;style.height=4rem;label.text=الشركة المصنعة;label.location=outside;path=manufacturer;clicked.style.border=2px solid #0080ff;style.borderRadius=.5rem;if():[)(:devices-sources-edit-readonly]:[readonly=true]"
                    },
                    {
                      "type": "Input?style.width=100%;input.type=date;style.height=4rem;label.text=تاريخ الصنع;label.location=outside;path=manfacturation-date;clicked.style.border=2px solid #0080ff;style.borderRadius=.5rem;if():[)(:devices-sources-edit-readonly]:[readonly=true]",
                      "controls": [
                        {
                          "event": "input?data()=data().timestamp()"
                        }
                      ]
                    },
                    {
                      "type": "Input?style.width=100%;style.height=4rem;label.text=الحالة;label.location=outside;readonly;path=status;clicked.style.border=2px solid #0080ff;style.borderRadius=.5rem;droplist.items=data:().collection.devices-sources-status.status;droplist.align=right;if():[)(:devices-sources-edit-readonly]:[droplist.readonly=true]"
                    }
                  ],
                  "type": "View?style.gap=2rem;style.width=100%;style.display=grid;style.gridTemplateColumns=1fr 1fr 1fr;style.rowGap=3rem;style.padding=1rem"
                }
              ]
            },
            {
              "children": [
                {
                  "type": "Text?style.width=100%;style.borderBottom=1px solid #ddd;style.fontSize=1.5rem;text=الأجهزة المنصوبة;style.padding=1rem 0;style.fontWeight=bold"
                },
                {
                  "children": [
                    {
                      "type": "View?style.gap=2rem;style.width=100%;style.display=grid;style.gridTemplateColumns=1fr 1fr 1fr;style.padding=1rem",
                      "children": [
                        {
                          "children": [
                            {
                              "controls": [
                                {
                                  "event": "click:droplist?data()=devices:().find():[name=data()].id"
                                }
                              ],
                              "type": "Input?style.width=100%;style.height=4rem;if():data():[input.value=devices:().find():[id=data()].name];clicked.style.border=2px solid #0080ff;style.borderRadius=.5rem;style.border=1px solid #ccc;readonly;droplist.items='devices:().():name';if():[)(:devices-edit-readonly]:[droplist.readonly=true];droplist.align=right"
                            },
                            {
                              "controls": [
                                {
                                  "event": "click?Data().devices=_array;parent().input().text()=_string?Data().devices.len()=1;!)(:devices-sources-edit-readonly"
                                },
                                {
                                  "actions": "remove:[parent().id]",
                                  "event": "click??Data().devices.len()>1;!)(:devices-sources-edit-readonly"
                                }
                              ],
                              "type": "Icon?class=flexbox pointer;name=bi-dash;style.position=absolute;style.left=0.5rem;style.fontSize=2.5rem;style.borderRadius=2rem;style.height=3rem;style.width=3rem;style.color=#888;hover.style.color=#666;hover.style.backgroundColor=#eee;style.transition=.2s"
                            }
                          ],
                          "type": "[View]?style.width=100%;class=flexbox;style.position=relative"
                        },
                        {
                          "children": [
                            {
                              "type": "Icon?class=flexbox pointer;style.marginTop=auto;name=bi-plus;style.fontSize=2.5rem;style.border=1px solid #ccc;style.borderRadius=2rem;style.height=3rem;style.width=3rem;style.marginBottom=.5rem;style.color=#888;hover.style.color=#666;hover.style.border=1px solid #aaa;style.transition=.2s",
                              "controls": [
                                {
                                  "actions": "insert:[parent().parent().id]?insert.component=parent().parent().children.0;insert.path=_array:devices:[Data().devices.len()-1];insert.index=parent().parent().children().len()-1",
                                  "event": "click?Data().devices.push():_string?Data().devices.len()>0;!)(:devices-edit-readonly"
                                }
                              ]
                            }
                          ],
                          "type": "View?class=flex;style.gap=1rem"
                        }
                      ]
                    }
                  ],
                  "type": "View?class=flex column;path=devices"
                }
              ],
              "type": "View?class=flex column;style.gap=1rem;style.width=100%"
            },
            {
              "children": [
                {
                  "type": "Text?style.width=100%;style.borderBottom=1px solid #ddd;style.fontSize=1.5rem;text=ملفات الإعدادات;style.padding=1rem 0;style.fontWeight=bold"
                },
                {
                  "type": "View?style.gap=2rem;style.width=100%;style.display=grid;style.gridTemplateColumns=1fr 7fr;style.padding=1rem",
                  "children": [
                    {
                      "controls": [
                        {
                          "event": "change?loader.show;if():[files:().len()=0]:return();length=data().files.len()+files:().len();upload():[files=files:()]:[data().files.push():[uploads:().():[data.url]];if():[data().files.len()=().length]:[loader.hide;update():parent()]]"
                        }
                      ],
                      "type": "Input?input.type=file;multiple;style:[width=100%;height=8rem;border=1px solid #ccc;borderRadius=.5rem;cursor=pointer]"
                    },
                    {
                      "type": "View?if():[!data().files]:[data().files=_list];style.gap=2rem;style.width=100%;style.display=grid;style.gridTemplateColumns=1fr 1fr 1fr 1fr 1fr 1fr 1fr",
                      "children": [
                        {
                          "type": "[View]?class=flexbox;path=files;style:[width=100%;height=8rem;border=1px solid #ccc;borderRadius=.5rem;cursor=pointer;transition=.2s];hover.style:[border=1px solid #888];mouseenter:[1stChild().style().color=#444];mouseleave:[1stChild().style().color=#888];click:[open():data()]?data().files.len()>0",
                          "children": [
                            {
                              "type": "Icon?name=description;google.outlined;style:[fontSize=6rem;color=#888;transition=.2s]"
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ],
              "type": "View?class=flex column;style.gap=1rem;style.width=100%"
            },
            {
              "children": [
                {
                  "type": "Text?style.width=100%;style.borderBottom=1px solid #ddd;style.fontSize=1.5rem;text=وصف الجهاز;style.padding=1rem 0;style.fontWeight=bold"
                },
                {
                  "children": [
                    {
                      "type": "Input?textarea;style.width=100%;style.height=8rem;label.text='أبعاد، مهام، أهمية، أفضلية...';path=description;clicked.style.border=2px solid #0080ff;style.borderRadius=.5rem;if():[)(:devices-sources-edit-readonly]:[readonly=true];style.border=1px solid #ccc"
                    },
                    {
                      "type": "Input?textarea;style.width=100%;style.height=8rem;label.text=كيفية إستخدام الجهاز;path=how-to-use;clicked.style.border=2px solid #0080ff;style.borderRadius=.5rem;if():[)(:devices-sources-edit-readonly]:[readonly=true];style.border=1px solid #ccc"
                    }
                  ],
                  "type": "View?style.gap=2rem;style.width=100%;style.display=grid;style.gridTemplateColumns=1fr 1fr 1fr;style.padding=1rem"
                }
              ],
              "type": "View?class=flex column;style.gap=1rem;style.width=100%"
            },
            {
              "type": "View?class=flex column;style.gap=1rem;style.width=100%",
              "children": [
                {
                  "type": "Text?style.width=100%;style.borderBottom=1px solid #ddd;style.fontSize=1.5rem;text=ملاحظات;style.padding=1rem 0;style.fontWeight=bold"
                },
                {
                  "children": [
                    {
                      "type": "Input?textarea;style.width=100%;style.height=8rem;path=note;clicked.style.border=2px solid #0080ff;style.borderRadius=.5rem;if():[)(:devices-sources-edit-readonly]:[readonly=true];style.border=1px solid #ccc"
                    }
                  ],
                  "type": "View?style.gap=2rem;style.width=100%;style.display=grid;style.gridTemplateColumns=1fr 1fr 1fr;style.padding=1rem"
                }
              ]
            }
          ],
          "type": "View?class=flex column;style.width=100%;data=)(:devices-sources-data;style.gap=2rem"
        },
        {
          "type": "View?class=flexbox;style.width=100%;style.borderTop=1px solid #ddd;style.padding=2rem;style.justifyContent=flex-end;style.gap=1rem;style.marginTop=2rem;style.marginBottom=-1rem",
          "children": [
            {
              "type": "Text?class=flexbox pointer;style.height=3.25rem;style.borderRadius=1.5rem;style.width=10rem;style.color=#fff;style.backgroundColor=blue;text=حفظ;style.fontSize=1.3rem;style.opacity=0.8;hover.style.opacity=1;style.transition=.3s;click:[():'reference-device-save'.click()]?!)(:devices-edit-readonly"
            },
            {
              "type": "Text?class=flexbox pointer;style.height=3.25rem;style.borderRadius=1.5rem;style.width=10rem;style.color=#fff;style.backgroundColor=#888;text=خروج;style.fontSize=1.3rem;style.opacity=0.8;hover.style.opacity=1;style.transition=.3s",
              "controls": [
                {
                  "event": "click?():devices-sources-mini-window.style():[opacity=0;pointerEvents=none;zIndex=1];devices-sources-data:().del();)(:new-devices-sources.del()"
                }
              ]
            }
          ]
        }
      ]
    }
  ],
  "type": "View?id=devices-sources-mini-window;class=flexbox pointer;style.opacity=0;style.pointerEvents=none;style.position=absolute;style.top=0;style.left=0;style.right=0;style.bottom=0;style.backgroundColor=#00000060;style.zIndex=1;style.transition=.2s;style.padding=5vh 0"
}