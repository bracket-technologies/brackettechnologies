{
  "id": "payments",
  "type": "View:payments?if():[!payments:()]:[payments:()=_list]",
  "creation-date": 1658779408265,
  "children": [
    {
      "children": [
        {
          "type": "Text?class=flexbox;text=Payments;style:[height=3.5rem;padding=0 1rem;fontSize=2rem;borderLeft=3px solid blue]"
        },
        {
          "type": "View?class=flexbox;style:[gap=1rem]",
          "children": [
            {
              "type": "View?class=flexbox;style:[height=3.5rem;width=3.5rem;border=1px solid #ddd;borderRadius=.5rem]",
              "children": [
                {
                  "type": "Icon?name=search;google.outlined;style:[color=#888;fontSize=2rem]"
                }
              ]
            },
            {
              "type": "View?class=flexbox;style:[height=3.5rem;width=3.5rem;border=1px solid #ddd;borderRadius=.5rem]",
              "controls": [
                {
                  "event": "click?update():new-payment;():new-payment.style():[opacity=1;pointerEvents=auto]"
                }
              ],
              "children": [
                {
                  "type": "Icon?name=add;google.outlined;style:[color=#888;fontSize=2rem]"
                }
              ]
            }
          ]
        }
      ],
      "type": "View?class=flexbox;style:[width=100%;height=6rem;padding=1rem;gap=1rem;justifyContent=space-between]"
    },
    {
      "type": "View:payment-list?class=vertical;style:[width=100%;gap=1rem;backgroundColor=#eee;minHeight=100vh]",
      "controls": [
        {
          "event": "loaded?if():[!trip-payments:()]:[search():[collection=payment]:[payments:()=search:().data.values().sort():[path=payment-date;descending];update():payment-list]]:[trip-payments:()=false]"
        }
      ],
      "children": [
        {
          "type": "View?class=vertical;style:[width=100%;gap=1rem;paddingTop=1rem;paddingBottom=7rem]?payments:().len()>0",
          "children": [
            {
              "type": "[View]?Data=payments;class=flex vertical;style:[gap=1rem;padding=1rem;width=100%;backgroundColor=#fff]",
              "children": [
                {
                  "children": [
                    {
                      "children": [
                        {
                          "type": "Text?text=data().trip-name;class=flexbox;style:[fontSize=1.8rem;color=blue;height=3rem]"
                        },
                        {
                          "type": "Text?text=[data().total-payment-lbp||0].price()+' L.L | '+[data().total-payment-usd||0]+' $';class=flexbox;style:[fontSize=1.8rem;color=red;height=3rem]"
                        }
                      ],
                      "type": "View?class=flexbox;style:[width=100%;justifyContent=space-between]"
                    },
                    {
                      "type": "View?class=vertical;style:[gap=.5rem;width=100%;transition=.2s;overflow=hidden]",
                      "children": [
                        {
                          "children": [
                            {
                              "type": "Text?text=#;style:[color=#666;fontSize=1.2rem;flex=1]"
                            },
                            {
                              "type": "Text?text=Description;style:[color=#666;fontSize=1.2rem;flex=1]"
                            },
                            {
                              "type": "Text?text=Payment;style:[color=#666;fontSize=1.2rem;flex=1]"
                            }
                          ],
                          "type": "View?class=horizontal align-center;style:[display=grid;width=100%;gap=.5rem;gridTemplateColumns=1.5rem 8fr 2fr;height=2.5rem;backgroundColor=#ddd;padding=.5rem;borderRadius=.25rem]"
                        },
                        {
                          "children": [
                            {
                              "type": "[View]?class=horizontal;path=sales;style:[display=grid;gap=.5rem;gridTemplateColumns=1.5rem 8fr 2fr;padding=0 .5rem]",
                              "children": [
                                {
                                  "type": "Text?class=horizontal;text=parent().mapIndex+1;style:[fontSize=1.3rem;flex=1]"
                                },
                                {
                                  "type": "Text?class=horizontal;text=data().description;style:[width=100%;fontSize=1.3rem]"
                                },
                                {
                                  "type": "Text?class=horizontal;text=data().payment.price()+' '+data().payment-unit;style:[width=100%;fontSize=1.3rem]"
                                }
                              ]
                            }
                          ],
                          "type": "View?class=vertical;style:[gap=.5rem;flex=1]"
                        }
                      ]
                    },
                    {
                      "children": [
                        {
                          "type": "View?class=horizontal;style:[gap=.5rem]",
                          "children": [
                            {
                              "type": "Text?text=Date:;style:[fontSize=1.3rem;color=#888]?false"
                            },
                            {
                              "type": "Text?text=data().payment-date.toDateFormat();style:[fontSize=1.3rem;color=#888]"
                            }
                          ]
                        },
                        {
                          "type": "View?class=horizontal;style:[gap=.5rem]",
                          "children": [
                            {
                              "type": "Text?text=Paid By;style:[fontSize=1.3rem;color=#888]?false"
                            },
                            {
                              "type": "Text?text=data().created-by-name;style:[fontSize=1.3rem;color=#888]"
                            }
                          ]
                        }
                      ],
                      "type": "View?class=flexbox;style:[width=100%;justifyContent=space-between;borderTop=1px solid #ddd;padding=.5rem]"
                    },
                    {
                      "type": "View?class=flexbox;style:[justifyContent=space-between;paddingTop=.5rem]",
                      "children": [
                        {
                          "controls": [
                            {
                              "event": "click?html2pdf():[view=parent().parent().parent();size=A6]"
                            }
                          ],
                          "type": "View?class=horizontal;style:[gap=.5rem;paddding=.5rem];closed=false",
                          "children": [
                            {
                              "type": "Icon?name=receipt_long;google.outlined;style:[fontSize=1.8rem]"
                            },
                            {
                              "type": "Text?text=Receipt;style:[fontSize=1.3rem]"
                            }
                          ]
                        },
                        {
                          "type": "View?class=horizontal;style:[gap=.5rem;padding=.5rem]",
                          "children": [
                            {
                              "type": "Icon?name=share;google.outlined;style:[fontSize=1.8rem]"
                            },
                            {
                              "type": "Text?text=Share;style:[fontSize=1.3rem]"
                            }
                          ],
                          "controls": [
                            {
                              "event": "click?share():[text='Trip: '+data().trip-name+' | Payment: '+data().total-payment-lbp.price()+' L.L. '+data().total-payment-usd.price()+' $ | Date: '+data().payment-date.toDateInputFormat()+' | Created By: '+data().created-by-name]"
                            }
                          ]
                        }
                      ]
                    }
                  ],
                  "type": "View?class=flex vertical;style:[width=100%;gap=1rem]"
                }
              ]
            }
          ]
        }
      ]
    }
  ]
}