{
  "type": "View:bookings-list?class=flex column;style:[width=100%;padding=1rem;backgroundColor=#fff;overflowY=auto];reservations:()=[reservations:()||_list]",
  "id": "bookings-list",
  "functions": {},
  "creation-date": 1655930948086,
  "children": [
    {
      "type": "View?style:[width=100%];data=bookings:()",
      "children": [
        {
          "type": "View?class=vertical;style:[width=100%;minHeight=30rem]?bookings:().len()>0",
          "children": [
            {
              "type": "View?id=table-headers;class=grid align-center;style:[borderBottom=1px solid #ddd;gridTemplateColumns=3rem 8rem 10rem 32rem 30rem 15rem 15rem 8rem 6rem 8rem 1fr;height=4rem]",
              "children": [
                {
                  "children": [
                    {
                      "type": "Text?class=pointer;text=#;style:[color=#888;fontSize=1.2rem;transition=.3s];hover.style.color=#444"
                    }
                  ],
                  "type": "View?class=flexbox align-center;style:[height=100%;flex=1]"
                },
                {
                  "children": [
                    {
                      "type": "Text?class=pointer;text=PNR;style:[color=#888;fontSize=1.2rem;transition=.3s];hover.style.color=#444",
                      "controls": [
                        {
                          "event": "click?loader.show;timer():[bookings:()=sort():[data=bookings:();path=pnr;descending];update():bookings-list-data;loader.hide]:50"
                        }
                      ]
                    }
                  ],
                  "type": "View?class=flex align-center;style:[height=100%;flex=1;padding=0 .5rem]"
                },
                {
                  "children": [
                    {
                      "controls": [
                        {
                          "event": "click?loader.show;timer():[bookings:()=sort():[data=bookings:();path=creation-date;descending];update():bookings-list-data;loader.hide]:50"
                        }
                      ],
                      "type": "Text?class=pointer;text=Booking Date;style:[color=#888;fontSize=1.2rem;transition=.3s];hover.style.color=#444"
                    }
                  ],
                  "type": "View?class=flex align-center;style:[height=100%;flex=1]"
                },
                {
                  "children": [
                    {
                      "children": [
                        {
                          "type": "Text?class=pointer;text=Rooting;style:[color=#888;fontSize=1.2rem;transition=.3s];hover.style.color=#444",
                          "controls": [
                            {
                              "event": "click?loader.show;timer():[bookings:()=sort():[data=bookings:();path=go-departure-airport;descending];update():bookings-list-data;loader.hide]:50"
                            }
                          ]
                        }
                      ],
                      "type": "View?class=flex align-center;style:[height=100%;width=10rem]"
                    },
                    {
                      "children": [
                        {
                          "type": "Text?class=pointer;text=Travel Date;style:[color=#888;fontSize=1.2rem;transition=.3s];hover.style.color=#444",
                          "controls": [
                            {
                              "event": "click?loader.show;timer():[bookings:()=sort():[data=bookings:();path=travel-date;descending];update():bookings-list-data;loader.hide]:50"
                            }
                          ]
                        }
                      ],
                      "type": "View?class=flex align-center;style:[height=100%;width=12rem]"
                    },
                    {
                      "type": "View?class=flex align-center;style:[height=100%;width=8rem]",
                      "children": [
                        {
                          "type": "Text?class=pointer;text=Timing;style:[color=#888;fontSize=1.2rem;transition=.3s];hover.style.color=#444",
                          "controls": [
                            {
                              "event": "click?loader.show;timer():[bookings:()=sort():[data=bookings:();path=go-departure-time;descending];update():bookings-list-data;loader.hide]:50"
                            }
                          ]
                        }
                      ]
                    },
                    {
                      "type": "View?style:[width=2rem]"
                    }
                  ],
                  "type": "View?class=flex align-center;style:[width=32rem]"
                },
                {
                  "children": [
                    {
                      "controls": [
                        {
                          "event": "click?loader.show;timer():[bookings:()=sort():[data=bookings:();path=booking-details.0.seats.0.passengers-details.first-name;descending];update():bookings-list-data;loader.hide]:50"
                        }
                      ],
                      "type": "Text?class=pointer;text=Passenger Name;style:[color=#888;fontSize=1.2rem;transition=.3s];hover.style.color=#444"
                    }
                  ],
                  "type": "View?class=flex align-center;style:[height=100%;flex=1]"
                },
                {
                  "children": [
                    {
                      "type": "Text?class=pointer;text=User;style:[color=#888;fontSize=1.2rem;transition=.3s];hover.style.color=#444",
                      "controls": [
                        {
                          "event": "click?loader.show;timer():[bookings:()=sort():[data=bookings:();path=user;descending];update():bookings-list-data;loader.hide]:50"
                        }
                      ]
                    }
                  ],
                  "type": "View?class=flex align-center;style:[height=100%;flex=1]"
                },
                {
                  "type": "View?class=flex align-center;style:[height=100%;flex=1]",
                  "children": [
                    {
                      "type": "Text?class=pointer;text=Agent;style:[color=#888;fontSize=1.2rem;transition=.3s];hover.style.color=#444",
                      "controls": [
                        {
                          "event": "click?loader.show;timer():[bookings:()=sort():[data=bookings:();path=agent;descending];update():bookings-list-data;loader.hide]:50"
                        }
                      ]
                    }
                  ]
                },
                {
                  "children": [
                    {
                      "type": "Text?class=pointer;text=Status;style:[color=#888;fontSize=1.2rem;transition=.3s];hover.style.color=#444",
                      "controls": [
                        {
                          "event": "click?loader.show;timer():[bookings:()=sort():[data=bookings:();path=status;descending];update():bookings-list-data;loader.hide]:50"
                        }
                      ]
                    }
                  ],
                  "type": "View?class=flex align-center;style:[height=100%;flex=1]"
                },
                {
                  "children": [
                    {
                      "type": "Text?class=pointer;text=Seats;style:[color=#888;fontSize=1.2rem;transition=.3s];hover.style.color=#444",
                      "controls": [
                        {
                          "event": "click?loader.show;timer():[bookings:()=sort():[data=bookings:();path=total-seats;descending];update():bookings-list-data;loader.hide]:50"
                        }
                      ]
                    }
                  ],
                  "type": "View?class=flex align-center;style:[height=100%;flex=1]"
                },
                {
                  "type": "View?class=flex align-center;style:[height=100%;flex=1;justifyContent=flex-end]",
                  "children": [
                    {
                      "type": "Text?class=pointer;text=Payable;style:[color=#888;fontSize=1.2rem;transition=.3s;textAlign=right];hover.style.color=#444",
                      "controls": [
                        {
                          "event": "click?loader.show;timer():[bookings:()=sort():[data=bookings:();path=total-payable-usd;descending];update():bookings-list-data;loader.hide]:50"
                        }
                      ]
                    }
                  ]
                },
                {
                  "controls": [
                    {
                      "event": "loaded?if():[data().pnr=E6VUEL]:[loader.show;data().flights=data().booking-details.():[flight-id];save():[collection=flight-booking;data=data()]:[loader.hide]]?user:().username=Mohamad Obeid;false"
                    },
                    {
                      "event": "loaded?my-bookings=bookings:().clone().filter():[user-name=Test Test];().my-bookings._():[erase():[collection=flight-booking;data=_.id];_.reservations._():[erase():[collection=flight-reservation;data=_]]]?false"
                    }
                  ],
                  "type": "View?style:[minWidth=12rem]"
                }
              ]
            },
            {
              "type": "View:bookings-list-data?Data=bookings;class=vertical;style:[width=100%]",
              "children": [
                {
                  "children": [
                    {
                      "type": "View?class=grid align-center flight;style:[cursor=default;gridTemplateColumns=3rem 8rem 10rem 32rem 30rem 15rem 15rem 8rem 6rem 8rem 1fr;height=4rem;transition=.2s;width=100%;if():[data().status=Booked]:[backgroundColor=#fcfc74].elif():[data().status=Canceled]:[backgroundColor=#f27979]];mouseenter:[if():[hidden]:[style().height=4rem]:[if():[hidden]:[style().height=4rem;if():[data().status=Canceled]:[style().backgroundColor=#d84e4e].elif():[data().status=Booked]:[style().backgroundColor=#fcfc4c]:[style().backgroundColor=#74d8fc]]:[if():[data().status=Canceled]:[style().backgroundColor=#d84e4e].elif():[data().status=Booked]:[style().backgroundColor=#fcfc4c]:[style().backgroundColor=#f6f6f6]]];mouseleave:[if():[hidden]:[style().height=2px;if():[data().status=Booked]:[style().backgroundColor=#e0e000].elif():[data().status=Canceled]:[style().backgroundColor=#f27979]:[style().backgroundColor=#74d8fc]]:[if():[data().status=Booked]:[style().backgroundColor=#fcfc74].elif():[data().status=Canceled]:[style().backgroundColor=#f27979]:[style().backgroundColor=#fff]]];if():[!user:().permissions.readonly]:[mouseenter:[lastChild().style().opacity=1];mouseleave:[lastChild().style().opacity=0]]",
                      "children": [
                        {
                          "type": "View?class=flexbox align-center;style:[height=100%;flex=1;position=relative];mouseenter:[2ndChild().style().opacity=1;3rdChild().style().opacity=1];mouseleave:[2ndChild().style().opacity=0;3rdChild().style().opacity=0]",
                          "children": [
                            {
                              "type": "Text?class=flexbox;style:[fontSize=1.2rem];text=parent().parent().parent().mapIndex+1"
                            },
                            {
                              "type": "Icon?class=flexbox pointer;style:[fontSize=1.2rem];name=bi-eye-slash;style:[fontSize=2rem;opacity=0;position=absolute;backgroundColor=inherit;transition=.2s];click:[style().display=none;next().style().display=flex;2ndParent().hidden=true;2ndParent().style():[height=2px;if():[data().status=Canceled]:[backgroundColor=#d84e4e].elif():[data().status=Booked]:[backgroundColor=#e0e000]:[backgroundColor=#42c2f5];overflow=hidden]]"
                            },
                            {
                              "type": "Icon?class=flexbox pointer;style:[fontSize=1.2rem];name=bi-eye;style:[fontSize=2rem;display=none;opacity=0;position=absolute;backgroundColor=inherit;transition=.2];click:[style().display=none;prev().style().display=flex;2ndParent().hidden=false;2ndParent().style():[height=4rem;if():[data().status=Canceled]:[backgroundColor=#d84e4e].elif():[data().status=Booked]:[backgroundColor=#e0e000]:[backgroundColor=#f6f6f6];overflow=visible]]"
                            }
                          ]
                        },
                        {
                          "type": "View?class=flex align-center;style:[height=100%;flex=1]",
                          "children": [
                            {
                              "controls": [
                                {
                                  "event": "click?loader.show;search():[collection=flight-reservation;field.pnr.equal=data().pnr;limit=250]:[tickets:()=search:().data.values();unreset-tickets:()=true;():[flight-ticket-sidebar-btn].click();loader.hide]?data().status!=Booked"
                                }
                              ],
                              "type": "Text?class=flex pointer;text=data().pnr;style:[fontSize=1.2rem;padding=.5rem;borderRadius=.5rem];hover.style:[color=blue;backgroundColor=#ddd]"
                            }
                          ]
                        },
                        {
                          "type": "View?class=flex align-center;style:[height=100%;width=10rem]",
                          "children": [
                            {
                              "type": "Text?class=flex dots;text=data().booking-date.toDateFormat();tooltip.text=data().booking-date.toDateFormat():time;style:[fontSize=1.2rem]"
                            }
                          ]
                        },
                        {
                          "type": "View?view=reservation-flight-list"
                        },
                        {
                          "children": [
                            {
                              "type": "Text?class=flex dots;style:[fontSize=1.2rem];droplist.items=data().clone().booking-details.0.seats.():[passengers-details.pullItems():[!first-name;!last-name].():[age.uppercase()+' '+title.uppercase()+' '+[first-name||_string].uppercase()+' '+[last-name||_string].uppercase()]].flat();droplist.item.style:[fontSize=1.2rem;minHeight=3rem;height=3rem];text=[().droplist.items.0||];tooltip.text='txt()';droplist.preventDefault"
                            }
                          ],
                          "type": "View?class=flex align-center;style:[width=30rem;position=relative;height=100%]"
                        },
                        {
                          "children": [
                            {
                              "type": "Text?class=dots;text=data().user-name;tooltip.text=data().user-name;style:[fontSize=1.2rem]"
                            }
                          ],
                          "type": "View?class=flex align-center;style:[height=100%;width=15rem]"
                        },
                        {
                          "type": "View?class=flex align-center;style:[height=100%;width=15rem]",
                          "children": [
                            {
                              "type": "Text?class=dots;text=data().agent-name;tooltip.text=data().agent-name;style:[fontSize=1.2rem]"
                            }
                          ]
                        },
                        {
                          "type": "View?class=flex align-center;style:[height=100%;flex=1]",
                          "children": [
                            {
                              "type": "Text?class=flex align-center;text=data().status;style:[fontSize=1.2rem]"
                            }
                          ]
                        },
                        {
                          "children": [
                            {
                              "controls": [
                                {
                                  "event": "click?loader.show;search():[collection=flight-reservation;field.pnr.equal=data().pnr;limit=250]:[tickets:()=search:().data.values();unreset-tickets:()=true;():[flight-ticket-sidebar-btn].click();loader.hide]?data().status!=Booked"
                                }
                              ],
                              "type": "Text?class=flexbox pointer;style:[fontSize=1.2rem;padding=.5rem;borderRadius=.5rem;transition=.2s];text=data().clone().booking-details.0.seats.():[passengers-details].flat().len()+ +if():[data().clone().booking-details.0.seats.():[passengers-details.():infants.flat()].flat().filter().len()>0]:['+'+data().clone().booking-details.0.seats.():[passengers-details.():infants.flat()].flat().filter().len()+' infant/s']:'';if():[data().status=Canceled]:[text=0];hover.style:[color=blue;backgroundColor=#ddd]"
                            }
                          ],
                          "type": "View?class=flex align-center;style:[flex=1;height=100%]"
                        },
                        {
                          "controls": [
                            {
                              "event": "click?if():[():booking-pricing-details.style().pointerEvents=none]:[booking-data:()=data().clone();():booking-pricing-details.style():[pointerEvents=auto;opacity=1];position():[id=booking-pricing-details;placement=bottom];update():booking-pricing-details]:[():booking-pricing-details.style():[pointerEvents=none;opacity=0]]?false"
                            }
                          ],
                          "type": "View?class=flex align-center pointer;style:[height=100%;flex=1;justifyContent=flex-end]",
                          "children": [
                            {
                              "controls": [
                                {
                                  "event": "loaded?if():[data().pnr=YF7KUW]:[loader.show;data().flights=data().booking-details.():[flight-id];save():[collection=flight-booking;data=data()]:[loader.hide]]?user:().username=Mohamad Obeid"
                                },
                                {
                                  "event": "loaded?if():[!data().total-payable-usd;!data().total-taxes-usd;!data().total-fees-usd;!data().total-base-fare-usd]:[loader.show;data()._():[_.total-payable-usd=_.payable-usd;_.total-usd=_.payable-usd;_.total-taxes-usd=_.taxes-usd;_.total-fees-usd=_.fees-usd;_.total-base-fare-usd=_.base-fare-usd];save():[collection=flight-booking;data=data()]:[update():bookings-list;loader.hide]]?false"
                                },
                                {
                                  "event": "loaded?if():[data().user-name=test]:[loader.show;erase():[collection=flight-booking;doc=data().id]:[bookings:().pullItem():data();loader.hide]]?false"
                                }
                              ],
                              "type": "Text?class=flexbox payable-usd;text=[[data().total-payable-usd||0]-[data().total-canceled-payable-usd||0]].round():2+$;style:[fontSize=1.2rem;textAlign=right];hover.style.color=blue"
                            }
                          ]
                        },
                        {
                          "children": [
                            {
                              "type": "Icon?popup;class=flexbox pointer;name=airplane_ticket;google.outlined;tooltip.text=Issue Booking;style:[borderRadius=1.5rem;width=3rem;fontSize=2.5rem;opacity=0.7;transition=.3s];hover.style.opacity=1?data().status=Booked;!data().booking-details.find():[seats.find():[passengers-details.find():[!last-name||!first-name||if():[infants.len()>0]:[infants.find():[!last-name||!first-name]]:false]]]",
                              "controls": [
                                {
                                  "event": "click:popup?booking-edit:()=true;booking-data:()=data().clone();loader.show;search():[collection=agent;doc=booking-data:().agent]:[my-agent:()=search:().data;booking-data:().():[history=[booking-data:().history||_list].list();history.push():[_map:user:[user:().id]:user-name:[user:().username]:agent:[agent:().id]:agent-name:[agent:().company-name]:description:['Booking has been issued.']:status:Confirmed:date:[today().timestamp()]];issuing-day=todayStart();issuing-month=monthStart();issuing-year=yearStart();issued-by=user:().id;issued-by-name=user:().username;issued-by-agent=agent:().id;issued-by-agent-name=agent:().company-name;status=Issued;issue-date=today().timestamp();start-balance-usd=my-agent:().balance-usd;end-balance-usd=[my-agent:().balance-usd]-[booking-data:().total-payable-usd];my-agent:().buyings-usd=my-agent:().buyings-usd+booking-data:().total-payable-usd;if():[my-agent:().today=todayStart().timestamp()]:[my-agent:().today-buyings-usd=[my-agent:().today-buyings-usd||0]+booking-data:().total-payable-usd;my-agent:().today-bookings=[my-agent:().today-bookings||0]+1]:[my-agent:().today=todayStart().timestamp();my-agent:().today-buyings-usd=booking-data:().total-payable-usd;my-agent:().today-bookings=1]];search():[collection=collection;doc=counter]:[collections:().counter=search:().data;search():[collection=flight-invoice;field.flight-id.in=booking-data:().booking-details.():flight-id]:[my-flight-invoices:()=search:().data.values();().reservations-details=booking-data:().clone().booking-details._():[_.seats._():[_.passengers-details.():[id=[gen():20];pnr=booking-data:().pnr;booking=booking-data:().id;status=Issued;type=booking-data:().type;flight-number=__.flight-number;flight-id=__.flight-id;departure-airport=__.departure-airport;arrival-airport=__.arrival-airport;departure-day=__.departure-day;arrival-day=__.arrival-day;departure-time=__.departure-time;arrival-time=__.arrival-time;aircraft=__.aircraft;airline=__.airline;flight-duration=__.flight-duration;flight-type=__.flight-type;stops=__.stops;booking-policy=_.booking-policy;change-policy=_.change-policy;cancelation-policy=_.cancelation-policy;class=_.class;head-class=_.head-class;baggage-kg=_.baggage-kg;meal-included=_.meal-included;terms-and-conditions=__.terms-and-conditions;if():[infants.len()>0]:[_.'passengers-details'.push():[infants.clone().():[id=[gen():20];pnr=booking-data:().pnr;status=Issued;type=booking-data:().type;flight-number=__.flight-number;flight-id=__.flight-id;departure-airport=__.departure-airport;arrival-airport=__.arrival-airport;departure-day=__.departure-day;arrival-day=__.arrival-day;departure-time=__.departure-time;arrival-time=__.arrival-time;aircraft=__.aircraft;airline=__.airline;flight-duration=__.flight-duration;flight-type=__.flight-type;stops=__.stops;booking-policy=_.booking-policy;change-policy=_.change-policy;cancelation-policy=_.cancelation-policy;class=_.class;head-class=_.head-class;baggage-kg=_.baggage-kg;meal-included=_.meal-included;terms-and-conditions=__.terms-and-conditions]]]]]].():[seats.():passengers-details.flat()].flat();().my-reservations=_list;().my-counters=_list;().reservations-details._():[if():[!_.counter.in():[().my-counters]]:[().my-counters.push():[_.counter];if():[user:().username!=test]:[collections:().counter.e-ticket=counter():[collections:().counter.e-ticket]];().my-reservations.push():[_map:history:[_list:[_map:user:[user:().id]:user-name:[user:().username]:agent:[agent:().id]:agent-name:[agent:().company-name]:description:['New ticket has been issued.']:status:Confirmed:date:[today().timestamp()]]]:id:[gen():20]:pnr:[booking-data:().pnr]:e-ticket:[collections:().counter.e-ticket.counter]:creation-date:[today().timestamp()]:day:todayStart():month:monthStart():year:yearStart():status:Confirmed:user:[booking-data:().user]:user-name:[booking-data:().user-name]:issued-by:[user:().id]:issued-by-name:[user:().username]:agent:[booking-data:().agent]:agent-name:[booking-data:().agent-name]:issued-by-agent:[booking-data:().agent]:issued-by-agent-name:[booking-data:().agent-name]:type:[booking-data:().type]:flights:[booking-data:().booking-details.():flight-id]:travel-date:[booking-data:().booking-details.0.departure-day]:go-departure-airport:[booking-data:().booking-details.0.departure-airport]:go-departure-time:[booking-data:().booking-details.0.departure-time]:go-arrival-airport:[booking-data:().booking-details.0.arrival-airport]:go-arrival-time:[booking-data:().booking-details.0.arrival-time]:return-date:[booking-data:().booking-details.1.departure-day]:return-departure-airport:[booking-data:().booking-details.1.departure-airport]:return-departure-time:[booking-data:().booking-details.1.departure-time]:return-arrival-airport:[booking-data:().booking-details.1.arrival-airport]:return-arrival-time:[booking-data:().booking-details.1.arrival-time]:booking:[booking-data:().id]:reservation-details:[().reservations-details.filter():[counter=_.counter]]]]];().my-reservations._():[if():[_.reservation-details.0.parent-counter]:[_.parent-e-ticket=().my-reservations.find():[reservation-details.0.counter=_.reservation-details.0.parent-counter].e-ticket;_.parent-reservation=().my-reservations.find():[reservation-details.0.counter=_.reservation-details.0.parent-counter].id];_.total-base-fare-usd=_.reservation-details.():base-fare-usd.sum();_.total-taxes-usd=_.reservation-details.():taxes-usd.sum();_.total-fees-usd=_.reservation-details.():fees-usd.sum();_.total-additional-profit-usd=_.reservation-details.():additional-profit-usd.sum();_.total-commission-usd=_.reservation-details.():commission-usd.sum();_.total-usd=_.reservation-details.():total-usd.sum();_.total-payable-usd=_.reservation-details.():payable-usd.sum()];().my-reservations._():[_.start-balance-usd=my-agent:().balance-usd;_.end-balance-usd=[my-agent:().balance-usd||0]-[_.total-payable-usd];_.reservation-details._():[_.start-balance-usd=my-agent:().balance-usd;my-agent:().balance-usd=[my-agent:().balance-usd||0]-[_.payable-usd];_.end-balance-usd=my-agent:().balance-usd]];booking-data:().booking-details._():[my-flight-invoices:().find():[flight-id=_.flight-id]._():[_.reservations.push():[().my-reservations.():id];_.tickets.push():[().my-reservations.():e-ticket];_.open-bookings=[_.open-bookings||_list];_.open-bookings.pullItem():[data().id];_.total-open-bookings-base-fare-usd=[_.total-open-bookings-base-fare-usd||0]-[__.total-base-fare-usd];_.total-open-bookings-taxes-usd=[_.total-open-bookings-taxes-usd||0]-[__.total-taxes-usd];_.total-open-bookings-fees-usd=[_.total-open-bookings-fees-usd||0]-[__.total-fees-usd];_.total-open-bookings-additional-profit-usd=[_.total-open-bookings-additional-profit-usd||0]-[__.total-additional-profit-usd];_.total-open-bookings-usd=[_.total-open-bookings-usd||0]-[__.total-usd];_.total-open-bookings-commission-usd=[_.total-open-bookings-commission-usd||0]-[__.total-commission-usd];_.total-open-bookings-payable-usd=[_.total-open-bookings-payable-usd||0]-[__.total-payable-usd];_.total-open-bookings-seats=[_.total-open-bookings-seats||0]-[__.total-seats];_.total-open-bookings-passengers=[_.total-open-bookings-passengers||0]-[__.total-passengers];__.seats._():[__.seats.find():[sub-class=_.class]._():[_.total-open-bookings-base-fare-usd=[_.total-open-bookings-base-fare-usd||0]-[__.total-base-fare-usd];_.total-open-bookings-taxes-usd=[_.total-open-bookings-taxes-usd||0]-[__.total-taxes-usd];_.total-open-bookings-fees-usd=[_.total-open-bookings-fees-usd||0]-[__.total-fees-usd];_.total-open-bookings-additional-profit-usd=[_.total-open-bookings-additional-profit-usd||0]-[__.total-additional-profit-usd];_.total-open-bookings-usd=[_.total-open-bookings-usd||0]-[__.total-usd];_.total-open-bookings-commission-usd=[_.total-open-bookings-commission-usd||0]-[__.total-commission-usd];_.total-open-bookings-payable-usd=[_.total-open-bookings-payable-usd||0]-[__.total-payable-usd];_.total-open-bookings-seats=[_.total-open-bookings-seats||0]-[__.total-seats];_.total-open-bookings-passengers=[_.total-open-bookings-passengers||0]-[__.total-passengers]]];_.total-reserved-base-fare-usd=[_.total-reserved-base-fare-usd||0]+[__.total-base-fare-usd];_.total-reserved-taxes-usd=[_.total-reserved-taxes-usd||0]+[__.total-taxes-usd];_.total-reserved-fees-usd=[_.total-reserved-fees-usd||0]+[__.total-fees-usd];_.total-reserved-additional-profit-usd=[_.total-reserved-additional-profit-usd||0]+[__.total-additional-profit-usd];_.total-reserved-usd=[_.total-reserved-usd||0]+[__.total-usd];_.total-reserved-commission-usd=[_.total-reserved-commission-usd||0]+[__.total-commission-usd];_.total-reserved-payable-usd=[_.total-reserved-payable-usd||0]+[__.total-payable-usd];_.total-reserved-seats=[_.total-reserved-seats||0]+[__.total-seats];_.total-reserved-passengers=[_.total-reserved-passengers||0]+[__.total-passengers];__.seats._():[__.seats.find():[sub-class=_.class]._():[_.total-reserved-base-fare-usd=[_.total-reserved-base-fare-usd||0]+[__.total-base-fare-usd];_.total-reserved-taxes-usd=[_.total-reserved-taxes-usd||0]+[__.total-taxes-usd];_.total-reserved-fees-usd=[_.total-reserved-fees-usd||0]+[__.total-fees-usd];_.total-reserved-additional-profit-usd=[_.total-reserved-additional-profit-usd||0]+[__.total-additional-profit-usd];_.total-reserved-usd=[_.total-reserved-usd||0]+[__.total-usd];_.total-reserved-commission-usd=[_.total-reserved-commission-usd||0]+[__.total-commission-usd];_.total-reserved-payable-usd=[_.total-reserved-payable-usd||0]+[__.total-payable-usd];_.total-reserved-seats=[_.total-reserved-seats||0]+__.total-seats;_.total-reserved-passengers=[_.total-reserved-passengers||0]+__.total-passengers]]]];().my-reservations._():[_.reservation-details.():[e-ticket=_.e-ticket;pnr=_.pnr]];booking-data:().reservations=().my-reservations.():id;booking-data:().tickets=().my-reservations.():e-ticket;booking-data:().booking-details.():[seats.():[passengers-details.():[status=Issued];status=Issued];status=Issued];my-agent:().bookings=[my-agent:().bookings||0]+1;save():[collection=agent;data=my-agent:().clone]:[my-agent:().del()];save():[collection=flight-reservation;data=().my-reservations]:[my-reservations:()=_list];save():[collection=collection;doc=counter;data=collections:().counter];save():[collection=flight-invoice;data=my-flight-invoices:()]:[my-flight-invoices:()=_list];save():[collection=flight-booking;data=booking-data:()]:[booking-data:().del()];note():[text=Tickets issued successfully!];bookings:().replaceItem():[booking-data:().clone()];update():[bookings-list];loader.hide]]]?data().accept-terms-and-conditions;!data().booking-details.find():[seats.find():[passengers-details.find():[!last-name||!first-name||if():[infants.len()>0]:[infants.find():[!last-name||!first-name]]:false]]]"
                                },
                                {
                                  "event": "click?note():[text=Kindly fill all required info!;type=danger]?data().accept-terms-and-conditions;data().booking-details.find():[seats.find():[passengers-details.find():[!last-name||!first-name||if():[infants.len()>0]:[infants.find():[!last-name||!first-name]]:false]]]"
                                }
                              ]
                            },
                            {
                              "controls": [
                                {
                                  "event": "click:popup?old-booking:()=data().clone();search-type:()=Group;search-by:()=if():[old-booking:().flights.len()=1]:[One way]:[Round trip];unreset-book-a-seat:()=true;data().booking-details._():[pax-details:().():[adt=_.total-adults;chd=_.total-children;inf=_.total-infants]];search-flight:().0.():[if():[search-by:()=One way]:[from=old-booking:().booking-details.0.departure-airport;to=old-booking:().booking-details.0.arrival-airport;travel-date=old-booking:().booking-details.0.departure-day].elif():[search-by:()=Round trip]:[from=old-booking:().booking-details.0.departure-airport;to=old-booking:().booking-details.0.arrival-airport;travel-date=old-booking:().booking-details.0.departure-day;return-date=old-booking:().booking-details.1.departure-day];pax=pax-details:().adt+pax-details:().chd];():book-a-flight-btn.click()"
                                }
                              ],
                              "children": [
                                {
                                  "type": "Icon?name=flight;google.outlined;style:[fontSize=1.5rem;position=absolute]"
                                },
                                {
                                  "type": "Icon?name=bi-arrow-clockwise;style:[fontSize=3rem;position=absolute]"
                                }
                              ],
                              "type": "View?popup;class=pointer flexbox;tooltip.text=Reissue Booking;style:[position=relative;borderRadius=1.5rem;width=3rem;height=3rem;opacity=0.7;transition=.3s];hover.style.opacity=1?data().status=Issued;agent:().admin"
                            },
                            {
                              "type": "Icon?class=flexbox pointer;popup;tooltip.text=if():[data().status=Booked]:Cancel Booking:Cancel Reservation;name=no_backpack;google.outlined;style:[borderRadius=1.5rem;width=3rem;fontSize=2.25rem;opacity=0.7;transition=.3s];hover.style.opacity=1?data().status!=Canceled;agent:().admin",
                              "controls": [
                                {
                                  "event": "click:popup?loader.show;booking-data:()=data().clone();booking-data:().():[history=[booking-data:().history||_list];history.push():[_map:user:[user:().id]:user-name:[user:().username]:agent:[agent:().id]:agent-name:[agent:().company-name]:description:['Booked/unconfirmed booking has been canceled.']:status:Confirmed:date:[today().timestamp()]];cancelation-day=todayStart();cancelation-month=monthStart();cancelation-year=yearStart();canceled-by=user:().id;canceled-by-name=user:().username;canceled-by-agent=agent:().id;canceled-by-agent-name=agent:().company-name;status=Canceled;cancelation-date=today().timestamp();total-canceled-passengers=booking-data:().total-passengers;total-canceled-seats=booking-data:().total-seats;total-canceled-base-fare-usd=booking-data:().total-base-fare-usd;total-canceled-fees-usd=booking-data:().total-fees-usd;total-canceled-taxes-usd=booking-data:().total-taxes-usd;total-canceled-commission-usd=[booking-data:().total-commission-usd||0];canceled-total-usd=booking-data:().total-usd;total-canceled-payable-usd=booking-data:().total-payable-usd;booking-details._():[_.total-canceled-passengers=_.total-passengers;_.total-canceled-seats=_.total-seats;_.total-canceled-base-fare-usd=_.total-base-fare-usd;_.total-canceled-fees-usd=_.total-fees-usd;_.total-canceled-taxes-usd=_.total-taxes-usd;_.total-canceled-commission-usd=[_.total-commission-usd||0];_.total-canceled-usd=_.total-usd;_.total-canceled-payable-usd=_.total-payable-usd;_.status=Canceled;_.seats._():[_.total-canceled-passengers=_.total-passengers;_.total-canceled-seats=_.total-seats;_.total-canceled-base-fare-usd=_.total-base-fare-usd;_.total-canceled-fees-usd=_.total-fees-usd;_.total-canceled-taxes-usd=_.total-taxes-usd;_.total-canceled-commission-usd=[_.total-commission-usd||0];_.total-canceled-total-usd=_.total-usd;_.total-canceled-payable-usd=_.total-payable-usd;_.status=Canceled;_.passengers-details._():[_.canceled-base-fare-usd=_.base-fare-usd;_.canceled-fees-usd=_.fees-usd;_.canceled-taxes-usd=_.taxes-usd;_.canceled-commission-usd=[_.commission-usd||0];_.canceled-total-usd=_.total-usd;_.canceled-payable-usd=_.payable-usd;_.status=Canceled;if():[_.infants.len()>0]:[_.infants._():[_.canceled-base-fare-usd=_.base-fare-usd;_.canceled-fees-usd=_.fees-usd;_.canceled-taxes-usd=_.taxes-usd;_.canceled-commission-usd=[_.commission-usd||0];_.canceled-total-usd=_.total-usd;_.canceled-payable-usd=_.payable-usd;_.status=Canceled]]]]]];search():[collection=flight;docs=booking-data:().booking-details.():flight-id.clone()]:[my-flights:()=search:().data.values();my-flights:()._():[_.total-av-seats=[_.total-av-seats||0]+booking-data:().booking-details.0.total-seats];booking-data:().booking-details._():[my-flights:().find():[id=_.flight-id].seats.filter():[sub-class.in():[_.seats.():class]]._():[_.av-seats=[_.av-seats||0]+__.seats.find():[class=_.sub-class].total-seats]];search():[collection=flight-invoice;field.flight-id.in=booking-data:().booking-details.():flight-id]:[my-flight-invoices:()=search:().data.values();booking-data:().booking-details._():[my-flight-invoices:().find():[flight-id=_.flight-id]._():[_.open-bookings=[_.open-bookings||_list];_.open-bookings.pullItem():[booking-data:().id];_.canceled-booked-bookings=[_.canceled-booked-bookings||_list];_.canceled-booked-bookings.push():[booking-data:().id];_.total-canceled-booked-base-fare-usd=[_.total-canceled-booked-base-fare-usd||0]+__.total-base-fare-usd;_.total-canceled-booked-taxes-usd=[_.total-canceled-booked-taxes-usd||0]+__.total-taxes-usd;_.total-canceled-booked-fees-usd=[_.total-canceled-booked-fees-usd||0]+__.total-fees-usd;_.total-canceled-booked-additional-profit-usd=[_.total-canceled-booked-additional-profit-usd||0]+__.total-additional-profit-usd;_.total-canceled-booked-usd=[_.total-canceled-booked-usd||0]+__.total-usd;_.total-canceled-booked-commission-usd=[_.total-canceled-booked-commission-usd||0]+__.total-commission-usd;_.total-canceled-booked-payable-usd=[_.total-canceled-booked-payable-usd||0]+__.total-payable-usd;_.total-av-seats=[_.total-av-seats]+__.total-seats;_.total-canceled-booked-seats=[_.total-canceled-booked-seats||0]+__.total-seats;_.total-canceled-booked-passengers=[_.total-canceled-booked-passengers||0]+__.total-passengers;__.seats._():[__.seats.find():[sub-class=_.class]._():[_.total-canceled-booked-base-fare-usd=[_.total-canceled-booked-base-fare-usd||0]+__.total-base-fare-usd;_.total-canceled-booked-taxes-usd=[_.total-canceled-booked-taxes-usd||0]+__.total-taxes-usd;_.total-canceled-booked-fees-usd=[_.total-canceled-booked-fees-usd||0]+__.total-fees-usd;_.total-canceled-booked-additional-profit-usd=[_.total-canceled-booked-additional-profit-usd||0]+__.total-additional-profit-usd;_.total-canceled-booked-usd=[_.total-canceled-booked-usd||0]+__.total-usd;_.total-canceled-booked-commission-usd=[_.total-canceled-booked-commission-usd||0]+__.total-commission-usd;_.total-canceled-booked-payable-usd=[_.total-canceled-booked-payable-usd||0]+__.total-payable-usd;_.total-av-seats=[_.total-av-seats]+__.total-seats;_.total-canceled-booked-seats=[_.total-canceled-booked-seats||0]+__.total-seats;_.total-canceled-booked-passengers=[_.total-canceled-booked-passengers||0]+__.total-passengers]];_.total-open-bookings-base-fare-usd=[_.total-open-bookings-base-fare-usd||0]-[__.total-base-fare-usd];_.total-open-bookings-taxes-usd=[_.total-open-bookings-taxes-usd||0]-[__.total-taxes-usd];_.total-open-bookings-fees-usd=[_.total-open-bookings-fees-usd||0]-[__.total-fees-usd];_.total-open-bookings-additional-profit-usd=[_.total-open-bookings-additional-profit-usd||0]-[__.total-additional-profit-usd];_.total-open-bookings-usd=[_.total-open-bookings-usd||0]-[__.total-usd];_.total-open-bookings-commission-usd=[_.total-open-bookings-commission-usd||0]-[__.total-commission-usd];_.total-open-bookings-payable-usd=[_.total-open-bookings-payable-usd||0]-[__.total-payable-usd];_.total-open-bookings-seats=[_.total-open-bookings-seats||0]-[__.total-seats];_.total-open-bookings-passengers=[_.total-open-bookings-passengers||0]-[__.total-passengers];__.seats._():[__.seats.find():[sub-class=_.class]._():[_.total-open-bookings-base-fare-usd=[_.total-open-bookings-base-fare-usd||0]-[__.total-base-fare-usd];_.total-open-bookings-taxes-usd=[_.total-open-bookings-taxes-usd||0]-[__.total-taxes-usd];_.total-open-bookings-fees-usd=[_.total-open-bookings-fees-usd||0]-[__.total-fees-usd];_.total-open-bookings-additional-profit-usd=[_.total-open-bookings-additional-profit-usd||0]-[__.total-additional-profit-usd];_.total-open-bookings-usd=[_.total-open-bookings-usd||0]-[__.total-usd];_.total-open-bookings-commission-usd=[_.total-open-bookings-commission-usd||0]-[__.total-commission-usd];_.total-open-bookings-payable-usd=[_.total-open-bookings-payable-usd||0]-[__.total-payable-usd];_.total-open-bookings-seats=[_.total-open-bookings-seats||0]-[__.total-seats];_.total-open-bookings-passengers=[_.total-open-bookings-passengers||0]-[__.total-passengers]]]]];save():[collection=flight-invoice;data=my-flight-invoices:()]:[my-flight-invoices:()=_list];save():[collection=flight;data=my-flights:()]:[my-flights:()=_list];save():[collection=flight-booking;data=booking-data:()]:[booking-data:().del()];note():[text=Booking has been Canceled!];bookings:().replaceItem():[booking-data:().clone()];update():[bookings-list];loader.hide]]?data().status=Booked"
                                },
                                {
                                  "event": "click:popup?loader.show;booking-data:()=data().clone();search():[collection=agent;doc=booking-data:().agent]:[my-agent:()=search:().data;if():[booking-data:().end-balance-usd]:[booking-data:()._():[_.canceled-start-balance-usd=my-agent:().balance-usd;_.canceled-end-balance-usd=my-agent:().balance-usd+_.total-payable-usd;my-agent:().buyings-usd=[my-agent:().buyings-usd]-[_.total-payable-usd];if():[my-agent:().today=todayStart().timestamp()]:[my-agent:().today-buyings-usd=[my-agent:().today-buyings-usd||0]-[booking-data:().total-payable-usd];my-agent:().today-bookings=[my-agent:().today-bookings||0]-1]:[my-agent:().today=todayStart().timestamp();my-agent:().today-buyings-usd=0;my-agent:().today-bookings=0]]];booking-data:().():[history=[booking-data:().history||_list].list();history.push():[_map:user:[user:().id]:user-name:[user:().username]:agent:[agent:().id]:agent-name:[agent:().company-name]:description:['Issued/confirmed booking has been canceled.']:status:Confirmed:date:[today().timestamp()]];cancelation-day=todayStart();cancelation-month=monthStart();cancelation-year=yearStart();canceled-by=user:().id;canceled-by-name=user:().username;canceled-by-agent=agent:().id;canceled-by-agent-name=agent:().company-name;status=Canceled;cancelation-date=today().timestamp();total-canceled-passengers=booking-data:().total-passengers;total-canceled-seats=booking-data:().total-seats;total-canceled-base-fare-usd=booking-data:().total-base-fare-usd;total-canceled-fees-usd=booking-data:().total-fees-usd;total-canceled-taxes-usd=booking-data:().total-taxes-usd;total-canceled-commission-usd=[booking-data:().total-commission-usd||0];canceled-total-usd=booking-data:().total-usd;total-canceled-payable-usd=booking-data:().total-payable-usd;booking-details._():[_.canceled-passengers=_.total-passengers;_.canceled-seats=_.total-seats;_.total-canceled-base-fare-usd=_.total-base-fare-usd;_.total-canceled-fees-usd=_.total-fees-usd;_.total-canceled-taxes-usd=_.total-taxes-usd;_.total-canceled-commission-usd=[_.total-commission-usd||0];_.canceled-total-usd=_.total-usd;_.total-canceled-payable-usd=_.total-payable-usd;_.status=Canceled;_.seats._():[_.canceled-passengers=_.total-passengers;_.canceled-seats=_.total-seats;_.total-canceled-base-fare-usd=_.total-base-fare-usd;_.total-canceled-fees-usd=_.total-fees-usd;_.total-canceled-taxes-usd=_.total-taxes-usd;_.total-canceled-commission-usd=[_.total-commission-usd||0];_.total-canceled-total-usd=_.total-usd;_.total-canceled-payable-usd=_.total-payable-usd;_.status=Canceled;_.passengers-details._():[_.canceled-base-fare-usd=_.base-fare-usd;_.canceled-fees-usd=_.fees-usd;_.canceled-taxes-usd=_.taxes-usd;_.canceled-commission-usd=[_.commission-usd||0];_.canceled-total-usd=_.total-usd;_.canceled-payable-usd=_.payable-usd;_.status=Canceled;if():[_.infants.len()>0]:[_.infants._():[_.canceled-base-fare-usd=_.base-fare-usd;_.canceled-fees-usd=_.fees-usd;_.canceled-taxes-usd=_.taxes-usd;_.canceled-commission-usd=[_.commission-usd||0];_.canceled-total-usd=_.total-usd;_.canceled-payable-usd=_.payable-usd;_.status=Canceled]]]]]];search():[collection=flight;docs=booking-data:().booking-details.():flight-id.clone()]:[my-flights:()=().search.data.values();my-flights:()._():[_.total-av-seats=[_.total-av-seats||0]+booking-data:().booking-details.0.total-seats];booking-data:().booking-details._():[my-flights:().find():[id=_.flight-id].seats.filter():[sub-class.in():[_.seats.():class]]._():[_.av-seats=[_.av-seats||0]+__.seats.find():[class=_.sub-class].total-seats]];search():[collection=flight-invoice;field.flight-id.in=booking-data:().booking-details.():flight-id]:[my-flight-invoices:()=search:().data.values();booking-data:().booking-details._():[my-flight-invoices:().find():[flight-id=_.flight-id]._():[_.canceled-bookings=[_.canceled-bookings||_list];_.canceled-bookings.push():[booking-data:().id];_.canceled-reserved-bookings=[_.canceled-reserved-bookings||_list];_.canceled-reserved-bookings.push():[booking-data:().id];_.total-av-seats=[_.total-av-seats]+__.total-seats;_.total-canceled-reserved-base-fare-usd=[_.total-canceled-reserved-base-fare-usd||0]+__.total-base-fare-usd;_.total-canceled-reserved-taxes-usd=[_.total-canceled-reserved-taxes-usd||0]+__.total-taxes-usd;_.total-canceled-reserved-fees-usd=[_.total-canceled-reserved-fees-usd||0]+__.total-fees-usd;_.total-canceled-reserved-additional-profit-usd=[_.total-canceled-reserved-additional-profit-usd||0]+__.total-additional-profit-usd;_.total-canceled-reserved-usd=[_.total-canceled-reserved-usd||0]+__.total-usd;_.total-canceled-reserved-commission-usd=[_.total-canceled-reserved-commission-usd||0]+__.total-commission-usd;_.total-canceled-reserved-payable-usd=[_.total-canceled-reserved-payable-usd||0]+__.total-payable-usd;_.total-canceled-reserved-seats=[_.total-canceled-reserved-seats||0]+__.total-seats;_.total-canceled-reserved-passengers=[_.total-canceled-reserved-passengers||0]+__.total-passengers;__.seats._():[__.seats.find():[sub-class=_.class]._():[_.total-canceled-reserved-base-fare-usd=[_.total-canceled-reserved-base-fare-usd||0]+__.total-base-fare-usd;_.total-canceled-reserved-taxes-usd=[_.total-canceled-reserved-taxes-usd||0]+__.total-taxes-usd;_.total-canceled-reserved-fees-usd=[_.total-canceled-reserved-fees-usd||0]+__.total-fees-usd;_.total-canceled-reserved-additional-profit-usd=[_.total-canceled-reserved-additional-profit-usd||0]+__.total-additional-profit-usd;_.total-canceled-reserved-usd=[_.total-canceled-reserved-usd||0]+__.total-usd;_.total-canceled-reserved-commission-usd=[_.total-canceled-reserved-commission-usd||0]+__.total-commission-usd;_.total-canceled-reserved-payable-usd=[_.total-canceled-reserved-payable-usd||0]+__.total-payable-usd;_.total-av-seats=[_.total-av-seats]+__.total-seats;_.total-canceled-reserved-seats=[_.total-canceled-reserved-seats||0]+__.total-seats;_.total-canceled-reserved-passengers=[_.total-canceled-reserved-passengers||0]+__.total-passengers]]]];search():[collection=flight-reservation;docs=booking-data:().reservations]:[my-tickets:()=search:().data.values();if():[booking-data:().end-balance-usd]:[my-tickets:()._():[_.canceled-start-balance-usd=my-agent:().balance-usd;_.canceled-end-balance-usd=[my-agent:().balance-usd]+[_.total-payable-usd];_.reservation-details._():[_.canceled-start-balance-usd=my-agent:().balance-usd;my-agent:().balance-usd=[my-agent:().balance-usd]+[_.payable-usd];_.canceled-end-balance-usd=my-agent:().balance-usd]]];my-tickets:()._():[_.history=[_.history||_list].list();_.history.push():[_map:user:[user:().id]:user-name:[user:().username]:agent:[agent:().id]:agent-name:[agent:().company-name]:description:['Ticket has been canceled.']:status:Confirmed:date:[today().timestamp()]];_.status=Canceled;_.cancelation-day=todayStart();_.cancelation-month=monthStart();_.cancelation-year=yearStart();_.canceled-by=user:().id;_.canceled-by-name=user:().username;_.canceled-by-agent=agent:().id;_.canceled-by-agent-name=agent:().company-name;_.cancelation-date=today().timestamp();_.total-canceled-base-fare-usd=[_.total-canceled-base-fare-usd||0]+_.total-base-fare-usd;_.total-canceled-fees-usd=[_.total-canceled-fees-usd||0]+_.total-fees-usd;_.total-canceled-taxes-usd=[_.total-canceled-taxes-usd||0]+_.total-taxes-usd;_.total-canceled-commission-usd=[_.total-canceled-commission-usd||0]+_.total-commission-usd;_.canceled-total-usd=[_.canceled-total-usd||0]+_.total-usd;_.total-canceled-payable-usd=[_.total-canceled-payable-usd||0]+_.total-payable-usd;_.reservation-details._():[_.status=Canceled;_.cancelation-day=todayStart();_.cancelation-month=monthStart();_.cancelation-year=yearStart();_.canceled-by=user:().id;_.canceled-by-name=user:().username;_.canceled-by-agent=agent:().id;_.canceled-by-agent-name=agent:().company-name;_.cancelation-date=today().timestamp();_.canceled-base-fare-usd=[_.canceled-base-fare-usd||0]+_.base-fare-usd;_.canceled-fees-usd=[_.canceled-fees-usd||0]+_.fees-usd;_.canceled-taxes-usd=[_.canceled-taxes-usd||0]+_.taxes-usd;_.canceled-commission-usd=[_.canceled-commission-usd||0]+_.commission-usd;_.canceled-total-usd=[_.canceled-total-usd||0]+_.total-usd;_.canceled-payable-usd=[_.canceled-payable-usd||0]+_.payable-usd]];if():[booking-data:().end-balance-usd]:[my-agent:().bookings=[my-agent:().bookings||0]-1;save():[collection=agent;data=my-agent:().clone()]:[my-agent:().del()]];save():[collection=flight-reservation;data=my-tickets:()]:[my-tickets:()=_list];save():[collection=flight-invoice;data=my-flight-invoices:()]:[my-flight-invoices:()=_list];save():[collection=flight;data=my-flights:()]:[my-flights:()=_list];save():[collection=flight-booking;data=booking-data:()]:[booking-data:().del()];note():[text=Booking has been Canceled!];bookings:().replaceItem():[booking-data:().clone()];update():[bookings-list];loader.hide]]]]?data().status=Issued"
                                }
                              ]
                            },
                            {
                              "type": "Icon?class=flexbox actions pointer;name=bi-three-dots-vertical;style:[fontSize=2.2rem;color=#888;transition=.1s;height=3rem;width=3rem;borderRadius=3rem];hover.style.color=blue",
                              "controls": [
                                {
                                  "event": "click?if():[style():action-list.pointerEvents=none||booking-data:()!=data()]:[style():[pointerEvents=auto;opacity=1;transform=scale(1);id=action-list]]:[style():[id=action-list;pointerEvents=none;opacity=0;transform=scale(.5)]];booking-data:()=data().clone();action-lister:()=bookings;update():'action-list';position():[id=action-list;positioner=().id;placement=left;align=center]"
                                }
                              ]
                            }
                          ],
                          "type": "View?class=flex align-center;style:[flex=1;minWidth=12rem;gap=.5rem;justifyContent=flex-end;transition=.2s;opacity=0]?!user:().permissions.readonly"
                        }
                      ]
                    }
                  ],
                  "type": "[View]?style:[width=100%;transition=height .1s, backgroud-color .1s]?data().len()>0"
                }
              ]
            },
            {
              "type": "View?class=vertical;style:[width=100%]",
              "children": [
                {
                  "children": [
                    {
                      "children": [
                        {
                          "type": "View?class=flex align-center;style:[height=100%;flex=1]",
                          "children": [
                            {
                              "type": "Text?class=flexbox;style:[fontSize=1.2rem];text="
                            }
                          ]
                        },
                        {
                          "children": [
                            {
                              "type": "Text?class=flex;text=;style:[fontSize=1.2rem];hover.style:[color=blue;backgroundColor=#ddd]"
                            }
                          ],
                          "type": "View?class=flex align-center;style:[height=100%;flex=1]"
                        },
                        {
                          "children": [
                            {
                              "type": "Text?class=flex dots;text=;style:[fontSize=1.2rem]"
                            }
                          ],
                          "type": "View?class=flex align-center;style:[height=100%;flex=1]"
                        },
                        {
                          "type": "View?style:[flex=1]"
                        },
                        {
                          "children": [
                            {
                              "type": "Text?class=flex dots;style:[fontSize=1.2rem];text="
                            }
                          ],
                          "type": "View?class=flex align-center;style:[flex=1;position=relative;height=100%]"
                        },
                        {
                          "type": "View?class=flex align-center;style:[height=100%;flex=1]",
                          "children": [
                            {
                              "type": "Text?class=dots;text=;style:[fontSize=1.2rem]"
                            }
                          ]
                        },
                        {
                          "children": [
                            {
                              "type": "Text?class=dots;text=;style:[fontSize=1.2rem;flex=1]"
                            }
                          ],
                          "type": "View?class=flex align-center;style:[height=100%;flex=1]"
                        },
                        {
                          "children": [
                            {
                              "type": "Text?class=flex align-center;text=Total;style:[fontSize=1.3rem]"
                            }
                          ],
                          "type": "View?class=flex align-center;style:[height=100%;flex=1]"
                        },
                        {
                          "children": [
                            {
                              "type": "Text?class=flexbox pointer;style:[fontSize=1.3rem;padding=.5rem;borderRadius=.5rem;transition=.2s];text=bookings:().clone().pullItems():[status=Canceled].():[total-seats].sum()+ +if():[bookings:().clone().pullItems():[status=Canceled].find():[booking-details.0.total-infants>0]]:['+'+bookings:().clone().pullItems():[status=Canceled].filter():[booking-details.0.total-infants>0].():[booking-details.0.total-infants].filter().sum()+' infant/s']:'';hover.style:[color=blue;backgroundColor=#ddd]",
                              "controls": [
                                {
                                  "event": "click?loader.show;search():[collection=flight-reservation;limit=500;field:[pnr.in=bookings:().():pnr;status.equal=Confirmed]]:[tickets:()=search:().data.values();unreset-tickets:()=true;():[flight-ticket-sidebar-btn].click();loader.hide]"
                                }
                              ]
                            }
                          ],
                          "type": "View?class=flex align-center;style:[flex=1;position=relative;height=100%]"
                        },
                        {
                          "type": "View?class=flex align-center pointer;style:[height=100%;flex=1;justifyContent=flex-end]",
                          "children": [
                            {
                              "type": "Text?class=flexbox payable-usd;text=[[bookings:().clone().():[total-payable-usd].filter().sum()||0]-[bookings:().clone().():[total-canceled-payable-usd].filter().sum()||0]].round():2+$;style:[fontSize=1.3rem;textAlign=right];hover.style.color=blue"
                            }
                          ]
                        },
                        {
                          "type": "View?class=flex align-center;style:[flex=1;minWidth=12rem]"
                        }
                      ],
                      "type": "View?class=grid align-center flight;style:[cursor=default;gridTemplateColumns=3rem 8rem 10rem 32rem 30rem 15rem 15rem 8rem 6rem 8rem 1fr;height=4rem;width=100%;borderTop=1px solid #ddd]"
                    }
                  ],
                  "type": "View?style:[width=100%]?data().len()>0"
                }
              ]
            }
          ]
        }
      ]
    }
  ]
}