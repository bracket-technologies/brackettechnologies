{
  "children": [
    {
      "type": "Icon?name=thumb_uo;google.filled;style:[opacity=0;pointerEvents=none];#load on page loaded"
    },
    {
      "children": [
        {
          "type": "Icon?name=menu;google.outlined;style:[fontSize=2.4rem;color=#fff;margin=auto 0]"
        },
        {
          "type": "Text?class=flexbox;text=Kstore;style:[fontSize=2.4rem;color=#fff;fontWeight=bold;position=absolute;width=16rem;left=calc(50vw - 8rem)]"
        },
        {
          "type": "View:user-name?class=flexbox;style:[gap=1rem]",
          "children": [
            {
              "type": "Icon?name=person;google.outlined;style:[fontSize=2rem;color=#fff]?!user:()"
            },
            {
              "controls": [
                {
                  "event": "click:droplist?eraseCookie():_id;route():login?droplist-txt:()=Logout"
                }
              ],
              "type": "Text?text=Hi,+user:().first-name;style:[fontSize=1.4rem;color=#fff];droplist:[items=_list:Profile:Logout;item.style:[fontSize=1.4rem;minHeight=3.5rem]]?user:()"
            }
          ]
        }
      ],
      "type": "View?class=flexbox;style:[width=100%;height=4rem;padding=0 1rem;backgroundColor=red;position=sticky;top=0;justifyContent=space-between]"
    },
    {
      "type": "View?class=flexbox;style:[padding=1rem 0]",
      "children": [
        {
          "type": "Input?placeholder=share your product with Kstore;style:[width=100%;height=4rem;borderRadius=0;backgroundColor=#fff;paddig=0 1rem]",
          "controls": [
            {
              "event": "focus?update():new-post;():new-post.style():[pointerEvents=auto;opacity=1]"
            }
          ]
        }
      ]
    },
    {
      "children": [
        {
          "children": [
            {
              "children": [
                {
                  "children": [
                    {
                      "type": "Text?text=data().created-by;style:[fontSize=1.2rem;color=blue]"
                    },
                    {
                      "type": "Text?text=data().creation-date.toDateFormat();style:[fontSize=1.2rem;color=blue]"
                    }
                  ],
                  "type": "View?class=flexbox;style:[width=100%;justifyContent=space-between]"
                },
                {
                  "children": [
                    {
                      "children": [
                        {
                          "type": "Image?src=data();style:[width=100%]"
                        }
                      ],
                      "type": "[View]?class=flexbox;path=images;style:[maxHeight=if():[parent().data().images.len()>1]:15rem:50rem;width=100%;overflow=hidden]",
                      "controls": [
                        {
                          "event": "click?():image-viewer.style():[opacity=1;pointerEvents=1];enlarge-image:()=data();update():image-viewer"
                        }
                      ]
                    }
                  ],
                  "type": "View?class=flexbox;style:[if():[data().images.len()>1]:[display:grid];if():[data().images.len()>2]:[gridTemplateColumns=1fr 1fr];width=100%;gap=.5rem;borderRadius=1rem;overflow=hidden]"
                },
                {
                  "type": "View?class=flex vertical;style:[width=100%;gap=1rem]",
                  "children": [
                    {
                      "type": "Text?text=data().title;class=flexbox;style:[fontSize=1.4rem;color=red;height=3rem]"
                    },
                    {
                      "type": "Text?text=data().text;style:[fontSize=1rem;width=100%]"
                    },
                    {
                      "type": "View?class=flexbox;style:[width=100%;justifyContent=flex-end;borderTop=1px solid #ddd;padding=.5rem]",
                      "children": [
                        {
                          "type": "Text?text=[data().comments.len()]+ comments;style:[fontSize=1.3rem;color=#888;width=8rem]",
                          "controls": [
                            {
                              "event": "click?if():[parent().next().style().display=none]:[parent().next().style().display=flex]:[parent().next().display=none]"
                            }
                          ]
                        },
                        {
                          "type": "Text?text=[data().likes.len()] +likes;style:[fontSize=1.3rem;color=#888;width=5rem;textAlign=right]"
                        }
                      ]
                    },
                    {
                      "children": [
                        {
                          "type": "[comment]?class=vertical;path=comments?data().comments.len()>0"
                        }
                      ],
                      "type": "View?class=vertical;style:[width=100%;diplay=none;gap=1rem]"
                    },
                    {
                      "children": [
                        {
                          "type": "View?class=horizontal;style:[gap=.5rem;height=3rem;padding=.5rem]",
                          "controls": [
                            {
                              "event": "click?if():[data().likes.inc():[user:().id]]:[data().likes.pullItem():[user:().id];2ndChild().style():[display=flex;transform=scale(1.2)];timer():[2ndChild().style().transform=scale(1)]:200;1stChild().style().display=none]:[data().likes.push():[user:().id];1stChild().style():[display=flex;transform=scale(1.2)];timer():[1stChild().style().transform=scale(1)]:200;2ndChild().style().display=none];save():[collection=post;data=Data()];parent().2ndPrev().update()"
                            }
                          ],
                          "children": [
                            {
                              "type": "Icon?name=thumb_up;google.filled;style:[fontSize=1.8rem;color=blue;marginBottom=.5rem;display=if():[data().likes.inc():[user:().id]]:flex:none;transition=.2s]"
                            },
                            {
                              "type": "Icon?name=thumb_up;google.outlined;style:[fontSize=1.8em;marginBottom=.5rem;display=if():[data().likes.inc():[user:().id]]:none:flex;transition=.2s]"
                            },
                            {
                              "type": "Text?text=Like;style:[fontSize=1.3rem]"
                            }
                          ]
                        },
                        {
                          "controls": [
                            {
                              "event": "click?if():[parent().next().style().display=none]:[parent().next().():[style().display=flex;input().focus()]]:[parent().next().style().display=none]"
                            }
                          ],
                          "children": [
                            {
                              "type": "Icon?name=mode_comment;google.outlined;style:[fontSize=1.8rem]"
                            },
                            {
                              "type": "Text?text=Comment;style:[fontSize=1.3rem]"
                            }
                          ],
                          "type": "View?class=horizontal;style:[gap=.5rem;height=3rem;padding=.5rem]"
                        },
                        {
                          "controls": [
                            {
                              "event": "click?false"
                            }
                          ],
                          "children": [
                            {
                              "type": "Icon?name=share;google.outlined;style:[fontSize=1.8rem]"
                            },
                            {
                              "type": "Text?text=share;style:[fontSize=1.3rem]"
                            }
                          ],
                          "type": "View?class=horizontal;style:[gap=.5rem;height=3rem;padding=.5rem]"
                        }
                      ],
                      "type": "View?class=flexbox;style:[justifyContent=space-between;paddingTop=.5rem]"
                    },
                    {
                      "type": "View?class=horizontal;style:[width=100%;height=fit-content;minHeight=3.5rem;borderTop=;1px solid #ddd; display=none]",
                      "children": [
                        {
                          "controls": [
                            {
                              "event": "keypress?next().click()?e().key()=Enter"
                            }
                          ],
                          "type": "Input?Data;textarea;style:[width=100%;height=fit-content;minHeight=3.5rem]"
                        },
                        {
                          "type": "View?class=flexbox;style:[height=3rem;width=3rem]",
                          "controls": [
                            {
                              "event": "click?if():[prev().txt()]:[Data().comments.push():[_map:creation-date:[today().timestamp()]:user:[user:().id]:user-name:[user:().first-name+ +user:().last-name]:comment:[prev().txt()]];save():[collection=post;data=Data()];note():[text=comment added successfully!];2ndParent().update()]:[note():[text=can't leave empty comments!;type=warning]]"
                            }
                          ],
                          "children": [
                            {
                              "type": "Icon?name=send;google.outlined;style:[fontSize=1.6rem]"
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ],
              "type": "View?class=flex vertical;data=data();Data;style:[width=100%;gap=1rem;backgroundColor=#fff;padding=1rem]"
            }
          ],
          "type": "[View]?class=flex;style:[width=100%]?posts:().len()>0"
        }
      ],
      "type": "View:cards?class=grid;data=posts:();style:[width=100%;gap=1rem;backgroundColor=#fff]"
    },
    {
      "children": [
        {
          "type": "View?new-post:()=_map:id:[gen():20]:creation-date:[today().timestamp()]:created-by:[user:().first-name+ +user:().last-name]:user:[user:().id]:images:_list:likes:_list:comments:_list;class=horizontal",
          "children": [
            {
              "type": "Text?class=flexbox;text=New Post;style:[fontSize=1.8rem;fontWeight=bolder;borderLeft=3px solid blue;padding=.5rem 1rem]"
            }
          ]
        },
        {
          "children": [
            {
              "type": "Text?text=Upload Image;style:[fontSize=1.4rem]"
            },
            {
              "children": [
                {
                  "type": "Icon?class=flexbox ponter;name=bi-download;style:[color=#666;fontSize=1.4rem;transition=.3s;zIndex=0]"
                },
                {
                  "type": "Input?class= pointer;input.type=file;style:[height;width=20rem;borderRadius=.5rem;opacity=0;position=absolute;top=0;left=0;bottom=0;zIndex=1]",
                  "controls": [
                    {
                      "event": "change?fileReader():[files:().0]:[parent().parent().next().():[style().display=flex;src()=result:()];#log():here;#log():hello:[result:()]]"
                    }
                  ]
                }
              ],
              "type": "View?class=flexbox pointer;style:[borderRadius=.5rem;border=2px solid blue;overflow=hidden;position=relative;height=3rem;width=3.25rem;backgroundColor=#fff]"
            }
          ],
          "type": "View?class=flexbox pointer;style:[marginLeft=auto;gap=1rem]"
        },
        {
          "children": [
            {
              "type": "Image?style:[minHeight=15rem;maxWidth=100%]"
            }
          ],
          "type": "View?class=flexbox;style:[display=none;borderRadius=.5rem;overFlow=hidden]"
        },
        {
          "type": "Input?path=title;label:[text=Title;fontSize=1.2rem];style:[width100%;height=4rem;border=2px solid blue;borderRadius=.5rem;fontSize=1.2rem]"
        },
        {
          "type": "Input?path=text;textarea;label:[text=Description;fontSize=1.2rem];style:[width=100%;height=8rem;border=2px solid blue;borderRadius=.5rem ;fontSize=1.2rem]"
        },
        {
          "children": [
            {
              "children": [
                {
                  "type": "Text?text=Post;style:[fontSize=1.4rem;color=#fff]"
                }
              ],
              "controls": [
                {
                  "event": "click?loader.show;upload():[file=files:().0]:[data().images.push():[().upload.data.url];save():[collection=post;data=data()];posts:().push():data();update():cards;():new-post.style():[opacity=0;pointerEvents=none];note():[text=Post is Created Successfully!;type=info];loader.hide]?files:().0;data().title;data().text"
                },
                {
                  "event": "click?note():[text=Kindly fill all required info!;type=danger]?!data().title||!data().text||!files:().0"
                }
              ],
              "type": "View?class=flexbox;style:[width=100%;height=3.5rem;opacity=1;borderRadius=1.5rem;backgroundColor=blue]"
            },
            {
              "type": "View?class=flexbox;style:[width=100%;height=3.5rem;opacity=1;borderRadius=1.5rem;backgroundColor=#888]",
              "children": [
                {
                  "type": "Text?text=Cancel;style:[fontSize=1.4rem;color=#fff];click:[():new-post.style():[opacity=0;pointerEvents=none]]"
                }
              ]
            }
          ],
          "type": "View?class=grid;style:[marginTop=auto;gridTemplateColumns=1fr 1fr;gap=5rem]"
        }
      ],
      "type": "View:new-post?class=vertical;Data=new-post;style:[top=0;left=0;right=0;height=100vh;backgroundColor=#fff;position=fixed;zIndex=1;opacity=0;pointerEvents=none;transition=.2s;overflowY=auto;padding=2rem;gap=1rem]"
    },
    {
      "type": "View:image-viewer?class=flexbox;style:[left=0;right=0;bottom=0;top=0;minHeight=100vh;backgroundColor=#444444cc;position=fixed;zIndex=1;opacity=0;pointerEvents=none;]transition=.2s",
      "controls": [
        {
          "event": "click?style():[opacity=0;pointerEvents=none]?!1stChild().contains():[clicked:()]"
        }
      ],
      "children": [
        {
          "type": "Image?src=enlarge-image:();style:[maxHeight=90%;maxWidth=90%]"
        },
        {
          "type": "View?class=flexbox;style:[position=fixed;bottom=1rem;right=1rem;gap=.5rem]",
          "children": [
            {
              "type": "Icon?name=bi-x-lg;style:[color=#fff;fontSize=1.6rem]"
            },
            {
              "type": "Text?text=close;style:[color=#fff;fontSize=1.6rem]"
            }
          ]
        }
      ]
    }
  ],
  "type": "View:main?class=grid;style:[backgroundColor=#ccc]?mobile()",
  "controls": [
    {
      "event": "loaded?search():[collection=user;doc=getCookie():_id]:[user:()=().search.data;if():[!user:()]:[route():login];update():user-name;search():[collection=post]:[posts:()=().search.data.values();update():[id=cards;self]]]?getCookie():_id"
    },
    {
      "event": "loaded?route():/login?!getCookie():_id"
    }
  ],
  "id": "main",
  "creation-date": 1658651717443
}