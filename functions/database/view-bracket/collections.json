{
  "view": "View:collections",
  "children": [
    {
      "view": "[View]:[data=data:().editor.project.datastore.collections;mount?data:().editor.project.datastore.collections.len()>0]?style:[width=100%]",
      "children": [
        {
          "children": [
            {
              "view": "Icon?name=bi-chevron-right;style.fontSize=1.3rem;style.width=2.25rem;style.transition=.2s"
            },
            {
              "view": "Text?class=dots;text=data();style.fontSize=1.3rem"
            },
            {
              "view": "Icon?tooltip.text=create new doc;name=bi-plus;style:[backgroundColor=inherit;display=none;color=#000;fontSize=1.9rem;position=absolute;right=2.5rem;height=2rem;width=2rem;borderRadius=.25rem];hover.style.color=blue;click:[createNewDocRequest():[head-collection=collections;collection=().data]]"
            },
            {
              "view": "Icon?tooltip.text=create new doc;name=bi-three-dots-vertical;style:[backgroundColor=inherit;display=none;color=#000;fontSize=1.9rem;position=absolute;right=.5rem;height=2rem;width=2rem;borderRadius=.25rem];hover.style.color=blue;droplist:[items=_list:[_map:icon:'bi-trash'];item.style:[fontSize=2rem];placement=right;align=center]",
              "event": "click:droplist?removeCollection():[collection=data()]"
            }
          ],
          "view": "View:[data()]?class=flex pointer align-center;hover.style.backgroundColor=#e9e9e9;style:[minHeight=3rem;width=100%;position=relative]",
          "controls": [
            {
              "event": "mouseenter?lastChild().style().display=flex;2ndLastChild().style().display=flex"
            },
            {
              "event": "mouseleave?lastChild().style().display=none;2ndLastChild().style().display=none"
            },
            {
              "event": "click?searchDocs():[head-collection=collections;collection=().data;list=().data+'-list']?!3rdChild().contains():[clicked:()];!lastChild().contains():[clicked:()];!2ndLastChild().contains():[clicked:()]"
            }
          ]
        },
        {
          "view": "View:[data()+'-list']?class=flex column;style:[display=none;marginLeft=1.2rem;borderLeft=1px solid #ddd]",
          "children": [
            {
              "view": "[View]:[doc;data=data:().editor.collections.[parent().data()].keys();mount?data:().editor.collections.[parent().data].keys().len()>0||[!open-doc:();open-collection:()='collection-'+parent().data]]?class=flex pointer align-center;style:[minHeight=3rem;width=100%;position=relative]",
              "children": [
                {
                  "view": "Icon?name=bi-file-earmark;style.fontSize=1.3rem;style.minWidth=2.25rem"
                },
                {
                  "view": "Text?class=dots;text=data();style.fontSize=1.3rem"
                },
                {
                  "controls": [
                    {
                      "event": "keyup?cancelEditCreateDoc():[view=2ndParent().data;collection=2ndParent().data;head-collection=collections]?e().key=Escape"
                    },
                    {
                      "event": "blur?cancelEditCreateDoc():[view=2ndParent().data;collection=2ndParent().data;head-collection=collections]?!parent().contains():[clicked:()]"
                    },
                    {
                      "event": "keyup?problemEditingCreateDoc():[view=2ndParent().data;collection=2ndParent().data;head-collection=collections]?e().key=Enter||e().key=Tab;data:().editor.collections.[2ndParent().data].keys().inc():txt()||!txt()||txt().inc(): "
                    },
                    {
                      "event": "keyup?createEditDoc():[collection=2ndParent().data;list=2ndParent().data+'-list';head-collection=collections]?e().key=Enter||e().key=Tab;txt();txt()!=open-doc:();!data:().editor.collections.[2ndParent().data].keys().inc():txt();!txt().inc(): "
                    }
                  ],
                  "view": "Input?class=dots;input.value=data();generator;preventDefault;input.style.padding=0;style:[fontSize=1.3rem;border=0;height=3rem;padding=0;display=none;width='calc(100% - 2.25rem)']"
                },
                {
                  "controls": [
                    {
                      "event": "click?showActionPopup():[collection=2ndParent().data;head-collection=collections;list=2ndParent().data+'-list']"
                    }
                  ],
                  "view": "Icon?open-doc=data();open-collection='collection-'+2ndParent().data;name='bi-three-dots-vertical';style:[fontSize=1.8rem;width=2rem;height=3rem;position=absolute;right=0;display=none;backgroundColor=#e9e9e9;borderRadius=.25rem];hover.style.color=blue"
                }
              ],
              "controls": [
                {
                  "event": "mouseenter?style().backgroundColor=#e9e9e9;lastChild().style().display=flex?3rdChild().style().display=none"
                },
                {
                  "event": "mouseleave?lastChild().style().display=none;style().backgroundColor=inherit"
                },
                {
                  "event": "loaded?if():[new-file-created:();mapIndex=data:().editor.collections.[parent().data].keys().len()-1]:[new-file-created:().del();parent().style().display=flex;parent().prev().1stChild().style().transform='rotate(90deg)';click()]"
                },
                {
                  "event": "click?displayOpenedDoc():[collection=parent().data;head-collection=collections]?!2ndLastChild().contains():[clicked:()];!lastChild().contains():[clicked:()];open-docs:().inc():['data/'+parent().data+'/'+data()]"
                },
                {
                  "event": "click?openDoc():[collection=parent().data;head-collection=collections]?!2ndLastChild().contains():[clicked:()];!lastChild().contains():[clicked:()];!open-docs:().inc():['data/'+parent().data+'/'+data()]"
                }
              ]
            }
          ]
        }
      ]
    }
  ]
}