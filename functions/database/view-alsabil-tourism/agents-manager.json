{
  "controls": [
    {
      "event": "loaded?loader.show;search():[collection=agent]:[agents:()=search:().data.values();update():[agent-list];loader.hide]"
    }
  ],
  "creation-date": 1660816421743,
  "type": "View:agents-manager?class=flex-column;style():[width=100%;height=100%;padding=2rem;backgroundColor=#fff];if():[!unreset-agents:()]:[agents:()=_list];unreset-agents:()=false;search-agent:()=search-agent:()||_map",
  "id": "agents-manager",
  "children": [
    {
      "children": [
        {
          "type": "View?class=flexbox;style:[gap=1rem];style.height=100%",
          "children": [
            {
              "type": "View?style:[height=60%;width=2px;backgroundColor=blue;borderRadius=1rem]"
            },
            {
              "type": "Text?text=Agents Manager;style:[color=#444;fontSize=1.6rem]"
            }
          ]
        },
        {
          "children": [
            {
              "type": "Icon?class=flexbox pointer;name=bi-download;tooltip.text=import;style:[color=#666;fontSize=1.6rem;height=3.25rem;width=3.25rem;borderRadius=.5rem;border=1px solid #ddd;transition=.3s];hover.style:[color=#222;backgroundColor=#f6f6f6]"
            },
            {
              "type": "Icon?class=flexbox pointer;name=bi-upload;tooltip.text=export;style:[color=#666;fontSize=1.6rem;height=3.25rem;width=3.25rem;borderRadius=.5rem;border=1px solid #ddd;transition=.3s];hover.style:[color=#222;backgroundColor=#f6f6f6]"
            },
            {
              "type": "Icon?class=flexbox pointer;name=bi-wallet;tooltip.text=charge an account;style:[color=#666;fontSize=1.6rem;height=3.25rem;width=3.25rem;borderRadius=.5rem;border=1px solid #ddd;transition=.3s];hover.style:[color=#222;backgroundColor=#f6f6f6];click:[my-agent:()=agent:().clone();my-voucher:().del();payment-data:()=_map;update():payment-window;():payment-window.style():[opacity=1;pointerEvents=auto]]"
            },
            {
              "type": "Icon?class=flexbox pointer;name=bi-person;tooltip.text=create new user;style:[color=#666;fontSize=1.8rem;height=3.25rem;width=3.25rem;borderRadius=.5rem;border=1px solid #ddd;transition=.3s];hover.style:[color=#222;backgroundColor=#f6f6f6]"
            },
            {
              "type": "Icon?class=flexbox pointer;name=bi-plus;tooltip.text=create new agent;style:[color=#666;fontSize=2.4rem;height=3.25rem;width=3.25rem;borderRadius=.5rem;border=1px solid #ddd;transition=.3s];hover.style:[color=#222;backgroundColor=#f6f6f6]",
              "controls": [
                {
                  "event": "click?style():[id=agent-window;opacity=1;pointerEvents=auto];new-agent:()=true;agent-copied:().del();agent-edit-readonly:()=false;agent-data:()=_map;update():agent-window"
                }
              ]
            }
          ],
          "type": "View?class=flexbox;style:[marginLeft=auto;gap=1rem]"
        }
      ],
      "type": "View?class=flex align-center;style.height=4.5rem;style.minHeight=4.5rem"
    },
    {
      "children": [
        {
          "children": [
            {
              "type": "View?class=grid;style:[gap=1rem;gridTemplateColumns=1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr;flex=1]",
              "children": [
                {
                  "children": [
                    {
                      "event": "click:droplist?data()=agents:().find():[company-name=data()].id"
                    }
                  ],
                  "type": "Input?path=agent;if():[data()]:[input.value=agents:().find():[id=data()].company-name];label.text=Agent;label.style.fontSize=1.2rem;clearable;style:[height=4rem;flex=1;borderRadius=.5rem;border=1px solid #ddd;backgroundColor=#fff;fontSize=1.2rem;transition=.1s];clicked.style.border=2px solid #0080FF;droplist.items='agents:().():company-name';droplist.item.style:[minHeight=3.5rem;fontSize=1.2rem];droplist.searchable?agent:().admin;user:().admin"
                },
                {
                  "type": "Input?path=code;label.text=Code;label.style.fontSize=1.2rem;clearable;style:[height=4rem;width=100%;borderRadius=.5rem;border=1px solid #ddd;backgroundColor=#fff;fontSize=1.2rem;transition=.1s];clicked.style.border=2px solid #0080FF"
                },
                {
                  "type": "Input?path=country;label.text=Country;label.style.fontSize=1.2rem;clearable;style:[height=4rem;width=100%;borderRadius=.5rem;border=1px solid #ddd;backgroundColor=#fff;fontSize=1.2rem;transition=.1s];clicked.style.border=2px solid #0080FF;droplist.items=_list:Lebanon:Syria:Iraq:Iran;droplist.item.style:[fontSize=1.2rem;minHeight=3.5rem]"
                },
                {
                  "type": "Input?path=city;label.text=City;label.style.fontSize=1.2rem;clearable;style:[height=4rem;width=100%;borderRadius=.5rem;border=1px solid #ddd;backgroundColor=#fff;fontSize=1.2rem;transition=.1s];clicked.style.border=2px solid #0080FF;droplist.items='if():[Data().country=Lebanon]:[_list:Beirut:Baalbeck:Sidon:Nabatiyeh:Tyre].elif():[Data().country=Syria]:[_list:Damascus:Tartous].elif():[Data().country=Iraq]:[_list:Najaf:Baghdad:Soliemenieh:Basrah:Erbil:Samarra:Karbala:Ramadi:Mosul].elif():[Data().country=Iran]:[_list:Tehran:Mashhad:Qom:Isfahan:Shiraz:Kish:Yazd]';droplist.item.style:[fontSize=1.2rem;minHeight=3.5rem]"
                },
                {
                  "type": "View?class=flex column;style:[gap=1rem;width=100%;position=relative]",
                  "children": [
                    {
                      "controls": [
                        {
                          "event": "change?data()=data().timestamp();txt():[last-visit-date-txt]=data().toDateFormat()"
                        }
                      ],
                      "type": "Input?path=last-visit;label.text=Last Visit Date;label.style.fontSize=1.2rem;input.type=date;style:[height=4rem;width=100%;borderRadius=.5rem;border=1px solid #ddd;backgroundColor=#fff;fontSize=1.2rem;transition=.1s];clicked.style.border=2px solid #0080FF"
                    },
                    {
                      "children": [
                        {
                          "type": "Text:last-visit-date-txt?class=flex align-center;if():[data().last-visit-date]:[text=data().last-visit-date.toDateFormat()];style:[fontSize=1.2rem]"
                        },
                        {
                          "type": "Icon?class=flexbox pointer;name=bi-x-lg;style:[height=2.5rem;opacity=0;transition=.2s;fontSize=1.5rem;backgroundColor=#fff;borderRadius=.5rem;right=0;position=absolute];click:[data().[last-visit].del();prev().txt()=;parent().prev().click()]"
                        }
                      ],
                      "type": "View?class=flex align-center;style:[padding=0 .5rem;height=3.6rem;backgroundColor=#fff;zIndex=1;left=2px;bottom=2px;width=80%;position=absolute;borderRadius=.5rem];mouseenter.2ndChild().style().opacity=1;mouseleave.2ndChild().style().opacity=0"
                    }
                  ]
                }
              ]
            },
            {
              "children": [
                {
                  "type": "Text?text=Search;style:[color=#fff;fontSize=1.3rem]"
                }
              ],
              "controls": [
                {
                  "actions": "wait():search:[update:agents-list]?search.collection=agent;search.limit=250;search.field:[if():[search-agent:().code]:[code.equal=search-agent:().code];if():[search-agent:().name]:[company-name.equal=search-agent:().name];if():[search-agent:().city]:[company-head-office-city.equal=search-agent:().city];if():[search-agent:().country]:[company-head-office-country.equal=search-agent:().country];if():[search-agent:().last-visit]:[last-visit.equal=search-agent:().last-visit]];wait():[agents:()=search:().data.values().sort():[path=creation-date;descending];update():[agents-list-data];loader.hide]",
                  "event": "click?loader.show"
                },
                {
                  "event": "click?note():'Kindly fill any of the required blanks!':danger?!search-agent:().code;!search-agent:().name;!search-agent:().last-visit;!search-agent:().city;!search-agent:().country;false"
                }
              ],
              "type": "View?class=flexbox pointer;style:[height=3.25rem;padding=0 3rem;backgroundColor=blue;borderRadius=.5rem;transition=.3s;marginLeft=auto;marginTop=auto;marginBottom=.5rem];hover.style.backgroundColor=#0000d6"
            }
          ],
          "type": "View?class=flexbox;style:[width=100%;gap=1rem]"
        }
      ],
      "type": "View:agent-search-engine?doc=search-agent;class=flex align-center;style:[gap=1rem;backgroundColor=#f6f6f6;padding= 0 1rem;minHeight=8rem;height=0;transition=.2s;overflow=hidden;borderBottom=1px solid #ddd]"
    },
    {
      "children": [
        {
          "type": "View?style:[width=100%]",
          "children": [
            {
              "children": [
                {
                  "children": [
                    {
                      "type": "View?class=flex align-center;style:[height=100%;flex=1]",
                      "children": [
                        {
                          "type": "Text?class=pointer;text=#;style:[color=#888;fontSize=1.2rem;transition=.3s];hover.style.color=#444"
                        }
                      ]
                    },
                    {
                      "type": "View?class=flex align-center;style:[height=100%;flex=1]",
                      "children": [
                        {
                          "type": "Text?class=pointer;text=Agency Name;style:[color=#888;fontSize=1.2rem;transition=.3s];hover.style.color=#444",
                          "controls": [
                            {
                              "event": "click?loader.show;timer():[agents:()=sort():[data=agents:();path=company-name;descending];update():agents-list-data;loader.hide]:50"
                            }
                          ]
                        }
                      ]
                    },
                    {
                      "type": "View?class=flex align-center;style:[height=100%;width=6rem]",
                      "children": [
                        {
                          "controls": [
                            {
                              "event": "click?loader.show;timer():[agents:()=sort():[data=agents:();path=type;descending];update():agents-list-data;loader.hide]:50"
                            }
                          ],
                          "type": "Text?class=pointer dots;text=Type;style:[color=#888;fontSize=1.2rem;transition=.3s];hover.style.color=#444"
                        }
                      ]
                    },
                    {
                      "children": [
                        {
                          "type": "Text?class=pointer;text=code;style:[color=#888;fontSize=1.2rem;transition=.3s];hover.style.color=#444",
                          "controls": [
                            {
                              "event": "click?loader.show;timer():[agents:()=sort():[data=agents:();path=code;descending];update():agents-list-data;loader.hide]:50"
                            }
                          ]
                        }
                      ],
                      "type": "View?class=flex align-center;style:[height=100%;flex=1]"
                    },
                    {
                      "children": [
                        {
                          "type": "Text?class=pointer;text=Last Visit;style:[color=#888;fontSize=1.2rem;transition=.3s];hover.style.color=#444",
                          "controls": [
                            {
                              "event": "click?loader.show;timer():[agents:()=sort():[data=agents:();path=last-visit;descending];update():agents-list-data;loader.hide]:50"
                            }
                          ]
                        }
                      ],
                      "type": "View?class=flex align-center;style:[height=100%;flex=1]"
                    },
                    {
                      "type": "View?class=flex align-center;style:[height=100%;flex=1]",
                      "children": [
                        {
                          "type": "Text?class=pointer;text=Country;style:[color=#888;fontSize=1.2rem;transition=.3s];hover.style.color=#444",
                          "controls": [
                            {
                              "event": "click?loader.show;timer():[agents:()=sort():[data=agents:();path=company-head-office-country;descending];update():[agents-list-data];loader.hide]:50"
                            }
                          ]
                        }
                      ]
                    },
                    {
                      "type": "View?class=flex align-center;style:[height=100%;flex=1]",
                      "children": [
                        {
                          "controls": [
                            {
                              "event": "click?loader.show;timer():[agents:()=sort():[data=agents:();path=company-head-office-city;descending];update():[agents-list-data];loader.hide]:50"
                            }
                          ],
                          "type": "Text?class=pointer;text=City;style:[color=#888;fontSize=1.2rem;transition=.3s];hover.style.color=#444"
                        }
                      ]
                    },
                    {
                      "type": "View?class=flex align-center;style:[height=100%;flex=1]",
                      "children": [
                        {
                          "controls": [
                            {
                              "event": "click?loader.show;timer():[agents:()=sort():[data=agents:();path=company-head-office-address;descending];update():[agents-list-data];loader.hide]:50"
                            }
                          ],
                          "type": "Text?class=pointer;text=Address;style:[color=#888;fontSize=1.2rem;transition=.3s];hover.style.color=#444"
                        }
                      ]
                    },
                    {
                      "children": [
                        {
                          "type": "Text?class=pointer;text=Contact #;style:[color=#888;fontSize=1.2rem;transition=.3s];hover.style.color=#444",
                          "controls": [
                            {
                              "event": "click?loader.show;timer():[agents:()=sort():[data=agents:();path=contact-number;descending];update():[agents-list-data];loader.hide]:50"
                            }
                          ]
                        }
                      ],
                      "type": "View?class=flex align-center;style:[height=100%;flex=1]"
                    },
                    {
                      "type": "View?class=flex align-center;style:[height=100%;flex=1]",
                      "children": [
                        {
                          "controls": [
                            {
                              "event": "click?loader.show;timer():[agents:()=sort():[data=agents:();path=email;descending];update():[agents-list-data];loader.hide]:50"
                            }
                          ],
                          "type": "Text?class=pointer;text=Email;style:[color=#888;fontSize=1.2rem;transition=.3s];hover.style.color=#444"
                        }
                      ]
                    },
                    {
                      "type": "View?class=flex align-center;style:[height=100%;flex=1]",
                      "children": [
                        {
                          "type": "Text?class=pointer;text=Users;style:[color=#888;fontSize=1.2rem;transition=.3s];hover.style.color=#444",
                          "controls": [
                            {
                              "event": "click?loader.show;timer():[agents:()=sort():[data=agents:();path=user;descending];update():[agents-list-data];loader.hide]:50"
                            }
                          ]
                        }
                      ]
                    },
                    {
                      "type": "View?class=flexbox vertical;style:[width=100%;height=100%;backgroundColor=#ffff0044]",
                      "children": [
                        {
                          "type": "View?class=flex align-center;style:[height=100%;flex=1]",
                          "children": [
                            {
                              "type": "Text?class=pointer;text=Today;style:[color=#888;fontSize=1.2rem;transition=.3s];hover.style.color=#444"
                            }
                          ]
                        },
                        {
                          "children": [
                            {
                              "type": "Text?class=pointer;text=Bookings;style:[color=#888;fontSize=1.2rem;transition=.3s;flex=1];hover.style.color=#444",
                              "controls": [
                                {
                                  "event": "click?loader.show;timer():[agents:()=sort():[data=agents:();path=today-bookings;descending];update():[agents-list-data];loader.hide]:50"
                                }
                              ]
                            },
                            {
                              "controls": [
                                {
                                  "event": "click?loader.show;timer():[agents:()=sort():[data=agents:();path=today-uses;descending];update():[agents-list-data];loader.hide]:50"
                                }
                              ],
                              "type": "Text?class=pointer;text=Traffic;style:[color=#888;fontSize=1.2rem;transition=.3s;flex=1];hover.style.color=#444"
                            },
                            {
                              "controls": [
                                {
                                  "event": "click?loader.show;timer():[agents:()=sort():[data=agents:();path=today-buyings-usd;descending];update():[agents-list-data];loader.hide]:50"
                                }
                              ],
                              "type": "Text?class=pointer;text=Buyings;style:[color=#888;fontSize=1.2rem;transition=.3s;flex=1];hover.style.color=#444"
                            }
                          ],
                          "type": "View?class=flex align-center;style:[height=100%;flex=1;width=100%]"
                        }
                      ]
                    },
                    {
                      "type": "View?class=flexbox vertical;style:[width=100%;height=100%;backgroundColor=#00ff0033]",
                      "children": [
                        {
                          "type": "View?class=flex align-center;style:[height=100%;flex=1]",
                          "children": [
                            {
                              "type": "Text?class=pointer;text=Overall;style:[color=#888;fontSize=1.2rem;transition=.3s];hover.style.color=#444"
                            }
                          ]
                        },
                        {
                          "children": [
                            {
                              "type": "Text?class=pointer;text=Bookings;style:[color=#888;fontSize=1.2rem;transition=.3s;flex=1];hover.style.color=#444",
                              "controls": [
                                {
                                  "event": "click?loader.show;timer():[agents:()=sort():[data=agents:();path=bookings;descending];update():[agents-list-data];loader.hide]:50"
                                }
                              ]
                            },
                            {
                              "type": "Text?class=pointer;text=Traffic;style:[color=#888;fontSize=1.2rem;transition=.3s;flex=1];hover.style.color=#444",
                              "controls": [
                                {
                                  "event": "click?loader.show;timer():[agents:()=sort():[data=agents:();path=uses;descending];update():[agents-list-data];loader.hide]:50"
                                }
                              ]
                            },
                            {
                              "controls": [
                                {
                                  "event": "click?loader.show;timer():[agents:()=sort():[data=agents:();path=buyings-usd;descending];update():[agents-list-data];loader.hide]:50"
                                }
                              ],
                              "type": "Text?class=pointer;text=Buyings;style:[color=#888;fontSize=1.2rem;transition=.3s;flex=1];hover.style.color=#444"
                            },
                            {
                              "controls": [
                                {
                                  "event": "click?loader.show;timer():[agents:()=sort():[data=agents:();path=balance-usd;descending];update():[agents-list-data];loader.hide]:50"
                                }
                              ],
                              "type": "Text?class=pointer;text=Balance;style:[color=#888;fontSize=1.2rem;transition=.3s;flex=1];hover.style.color=#444"
                            }
                          ],
                          "type": "View?class=flex align-center;style:[height=100%;flex=1;width=100%]"
                        }
                      ]
                    },
                    {
                      "type": "View?style:[flex=1;minWidth=100%]"
                    }
                  ],
                  "type": "View?class=grid align-center;style:[borderBottom=1px solid #ddd;gridTemplateColumns=3rem 22rem 6rem .5fr 10rem .5fr .5fr 20rem 15rem 15rem .5fr 1.5fr 2fr 11rem;height=4rem;width=100%]"
                },
                {
                  "type": "View:agents-list-data?Data=agents;class=vertical;style:[width=100%;zIndex=0]",
                  "children": [
                    {
                      "children": [
                        {
                          "children": [
                            {
                              "type": "View?class=flex align-center;style:[height=100%;flex=1]",
                              "children": [
                                {
                                  "type": "Text?class=flex dots;text=3rdParent().mapIndex+1;style:[fontSize=1.2rem]"
                                }
                              ]
                            },
                            {
                              "type": "View?class=flex align-center;style:[height=100%;width=22rem;gap=1rem]",
                              "children": [
                                {
                                  "type": "View?class=flex align-center;style:[height=4rem]",
                                  "children": [
                                    {
                                      "type": "Image?class=flex;src=data().logo;style:[maxHeight=4rem;maxWidth=6rem]"
                                    }
                                  ]
                                },
                                {
                                  "type": "Text?class=flex dots;text=data().company-name;tooltip.text=data().company-name;style:[fontSize=1.2rem;width=15rem]"
                                }
                              ]
                            },
                            {
                              "children": [
                                {
                                  "type": "Text?class=flex dots;text=data().type;tooltip.text=data().type;style:[fontSize=1.2rem]"
                                }
                              ],
                              "type": "View?class=flex align-center;style:[height=100%;width=6rem]"
                            },
                            {
                              "children": [
                                {
                                  "type": "Text?class=flex dots;text=data().code;style:[fontSize=1.2rem]"
                                }
                              ],
                              "type": "View?class=flex align-center;style:[height=100%;flex=1]"
                            },
                            {
                              "type": "View?class=flex align-center;style:[height=100%;width=10rem]",
                              "children": [
                                {
                                  "type": "Text?class=flex dots;text=data().last-visit.toDateFormat();style:[fontSize=1.2rem]"
                                }
                              ]
                            },
                            {
                              "children": [
                                {
                                  "type": "Text?class=flex dots;text=data().company-head-office-country;style:[fontSize=1.2rem]"
                                }
                              ],
                              "type": "View?class=flex align-center;style:[height=100%;flex=1]"
                            },
                            {
                              "type": "View?class=flex align-center;style:[height=100%;flex=1]",
                              "children": [
                                {
                                  "type": "Text?class=flex dots;text=data().company-head-office-city;style:[fontSize=1.2rem]"
                                }
                              ]
                            },
                            {
                              "type": "View?class=flex align-center;style:[height=100%;width=20rem]",
                              "children": [
                                {
                                  "type": "Text?class=flex dots;text=data().company-head-office-address;tooltip.text=data().company-head-office-address;style:[fontSize=1.2rem]"
                                }
                              ]
                            },
                            {
                              "children": [
                                {
                                  "type": "Text?class=dots;text=data().contact-number;tooltip.text=data().contact-number;style:[fontSize=1.2rem]"
                                }
                              ],
                              "type": "View?class=flex align-center;style:[height=100%;width=15rem]"
                            },
                            {
                              "type": "View?class=flex align-center;style:[height=100%;width=15rem]",
                              "children": [
                                {
                                  "type": "Text?class=dots;text=data().email;tooltip.text=data().email;style:[fontSize=1.2rem]"
                                }
                              ]
                            },
                            {
                              "type": "View?class=flex align-center;style:[height=100%;flex=1]",
                              "children": [
                                {
                                  "type": "Text?class=dots pointer;text=data().users;style:[fontSize=1.2rem;borderRadius=.5rem;padding=.5rem;transition=.2s];hover.style:[color=blue;backgroundColor=#ddd]"
                                }
                              ]
                            },
                            {
                              "type": "View?class=flexbox align-center;style:[flex=1;height=100%;backgroundColor=#ffff0044]",
                              "children": [
                                {
                                  "controls": [
                                    {
                                      "event": "click?loader.show;search():[collection=flight-booking;field.day.equal=todayStart().timestamp();field.agent.equal=data().id]:[bookings:()=search:().data.values();unreset-bookings:()=true;():[flight-booking-sidebar-btn].click();loader.hide]"
                                    }
                                  ],
                                  "type": "Text?class=dots pointer;text=if():[data().today=todayStart().timestamp()]:[data().today-bookings||0]:0;style:[fontSize=1.2rem;borderRadius=.5rem;padding=.5rem;transition=.2s];hover.style:[color=blue;backgroundColor=#ddd]"
                                }
                              ]
                            },
                            {
                              "type": "View?class=flexbox align-center;style:[height=100%;flex=1;backgroundColor=#ffff0044]",
                              "children": [
                                {
                                  "type": "Text?class=dots pointer;text=if():[data().today=todayStart().timestamp()]:[data().today-uses||0]:0;style:[fontSize=1.2rem]"
                                }
                              ]
                            },
                            {
                              "type": "View?class=flexbox align-center;style:[height=100%;flex=1;backgroundColor=#ffff0044]",
                              "children": [
                                {
                                  "controls": [
                                    {
                                      "event": "click?loader.show;search-invoice:().():[from-date=todayStart().timestamp();to-date=todayStart().timestamp();agent=data().id];search():[collection=flight-reservation;limit=5000;field.cancelation-day.equal=todayStart().timestamp();field.agent.equal=data().id]:[invoices:()=search:().data.values()._():[_.type=Flight;_.status=Canceled;_.creation-date=_.cancelation-date;_.user-name=_.canceled-by-name;_.agent-name=_.canceled-by-agent-name];search():[collection=flight-reservation;limit=5000;field.day.equal=todayStart().timestamp();field.agent.equal=data().id]:[invoices:().push():[search:().data.values().clone()._():[_.type=Flight;_.status=Confirmed]];invoices:()=invoices:().sort():[path=creation-date;ascending];unreset-invoices:()=true;():[invoice-sidebar-btn].click();loader.hide]]"
                                    }
                                  ],
                                  "type": "Text?first=false;second=false;class=dots pointer;text=if():[data().today=todayStart().timestamp()]:[[data().today-buyings-usd||0].round():2+$]:'0.00$';style:[fontSize=1.2rem;borderRadius=.5rem;padding=.5rem;transition=.2s];hover.style:[color=blue;backgroundColor=#ddd]"
                                }
                              ]
                            },
                            {
                              "type": "View?class=flexbox align-center;style:[flex=1;height=100%;backgroundColor=#00ff0033]",
                              "children": [
                                {
                                  "type": "Text?class=dots pointer;text=[data().bookings||0];style:[fontSize=1.2rem;borderRadius=.5rem;padding=.5rem;transition=.2s];hover.style:[color=blue;backgroundColor=#ddd]"
                                }
                              ]
                            },
                            {
                              "type": "View?class=flexbox align-center;style:[flex=1;height=100%;backgroundColor=#00ff0033]",
                              "children": [
                                {
                                  "type": "Text?class=dots pointer;text=[data().uses||0];style:[fontSize=1.2rem;borderRadius=.5rem;padding=.5rem;transition=.2s];hover.style:[color=blue;backgroundColor=#ddd]"
                                }
                              ]
                            },
                            {
                              "children": [
                                {
                                  "type": "Text?class=dots pointer;text=[data().buyings-usd||0].round():2+$;style:[fontSize=1.2rem;borderRadius=.5rem;padding=.5rem;transition=.2s];hover.style:[color=blue;backgroundColor=#ddd]"
                                }
                              ],
                              "type": "View?class=flexbox align-center;style:[flex=1;height=100%;backgroundColor=#00ff0033]"
                            },
                            {
                              "type": "View?class=flexbox align-center;style:[height=100%;flex=1;backgroundColor=#00ff0033]",
                              "children": [
                                {
                                  "type": "Text?class=dots pointer;text=[data().balance-usd||0].round():2+$;style:[fontSize=1.2rem;borderRadius=.5rem;padding=.5rem;transition=.2s];hover.style:[color=blue;backgroundColor=#ddd]"
                                }
                              ]
                            },
                            {
                              "children": [
                                {
                                  "type": "Icon?class=flexbox pointer;name=account_balance_wallet;tooltip.text=charge account;google.outlined;style:[fontSize=2.2rem;color=#888;transition=.1s;width=3rem;borderRadius=3rem];hover.style.color=#444;click:[my-agent:()=data().clone();payment-data:()=_map:agent:[data().id]:agent-name:[data().company-name]:user:[user:().id]:user-name:[user:().username]:voucher-number:[gen():6.uppercase()];update():[payment-window];():[payment-window].style():[opacity=1;pointerEvents=auto]]"
                                },
                                {
                                  "type": "Icon?class=flexbox pointer;name=person_add;tooltip.text=add new user;google.outlined;style:[fontSize=2.2rem;color=#888;transition=.1s;width=3rem;borderRadius=3rem];hover.style.color=#444"
                                },
                                {
                                  "type": "Icon?class=flexbox actions pointer;name=bi-three-dots-vertical;style:[fontSize=2.2rem;color=#888;transition=.1s;width=3rem;borderRadius=3rem];hover.style.color=blue",
                                  "controls": [
                                    {
                                      "event": "click?if():[():action-list.style().pointerEvents=none||agent-data:()!=data()]:[():action-list.style():[pointerEvents=auto;opacity=1;transform=scale(1)]]:[():action-list.style():[pointerEvents=none;opacity=0;transform=scale(.5)]];agent-data:()=data().clone();agent-edit:()=true;action-lister:()=agents;update():[action-list];position():[id=action-list;positioner=().id;placement=left;align=center]"
                                    }
                                  ]
                                }
                              ],
                              "type": "View?class=flex align-center;style:[width=11rem;gap=.5rem;justifyContent=flex-end;transition=.2s;opacity=0;height=100%]?!user:().permissions.readonly"
                            }
                          ],
                          "type": "View?class=grid align-center;style:[gridTemplateColumns=3rem 22rem 6rem .5fr 10rem .5fr .5fr 20rem 15rem 15rem .5fr .5fr .5fr .5fr .5fr .5fr .5fr .5fr 11rem;height=5rem;transition=.2s;width=100%;cursor=default;if():[data().active=false]:[backgroundColor=#f27979]];hover:[if():[data().active=false]:[style.backgroundColor=#d84e4e]:[style.backgroundColor=#f6f6f6]];if():[!user:().permissions.readonly]:[mouseenter.lastChild().style().opacity=1;mouseleave.lastChild().style().opacity=0]"
                        }
                      ],
                      "type": "[View]?class=flex align-center;style:[width=100%]?data().len()>0"
                    }
                  ]
                },
                {
                  "type": "View?class=vertical;style:[width=100%]",
                  "children": [
                    {
                      "children": [
                        {
                          "type": "View?class=grid align-center;style:[gridTemplateColumns=3rem 22rem 6rem .5fr 10rem .5fr .5fr 20rem 15rem 15rem .5fr .5fr .5fr .5fr .5fr .5fr .5fr .5fr 11rem;height=4.5rem;transition=.2s;width=100%;cursor=default;if():[data().active=false]:[backgroundColor=#f27979]]",
                          "children": [
                            {
                              "children": [
                                {
                                  "type": "Text?text=Total;style:[fontSize=1.2rem]"
                                }
                              ],
                              "type": "View?class=flex align-center;style:[height=100%;flex=1]"
                            },
                            {
                              "type": "View?class=flex align-center;style:[height=100%;width=22rem;gap=1rem]"
                            },
                            {
                              "type": "View?class=flex align-center;style:[height=100%;width=6rem]"
                            },
                            {
                              "type": "View?class=flex align-center;style:[height=100%;flex=1]"
                            },
                            {
                              "children": [
                                {
                                  "type": "Text?class=flex dots;last-visit=0;agents:()._():[if():[_.last-visit>().last-visit]:[().last-visit=_.last-visit]];text=().last-visit.toDateFormat();style:[fontSize=1.2rem]"
                                }
                              ],
                              "type": "View?class=flex align-center;style:[height=100%;width=10rem]"
                            },
                            {
                              "type": "View?class=flex align-center;style:[height=100%;flex=1]"
                            },
                            {
                              "type": "View?class=flex align-center;style:[height=100%;flex=1]"
                            },
                            {
                              "type": "View?class=flex align-center;style:[height=100%;width=20rem]"
                            },
                            {
                              "type": "View?class=flex align-center;style:[height=100%;width=15rem]"
                            },
                            {
                              "type": "View?class=flex align-center;style:[height=100%;width=15rem]"
                            },
                            {
                              "type": "View?class=flex align-center;style:[height=100%;flex=1]",
                              "children": [
                                {
                                  "type": "Text?class=dots pointer;text=agents:().():users.sum();style:[fontSize=1.2rem;borderRadius=.5rem;padding=.5rem;transition=.2s];hover.style:[color=blue;backgroundColor=#ddd]"
                                }
                              ]
                            },
                            {
                              "children": [
                                {
                                  "type": "Text?class=dots pointer;today-bookings=0;agents:()._():[if():[_.today=todayStart().timestamp()]:[().today-bookings=().today-bookings+[_.today-bookings||0]]];text=().today-bookings;style:[fontSize=1.2rem;borderRadius=.5rem;padding=.5rem;transition=.2s];hover.style:[color=blue;backgroundColor=#ddd]",
                                  "controls": [
                                    {
                                      "event": "click?loader.show;search():[collection=flight-booking;field.day.equal=todayStart().timestamp()]:[bookings:()=search:().data.values();unreset-bookings:()=true;():[flight-booking-sidebar-btn].click();loader.hide]"
                                    }
                                  ]
                                }
                              ],
                              "type": "View?class=flexbox align-center;style:[flex=1;height=100%;backgroundColor=#ffff0044]"
                            },
                            {
                              "type": "View?class=flexbox align-center;style:[height=100%;flex=1;backgroundColor=#ffff0044]",
                              "children": [
                                {
                                  "type": "Text?class=dots pointer;today-uses=0;agents:()._():[if():[_.today=todayStart().timestamp()]:[().today-uses=().today-uses+[_.today-uses||0]]];text=().today-uses;style:[fontSize=1.2rem;borderRadius=.5rem;padding=.5rem;transition=.2s];hover.style:[color=blue;backgroundColor=#ddd]"
                                }
                              ]
                            },
                            {
                              "type": "View?class=flexbox align-center;style:[height=100%;flex=1;backgroundColor=#ffff0044]",
                              "children": [
                                {
                                  "type": "Text?class=dots pointer;today-buyings-usd=0;agents:()._():[if():[_.today=todayStart().timestamp()]:[().today-buyings-usd=().today-buyings-usd+[_.today-buyings-usd||0]]];text=().today-buyings-usd.round():2+$;style:[fontSize=1.2rem;borderRadius=.5rem;padding=.5rem;transition=.2s];hover.style:[color=blue;backgroundColor=#ddd]"
                                }
                              ]
                            },
                            {
                              "type": "View?class=flexbox align-center;style:[flex=1;height=100%;backgroundColor=#00ff0033]",
                              "children": [
                                {
                                  "type": "Text?class=dots pointer;text=agents:().():bookings.sum();style:[fontSize=1.2rem;borderRadius=.5rem;padding=.5rem;transition=.2s];hover.style:[color=blue;backgroundColor=#ddd]"
                                }
                              ]
                            },
                            {
                              "type": "View?class=flexbox align-center;style:[flex=1;height=100%;backgroundColor=#00ff0033]",
                              "children": [
                                {
                                  "type": "Text?class=dots pointer;text=agents:().():uses.sum();style:[fontSize=1.2rem;borderRadius=.5rem;padding=.5rem;transition=.2s];hover.style:[color=blue;backgroundColor=#ddd]"
                                }
                              ]
                            },
                            {
                              "children": [
                                {
                                  "type": "Text?class=dots pointer;text=agents:().():[buyings-usd].sum().round():2+$;style:[fontSize=1.2rem;borderRadius=.5rem;padding=.5rem;transition=.2s];hover.style:[color=blue;backgroundColor=#ddd]"
                                }
                              ],
                              "type": "View?class=flexbox align-center;style:[flex=1;height=100%;backgroundColor=#00ff0033]"
                            },
                            {
                              "children": [
                                {
                                  "type": "Text?class=dots pointer;text=agents:().():[balance-usd].sum().round():2+$;style:[fontSize=1.2rem;borderRadius=.5rem;padding=.5rem;transition=.2s];hover.style:[color=blue;backgroundColor=#ddd]"
                                }
                              ],
                              "type": "View?class=flexbox align-center;style:[height=100%;flex=1;backgroundColor=#00ff0033]"
                            },
                            {
                              "type": "View?class=flex align-center;style:[width=11rem;gap=.5rem;justifyContent=flex-end;transition=.2s;opacity=0;height=100%]"
                            }
                          ]
                        }
                      ],
                      "type": "View?class=flex align-center;style:[width=100%;borderTop=1px solid #ddd]?agents:().len()>0;agent:().admin;user:().admin"
                    }
                  ]
                }
              ],
              "type": "View?class=vertical;style:[width=100%;minHeight=30rem;gap=.5rem]"
            }
          ]
        }
      ],
      "type": "View:agent-list?class=flex column;style:[width=100%;padding=1rem;backgroundColor=#fff;overflowY=auto]"
    }
  ],
  "functions": {}
}