{
  "type": "View?id=invoices-list;class=flex column;style:[width=100%;padding=1rem;backgroundColor=#fff;overflowY=auto]",
  "children": [
    {
      "children": [
        {
          "children": [
            {
              "children": [
                {
                  "type": "View?class=flexbox align-center;style:[height=100%;flex=1]",
                  "children": [
                    {
                      "type": "Text?class=pointer;text=#;style:[color=#888;fontSize=1.2rem;transition=.3s];hover.style.color=#444"
                    }
                  ]
                },
                {
                  "type": "View?class=flex align-center;style:[height=100%;flex=1]",
                  "children": [
                    {
                      "type": "Text?class=pointer;text=Date;style:[color=#888;fontSize=1.2rem;transition=.3s];hover.style.color=#444",
                      "controls": [
                        {
                          "event": "click?loader.show;timer():[invoices:()=sort():[data=invoices:();path=creation-date;descending];update():[invoices-list-data];loader.hide]:50"
                        }
                      ]
                    }
                  ]
                },
                {
                  "children": [
                    {
                      "controls": [
                        {
                          "event": "click?loader.show;timer():[invoices:()=sort():[data=invoices:();path=type;descending];update():invoices-list-data;loader.hide]:50"
                        }
                      ],
                      "type": "Text?class=pointer;text=Type;style:[color=#888;fontSize=1.2rem;transition=.3s];hover.style.color=#444"
                    }
                  ],
                  "type": "View?class=flex align-center;style:[height=100%;flex=1]"
                },
                {
                  "type": "View?class=flex align-center;style:[height=100%;flex=1]",
                  "children": [
                    {
                      "type": "Text?class=pointer;text=Voucher;style:[color=#888;fontSize=1.2rem;transition=.3s];hover.style.color=#444",
                      "controls": [
                        {
                          "event": "click?loader.show;timer():[invoices:()=sort():[data=invoices:();path=pnr;descending];update():invoices-list-data;loader.hide]:50"
                        }
                      ]
                    }
                  ]
                },
                {
                  "type": "View?class=flex align-center;style:[height=100%;flex=1]",
                  "children": [
                    {
                      "type": "Text?class=pointer;text=E-Ticket;style:[color=#888;fontSize=1.2rem;transition=.3s];hover.style.color=#444",
                      "controls": [
                        {
                          "event": "click?loader.show;timer():[invoices:()=sort():[data=invoices:();path=e-ticket;descending];update():[invoices-list-data];loader.hide]:50"
                        }
                      ]
                    }
                  ]
                },
                {
                  "type": "View?class=flex align-center;style:[height=100%;flex=1]",
                  "children": [
                    {
                      "controls": [
                        {
                          "event": "click?loader.show;timer():[invoices:()=sort():[data=invoices:();path='reservation-details.0.first-name+ +reservation-details.0.last-name';descending];update():[invoices-list-data];loader.hide]:50"
                        }
                      ],
                      "type": "Text?class=pointer;text=Passenger Name;style:[color=#888;fontSize=1.2rem;transition=.3s];hover.style.color=#444"
                    }
                  ]
                },
                {
                  "children": [
                    {
                      "type": "Text?class=pointer;text=Description;style:[color=#888;fontSize=1.2rem;transition=.3s];hover.style.color=#444;#from-to class bag"
                    }
                  ],
                  "type": "View?class=flex align-center;style:[height=100%;flex=1]"
                },
                {
                  "children": [
                    {
                      "type": "Text?class=pointer;text=Status;style:[color=#888;fontSize=1.2rem;transition=.3s];hover.style.color=#444",
                      "controls": [
                        {
                          "event": "click?loader.show;timer():[invoices:()=sort():[data=invoices:();path=status;descending];update():[invoices-list-data];loader.hide]:50"
                        }
                      ]
                    }
                  ],
                  "type": "View?class=flex align-center;style:[height=100%;flex=1]"
                },
                {
                  "type": "View?class=flex align-center;style:[height=100%;flex=1]",
                  "children": [
                    {
                      "type": "Text?class=pointer;text=Issuer;style:[color=#888;fontSize=1.2rem;transition=.3s];hover.style.color=#444",
                      "controls": [
                        {
                          "event": "click?loader.show;timer():[invoices:()=sort():[data=invoices:();path=issued-by-name;descending];update():[invoices-list-data];loader.hide]:50"
                        }
                      ]
                    }
                  ]
                },
                {
                  "children": [
                    {
                      "type": "Text?class=pointer;text=Debit;style:[color=#888;fontSize=1.2rem;transition=.3s;width=100%;textAlign=right];hover.style.color=#444",
                      "controls": [
                        {
                          "event": "click?loader.show;timer():[invoices:()=sort():[data=invoices:();path=total-payable-usd;descending];update():[invoices-list-data];loader.hide]:50"
                        }
                      ]
                    }
                  ],
                  "type": "View?class=flex align-center;style:[height=100%;width=100%]"
                },
                {
                  "children": [
                    {
                      "controls": [
                        {
                          "event": "click?loader.show;timer():[invoices:()=sort():[data=invoices:();path=amount-usd;descending];update():[invoices-list-data];loader.hide]:50"
                        }
                      ],
                      "type": "Text?class=pointer;text=Credit;style:[color=#888;fontSize=1.2rem;transition=.3s;width=100%;textAlign=right];hover.style.color=#444"
                    }
                  ],
                  "type": "View?class=flex align-center;style:[height=100%;width=100%]"
                },
                {
                  "type": "View?class=flex align-center;style:[height=100%;width=100%]",
                  "children": [
                    {
                      "type": "Text?class=pointer;text=Balance;style:[color=#888;fontSize=1.2rem;transition=.3s;width=100%;textAlign=right];hover.style.color=#444",
                      "controls": [
                        {
                          "event": "click?loader.show;timer():[invoices:()=sort():[data=invoices:();path=end-balance-usd;descending];update():[invoices-list-data];loader.hide]:50"
                        }
                      ]
                    }
                  ]
                },
                {
                  "type": "View?style:[flex=1]"
                }
              ],
              "type": "View?class=grid align-center;style:[borderBottom=1px solid #ddd;gridTemplateColumns=3rem 10rem 10rem 10rem 10rem 1fr 40rem 8rem 10rem 8rem 8rem 8rem 4rem;minHeight=4rem;width=100%]"
            },
            {
              "type": "View:invoices-list-data?doc=invoices;class=vertical;style:[width=100%;zIndex=0]",
              "children": [
                {
                  "children": [
                    {
                      "type": "View?class=grid align-center flight;style:[gridTemplateColumns=3rem 10rem 10rem 10rem 10rem 1fr 40rem 8rem 10rem 8rem 8rem 8rem 4rem;minHeight=4rem;transition=.2s;width=100%;cursor=default];if():[!user:().permissions.readonly]:[mouseenter:[lastChild().style().opacity=1];mouseleave:[lastChild().style().opacity=0]]",
                      "children": [
                        {
                          "type": "View?class=flexbox align-center;style:[height=100%;flex=1;position=relative];mouseenter:[2ndChild().style().opacity=1;3rdChild().style().opacity=1];mouseleave:[2ndChild().style().opacity=0;3rdChild().style().opacity=0]"
                        },
                        {
                          "type": "View?class=flex align-center;style:[height=100%;width=10rem]"
                        },
                        {
                          "children": [
                            {
                              "type": "Text?class=flex dots;text=;style:[fontSize=1.2rem]"
                            }
                          ],
                          "type": "View?class=flex align-center;style:[height=100%;width=10rem]"
                        },
                        {
                          "type": "View?class=flex align-center;style:[height=100%;flex=1]",
                          "children": [
                            {
                              "type": "Text?class=flexbox pointer dots;text=;style:[fontSize=1.2rem;padding=.5rem;borderRadius=.5rem;transition=.2s];hover.style:[color=blue;backgroundColor=#ddd]"
                            }
                          ]
                        },
                        {
                          "type": "View?class=flex align-center;style:[height=100%;flex=1]",
                          "children": [
                            {
                              "type": "Text?class=flex dots;text=;style:[fontSize=1.2rem]"
                            }
                          ]
                        },
                        {
                          "children": [
                            {
                              "type": "Text?class=flex dots;text=;style:[fontSize=1.2rem]"
                            }
                          ],
                          "type": "View?class=flex align-center;style:[height=100%;width=100%]"
                        },
                        {
                          "children": [
                            {
                              "type": "Text?class=dots;text=Start balance on date +search-invoice:().from-date.toDateFormat();style:[fontSize=1.2rem]"
                            }
                          ],
                          "type": "View?class=flex align-center;style:[height=100%;width=40rem;flexWrap=wrap]"
                        },
                        {
                          "type": "View?class=flex align-center;style:[height=100%;width=10rem]",
                          "children": [
                            {
                              "type": "Text?class=dots;text=;style:[fontSize=1.2rem]"
                            }
                          ]
                        },
                        {
                          "children": [
                            {
                              "type": "Text?class=dots;text=;style:[fontSize=1.2rem]"
                            }
                          ],
                          "type": "View?class=flex align-center;style:[height=100%;width=10rem]"
                        },
                        {
                          "type": "View?class=flex align-center;style:[height=100%;width=100%]",
                          "children": [
                            {
                              "type": "Text?class=flex dots;text=;style:[fontSize=1.2rem;textAlign=right;width=100%]"
                            }
                          ]
                        },
                        {
                          "children": [
                            {
                              "type": "Text?class=flex dots;text=;style:[fontSize=1.2rem;textAlign=right;width=100%]"
                            }
                          ],
                          "type": "View?class=flex align-center;style:[height=100%;width=100%]"
                        },
                        {
                          "children": [
                            {
                              "type": "Text?class=flex dots;text=[if():[invoices:().0.status=Canceled]:[invoices:().0.canceled-start-balance-usd]:[invoices:().0.start-balance-usd]||0].round():2+$;style:[fontSize=1.2rem;textAlign=right;width=100%]"
                            }
                          ],
                          "type": "View?class=flex align-center;style:[height=100%;width=100%]"
                        },
                        {
                          "type": "View?class=flex align-center;style:[flex=1;gap=1rem;justifyContent=flex-end;transition=.2s;opacity=0]?!user:().permissions.readonly",
                          "children": [
                            {
                              "type": "Icon?class=flexbox actions pointer;name=bi-three-dots-vertical;style:[fontSize=2.2rem;color=#888;transition=.1s;height=3rem;width=3rem;borderRadius=3rem];hover.style.color=blue",
                              "controls": [
                                {
                                  "event": "click?if():[style():action-list.pointerEvents=none||invoice-data:()!=data()]:[style():[pointerEvents=auto;opacity=1;transform=scale(1);id=action-list]]:[style():[id=action-list;pointerEvents=none;opacity=0;transform=scale(.5)]];invoice-data:()=data().clone();invoice-edit:()=true;action-lister:()=invoices;update():[action-list];position():[id=action-list;positioner=().id;placement=left;align=center]?!user:().permissions.readonly"
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    }
                  ],
                  "type": "View?style:[width=100%;transition=height .1s;overflow=hidden;borderBottom=1px solid #ddd];mouseenter:[if():[hidden]:[style().height=4rem]];mouseleave:[if():[hidden]:[style().height=2px]]?data().len()>0"
                },
                {
                  "type": "[View]?style:[width=100%;transition=height .1s;overflow=hidden];mouseenter:[if():[hidden]:[style().height=4rem]];mouseleave:[if():[hidden]:[style().height=2px]]?data().len()>0",
                  "children": [
                    {
                      "type": "View?class=grid align-center flight;style:[gridTemplateColumns=3rem 10rem 10rem 10rem 10rem 1fr 40rem 8rem 10rem 8rem 8rem 8rem 4rem;minHeight=4rem;transition=.2s;width=100%;cursor=default];if():[!user:().permissions.readonly]:[mouseenter:[lastChild().style().opacity=1];mouseleave:[lastChild().style().opacity=0]]",
                      "children": [
                        {
                          "children": [
                            {
                              "type": "Text?class=flex dots;text=3rdParent().mapIndex+1;style:[fontSize=1.2rem]"
                            },
                            {
                              "type": "Icon?class=flexbox pointer;style:[fontSize=1.2rem];name=bi-eye-slash;style:[fontSize=2rem;opacity=0;position=absolute;backgroundColor=inherit;transition=.2s];click:[style().display=none;next().style().display=flex;3rdParent().hidden=true;3rdParent().style():[height=1px;backgroundColor=#42c2f5]]"
                            },
                            {
                              "type": "Icon?class=flexbox pointer;style:[fontSize=1.2rem];name=bi-eye;style:[fontSize=2rem;display=none;opacity=0;position=absolute;backgroundColor=inherit;transition=.2];click:[style().display=none;prev().style().display=flex;3rdParent().hidden=false;3rdParent().style():[height=4rem;backgroundColor=#fff]]"
                            }
                          ],
                          "type": "View?class=flexbox align-center;style:[height=100%;flex=1;position=relative];mouseenter:[2ndChild().style().opacity=1;3rdChild().style().opacity=1];mouseleave:[2ndChild().style().opacity=0;3rdChild().style().opacity=0]"
                        },
                        {
                          "type": "View?class=flex align-center;style:[height=100%;width=10rem]",
                          "children": [
                            {
                              "type": "Text?class=flex dots;tooltip.text=data().creation-date.toDateFormat():time;text=data().creation-date.toDateFormat();style:[fontSize=1.2rem]"
                            }
                          ]
                        },
                        {
                          "children": [
                            {
                              "type": "Text?class=flex dots;text=data().type;style:[fontSize=1.2rem]"
                            }
                          ],
                          "type": "View?class=flex align-center;style:[height=100%;width=10rem]"
                        },
                        {
                          "children": [
                            {
                              "type": "Text?class=flexbox pointer dots;text=if():[data().type=Payment]:[data().voucher-number]:[data().pnr];style:[fontSize=1.2rem;padding=.5rem;borderRadius=.5rem;transition=.2s];hover.style:[color=blue;backgroundColor=#ddd]",
                              "controls": [
                                {
                                  "event": "click?loader.show;search():[collection=if():[data().type=Flight]:[flight-booking];field.pnr.equal=data().pnr]:[bookings:()=search:().data.values();unreset-bookings:()=true;():[flight-booking-sidebar-btn].click();loader.hide]"
                                }
                              ]
                            }
                          ],
                          "type": "View?class=flex align-center;style:[height=100%;flex=1]"
                        },
                        {
                          "type": "View?class=flex align-center;style:[height=100%;flex=1]",
                          "children": [
                            {
                              "type": "Text?class=flex dots;text=if():[data().type!=Payment]:[data().e-ticket];style:[fontSize=1.2rem]"
                            }
                          ]
                        },
                        {
                          "type": "View?class=flex align-center;style:[height=100%;width=1fr;flexWrap=wrap]",
                          "children": [
                            {
                              "type": "Text?class=flex dots;tooltip.text=if():[data().type!=Payment]:[[data().reservation-details.0.age+' '+data().reservation-details.0.title+' '+data().reservation-details.0.first-name+' '+data().reservation-details.0.last-name].uppercase()]:;text=if():[data().type!=Payment]:[[data().reservation-details.0.age+' '+data().reservation-details.0.title+' '+data().reservation-details.0.first-name+ +data().reservation-details.0.last-name].uppercase()]:;style:[fontSize=1.2rem]"
                            }
                          ]
                        },
                        {
                          "children": [
                            {
                              "type": "Text?class=dots;text='';if():[data().type=Flight||data().type=Hotel]:[data().reservation-details._():[().text=().text+_.departure-airport.split(): .0+'-'+_.arrival-airport.split(): .0+ +_.departure-day.toDateFormat().slice():4+ ]].elif():[data().type=Payment]:[text=data().description+ Paid by +data().payer];style:[fontSize=1.2rem]"
                            }
                          ],
                          "type": "View?class=flex align-center;style:[height=100%;width=40rem;flexWrap=wrap]"
                        },
                        {
                          "type": "View?class=flex align-center;style:[height=100%;width=10rem]",
                          "children": [
                            {
                              "type": "Text?class=dots;text=data().status;style:[fontSize=1.2rem]"
                            }
                          ]
                        },
                        {
                          "type": "View?class=flex align-center;style:[width=10rem;height=100%]",
                          "children": [
                            {
                              "type": "Text?class=flex dots;tooltip.text=data().user-name;text=data().user-name;style:[fontSize=1.2rem]"
                            }
                          ]
                        },
                        {
                          "children": [
                            {
                              "type": "Text?class=flex dots;text=if():[data().type=Flight||data().type=Hotel]:[if():[data().status=Confirmed]:[[data().total-payable-usd||data().total-usd].round():2+$]:''].elif():[data().type=Payment]:[if():[data().status=Canceled]:[data().canceled-amount-usd.round():2+$]:'']:'';style:[fontSize=1.2rem;textAlign=right;width=100%;color=blue]"
                            }
                          ],
                          "type": "View?class=flex align-center;style:[height=100%;width=100%]"
                        },
                        {
                          "type": "View?class=flex align-center;style:[height=100%;width=100%]",
                          "children": [
                            {
                              "type": "Text?class=flex dots;text=if():[data().type=Flight||data().type=Hotel]:[if():[data().status=Canceled]:[data().total-canceled-payable-usd.round():2+'$']:''].elif():[data().type=Payment]:[if():[data().status!=Canceled]:[data().amount-usd.round():2+$]:'']:'';style:[fontSize=1.2rem;textAlign=right;width=100%;color=red]"
                            }
                          ]
                        },
                        {
                          "type": "View?class=flex align-center;style:[height=100%;width=100%]",
                          "children": [
                            {
                              "type": "Text?class=flex dots;text=[if():[data().status=Canceled]:[data().canceled-end-balance-usd]:[data().end-balance-usd]||0].round():2+$;style:[fontSize=1.2rem;textAlign=right;width=100%]"
                            }
                          ]
                        },
                        {
                          "children": [
                            {
                              "type": "Icon?class=flexbox actions pointer;name=bi-three-dots-vertical;style:[fontSize=2.2rem;color=#888;transition=.1s;height=3rem;width=3rem;borderRadius=3rem];hover.style.color=blue",
                              "controls": [
                                {
                                  "event": "click?if():[style():action-list.pointerEvents=none||invoice-data:()!=data()]:[style():[pointerEvents=auto;opacity=1;transform=scale(1);id=action-list]]:[style():[id=action-list;pointerEvents=none;opacity=0;transform=scale(.5)]];invoice-data:()=data().clone();invoice-edit:()=true;action-lister:()=invoices;update():[action-list];position():[id=action-list;positioner=().id;placement=left;align=center]?!user:().permissions.readonly"
                                }
                              ]
                            }
                          ],
                          "type": "View?class=flex align-center;style:[flex=1;gap=1rem;justifyContent=flex-end;transition=.2s;opacity=0]?!user:().permissions.readonly"
                        }
                      ]
                    }
                  ]
                },
                {
                  "children": [
                    {
                      "type": "View?class=grid align-center flight;style:[gridTemplateColumns=3rem 10rem 10rem 10rem 10rem 1fr 40rem 8rem 10rem 8rem 8rem 8rem 4rem;minHeight=4rem;transition=.2s;width=100%;cursor=default];if():[!user:().permissions.readonly]:[mouseenter:[lastChild().style().opacity=1];mouseleave:[lastChild().style().opacity=0]]",
                      "children": [
                        {
                          "type": "View?class=flexbox align-center;style:[height=100%;flex=1;position=relative];mouseenter:[2ndChild().style().opacity=1;3rdChild().style().opacity=1];mouseleave:[2ndChild().style().opacity=0;3rdChild().style().opacity=0]"
                        },
                        {
                          "type": "View?class=flex align-center;style:[height=100%;width=10rem]",
                          "children": [
                            {
                              "type": "Text?class=flex dots;text=;style:[fontSize=1.2rem]"
                            }
                          ]
                        },
                        {
                          "type": "View?class=flex align-center;style:[height=100%;width=10rem]",
                          "children": [
                            {
                              "type": "Text?class=flex dots;text=;style:[fontSize=1.2rem]"
                            }
                          ]
                        },
                        {
                          "type": "View?class=flex align-center;style:[height=100%;flex=1]",
                          "children": [
                            {
                              "type": "Text?class=flexbox pointer dots;text=;style:[fontSize=1.2rem;padding=.5rem;borderRadius=.5rem;transition=.2s];hover.style:[color=blue;backgroundColor=#ddd]"
                            }
                          ]
                        },
                        {
                          "children": [
                            {
                              "type": "Text?class=flex dots;text=;style:[fontSize=1.2rem]"
                            }
                          ],
                          "type": "View?class=flex align-center;style:[height=100%;flex=1]"
                        },
                        {
                          "children": [
                            {
                              "type": "Text?class=flex dots;text=;style:[fontSize=1.2rem]"
                            }
                          ],
                          "type": "View?class=flex align-center;style:[height=100%;width=1fr]"
                        },
                        {
                          "children": [
                            {
                              "type": "Text?class=dots;text=End balance on date +if():[search-invoice:().to-date]:[search-invoice:().to-date.toDateFormat()]:[search-invoice:().from-date.toDateFormat()];style:[fontSize=1.3rem]"
                            }
                          ],
                          "type": "View?class=flex align-center;style:[height=100%;width=40rem;flexWrap=wrap]"
                        },
                        {
                          "children": [
                            {
                              "type": "Text?class=dots;text=;style:[fontSize=1.2rem]"
                            }
                          ],
                          "type": "View?class=flex align-center;style:[height=100%;width=10rem]"
                        },
                        {
                          "children": [
                            {
                              "type": "Text?class=dots;text=;style:[fontSize=1.2rem]"
                            }
                          ],
                          "type": "View?class=flex align-center;style:[height=100%;width=10rem]"
                        },
                        {
                          "type": "View?class=flex align-center;style:[height=100%;width=100%]",
                          "children": [
                            {
                              "type": "Text?class=flex dots;text=[invoices:().filter():[type=Hotel||type=Flight;status!=Canceled].():[total-payable-usd].sum()+invoices:().filter():[type=Payment;status=Canceled].():[amount-usd].sum()].round():2+$;style:[fontSize=1.3rem;textAlign=right;width=100%;color=blue]"
                            }
                          ]
                        },
                        {
                          "type": "View?class=flex align-center;style:[height=100%;width=100%]",
                          "children": [
                            {
                              "type": "Text?class=flex dots;text=[invoices:().filter():[type=Hotel||type=Flight;status=Canceled;end-balance-usd||start-balance-usd].():[total-canceled-payable-usd].sum()+invoices:().filter():[type=Payment;status!=Canceled;end-balance-usd||start-balance-usd].():[amount-usd].sum()].round():2+$;style:[fontSize=1.3rem;textAlign=right;width=100%;color=red]"
                            }
                          ]
                        },
                        {
                          "type": "View?class=flex align-center;style:[height=100%;width=100%]",
                          "children": [
                            {
                              "type": "Text?class=flex dots;text=[if():[invoices:().lastEl().status=Canceled]:[invoices:().lastEl().canceled-end-balance-usd]:[invoices:().lastEl().end-balance-usd]||0].round():2+$;style:[fontSize=1.3rem;textAlign=right;width=100%]"
                            }
                          ]
                        },
                        {
                          "type": "View?class=flex align-center;style:[flex=1;gap=1rem;justifyContent=flex-end;transition=.2s;opacity=0]"
                        }
                      ]
                    }
                  ],
                  "type": "View?style:[width=100%;transition=height .1s;overflow=hidden;borderTop=1px solid #ddd];mouseenter:[if():[hidden]:[style().height=4rem]];mouseleave:[if():[hidden]:[style().height=2px]]?data().len()>0"
                }
              ]
            }
          ],
          "type": "View?class=vertical;style:[width=100%;minHeight=30rem]?invoices:().len()>0;invoices:().0.len()>0"
        }
      ],
      "type": "View?style:[width=100%];data=invoices:()"
    }
  ],
  "id": "invoices-list",
  "functions": {},
  "creation-date": 1655930948086
}