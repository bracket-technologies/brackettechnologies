{
  "id": "bookings-manager",
  "children": [
    {
      "type": "View?class=flex align-center;style:[minHeight=4.5rem;height=4.5rem]",
      "children": [
        {
          "type": "View?class=flexbox;style:[height=100%]",
          "children": [
            {
              "type": "View?style:[height=60%;width=2px;backgroundColor=blue;borderRadius=1rem]"
            },
            {
              "type": "View?class=flexbox pointer;style:[gap=.4rem;height=70%;padding=0 1rem]",
              "children": [
                {
                  "type": "View?class=flexbox;style:[height=100%;borderRadius=.5rem]",
                  "children": [
                    {
                      "type": "Text?text=Bookings Manager;style:[fontSize=1.6rem]"
                    }
                  ]
                },
                {
                  "type": "Text?text=Manager;style:[color=#444;fontSize=1.6rem];click:[prev().1stChild().click()]?false"
                },
                {
                  "type": "Icon?class=flexbox;name=bi-caret-down-fill;style:[fontSize=1.4rem;marginBottom=-.5rem];click:[2ndPrev().1stChild().click()]?false"
                }
              ]
            }
          ]
        },
        {
          "type": "View?class=flexbox;style:[marginLeft=auto;gap=1rem]",
          "children": [
            {
              "children": [
                {
                  "type": "Icon?class=flexbox pointer;name=bi-person-x;tooltip.text=agent hidden;style:[if():[hide-agent:()]:[display=flex]:[display=none];color=#666;fontSize=1.6rem;minHeight=3.25rem;minWidth=3.25rem;borderRadius=.5rem;border=1px solid #ddd;transition=.3s];hover.style:[color=#222;backgroundColor=#f6f6f6];click:[hide-agent:()=false;next().style().display=flex;style().display=none]"
                },
                {
                  "type": "Icon?class=flexbox pointer;name=bi-person-check;tooltip.text=agent visible;style:[if():[hide-agent:()]:[display=none]:[display=flex];color=#666;fontSize=1.6rem;minHeight=3.25rem;minWidth=3.25rem;borderRadius=.5rem;border=1px solid #ddd;transition=.3s];hover.style:[color=#222;backgroundColor=#f6f6f6];click:[hide-agent:()=true;prev().style().display=flex;style().display=none]"
                },
                {
                  "type": "Icon?class=flexbox pointer;name=bi-list-ol;tooltip.text=tickets will be printed in a list;style:[if():[print-by-ticket:()]:[display=none]:[display=flex];color=#666;fontSize=1.6rem;minHeight=3.25rem;minWidth=3.25rem;borderRadius=.5rem;border=1px solid #ddd;transition=.3s];hover.style:[color=#222;backgroundColor=#f6f6f6];click:[print-by-ticket:()=true;next().style().display=flex;style().display=none]"
                },
                {
                  "type": "Icon?class=flexbox pointer;name=bi-grid;tooltip.text=each ticket will be printed alone;style:[if():[print-by-ticket:()]:[display=flex]:[display=none];color=#666;fontSize=1.6rem;minHeight=3.25rem;minWidth=3.25rem;borderRadius=.5rem;border=1px solid #ddd;transition=.3s];hover.style:[color=#222;backgroundColor=#f6f6f6];click:[print-by-ticket:()=false;prev().style().display=flex;style().display=none]"
                }
              ],
              "type": "View?class=flexbox;style:[gap=1rem;width=0;transition=.2s;overflow=hidden]"
            },
            {
              "type": "Icon?class=flexbox pointer;name=bi-printer;tooltip.text=print options;style:[color=#666;fontSize=1.6rem;height=3.25rem;width=3.25rem;borderRadius=.5rem;border=1px solid #ddd;transition=.3s];hover.style:[color=#222;backgroundColor=#f6f6f6];click:[if():[prev().style().width=0px]:[prev().style().width=7.5rem]:[prev().style().width=0]]"
            },
            {
              "type": "Icon?class=flexbox pointer;name=bi-eye;tooltip.text=show hidden;style:[marginLeft=auto;color=#666;fontSize=1.6rem;height=3.25rem;width=3.25rem;borderRadius=.5rem;border=1px solid #ddd;transition=.3s];hover.style:[color=#222;backgroundColor=#f6f6f6];click:[():[tickets-list-data].children().():[style():[height=4rem;backgroundColor=#fff];hidden=false;1stChild().1stChild().():[2ndChild().style().display=flex;3rdChild().style().display=none]]]"
            },
            {
              "type": "Icon?class=flexbox pointer;name=bi-trash;tooltip.text=erase;style:[color=#666;fontSize=1.6rem;height=3.25rem;width=3.25rem;borderRadius=.5rem;border=1px solid #ddd;transition=.3s];hover.style:[color=#222;backgroundColor=#f6f6f6]"
            },
            {
              "type": "Icon?class=flexbox pointer;name=bi-download;tooltip.text=import;style:[color=#666;fontSize=1.6rem;height=3.25rem;width=3.25rem;borderRadius=.5rem;border=1px solid #ddd;transition=.3s];hover.style:[color=#222;backgroundColor=#f6f6f6]"
            },
            {
              "type": "Icon?class=flexbox pointer;name=bi-upload;tooltip.text=export;style:[color=#666;fontSize=1.6rem;height=3.25rem;width=3.25rem;borderRadius=.5rem;border=1px solid #ddd;transition=.3s];hover.style:[color=#222;backgroundColor=#f6f6f6]"
            },
            {
              "controls": [
                {
                  "event": "click?():bookings-mini-window.style():[opacity=1;pointerEvents=auto;)(:zIndex-counter=)(:zIndex-counter+1;zIndex=)(:zIndex-counter];)(:new-booking=true;booking-data:()=_map:id:[generate():20]:active:true:creation-date:[today().timestamp()]:created-by:[)(:user.id]:created-by-name:[)(:user.first-name+ +)(:user.last-name]:note:_string:status:Booked:description:_string:class:Economy:age:Adult:gender:Male:title:'Mr.':nationality:Lebanese:contact-number:_array:passport-issuer:Lebanon:booking-end-date:[todayStart().timestamp()+172800000];)(:booking-copied.del();)(:booking-edit-readonly=false;update():bookings-mini-window?false"
                }
              ],
              "type": "Icon?class=flexbox pointer;name=bi-plus;tooltip.text=create new;style:[color=#666;fontSize=2.4rem;height=3.25rem;width=3.25rem;borderRadius=.5rem;border=1px solid #ddd;transition=.3s];hover.style:[color=#222;backgroundColor=#f6f6f6]"
            }
          ]
        }
      ]
    },
    {
      "controls": [
        {
          "event": "mouseenter?lastChild().style():[minHeight=2.5rem;bottom=-2.5rem]"
        },
        {
          "event": "mouseleave?lastChild().style():[minHeight=0;bottom=0]"
        }
      ],
      "type": "View?view=search-engine;search-engine-req:()=booking"
    },
    {
      "type": "View:booking-search-engine?Data=search-booking;class=flex align-center;style:[gap=1rem;backgroundColor=#f6f6f6;padding= 0 1rem;minHeight=8rem;height=0;transition=.2s;overflow=hidden;borderBottom=1px solid #ddd]",
      "children": [
        {
          "type": "View?class=flexbox;style:[gap=1rem;width=100%]",
          "children": [
            {
              "children": [
                {
                  "controls": [
                    {
                      "event": "input?data()=data().toUpperCase().split():' '.join():'';txt()=data()"
                    }
                  ],
                  "type": "Input?id=PNR;path=pnr;label.text=PNR;label.style.fontSize=1.2rem;clearable;style:[height=4rem;width=100%;borderRadius=.5rem;border=1px solid #ddd;backgroundColor=#fff;fontSize=1.2rem;transition=.1s];clicked.style.border=2px solid #0080FF"
                },
                {
                  "type": "Input?path=names;label.text=Name;label.style.fontSize=1.2rem;clearable;style:[height=4rem;flex=1;borderRadius=.5rem;border=1px solid #ddd;backgroundColor=#fff;fontSize=1.2rem;transition=.1s];clicked.style.border=2px solid #0080FF?false",
                  "controls": [
                    {
                      "event": "input?data()=data().toUpperCase();txt()=data()"
                    }
                  ]
                },
                {
                  "type": "Input?id=flight;path=flight;if():[data().len()=20]:[data()=];label.text=Flight Number;label.style.fontSize=1.2rem;clearable;style:[height=4rem;flex=1;borderRadius=.5rem;border=1px solid #ddd;backgroundColor=#fff;fontSize=1.2rem;transition=.1s];clicked.style.border=2px solid #0080FF",
                  "controls": [
                    {
                      "event": "input?data()=data().toUpperCase().split():' '.join():'';txt()=data()"
                    }
                  ]
                },
                {
                  "children": [
                    {
                      "type": "Input?path=booking-date;label.text=Booking Date;label.style.fontSize=1.2rem;input.type=date;input.max=todayStart().timestamp().toDateInputFormat();style:[height=4rem;width=100%;borderRadius=.5rem;border=1px solid #ddd;backgroundColor=#fff;fontSize=1.2rem;transition=.1s];clicked.style.border=2px solid #0080FF",
                      "controls": [
                        {
                          "event": "change?data()=data().timestamp();txt():booking-date-text=data().toDateFormat()"
                        }
                      ]
                    },
                    {
                      "children": [
                        {
                          "type": "Text?id=booking-date-text;class=flex align-center;if():[data().booking-date]:[text=data().booking-date.toDateFormat()];style:[fontSize=1.2rem]"
                        },
                        {
                          "type": "Icon?class=flexbox pointer;name=bi-x-lg;style:[height=2.5rem;opacity=0;transition=.2s;fontSize=1.5rem;backgroundColor=#fff;borderRadius=.5rem;right=0;position=absolute];click:[data().booking-date.del();prev().txt()=;parent().prev().():[click();input().txt()=null]]"
                        }
                      ],
                      "type": "View?class=flex align-center;style:[padding=0 .5rem;height=3.6rem;backgroundColor=#fff;zIndex=1;left=2px;bottom=2px;width=80%;position=absolute;borderRadius=.5rem];mouseenter.2ndChild().style().opacity=1;mouseleave.2ndChild().style().opacity=0"
                    }
                  ],
                  "type": "View?class=flex column;style:[gap=1rem;width=100%;position=relative]"
                },
                {
                  "type": "View?class=flex column;style:[gap=1rem;width=100%;position=relative]",
                  "children": [
                    {
                      "controls": [
                        {
                          "event": "change?data()=data().timestamp();txt():reservation-date-text=data().toDateFormat()"
                        }
                      ],
                      "type": "Input?path=reservation-date;label.text=Issuing Date;label.style.fontSize=1.2rem;input.type=date;input.max=todayStart().timestamp().toDateInputFormat()];style:[height=4rem;width=100%;borderRadius=.5rem;border=1px solid #ddd;backgroundColor=#fff;fontSize=1.2rem;transition=.1s];clicked.style.border=2px solid #0080FF"
                    },
                    {
                      "type": "View?class=flex align-center;style:[padding=0 .5rem;height=3.6rem;backgroundColor=#fff;zIndex=1;left=2px;bottom=2px;width=80%;position=absolute;borderRadius=.5rem];mouseenter.2ndChild().style().opacity=1;mouseleave.2ndChild().style().opacity=0",
                      "children": [
                        {
                          "type": "Text?id=reservation-date-text;class=flex align-center;if():[data().reservation-date]:[text=data().reservation-date.toDateFormat()];style:[fontSize=1.2rem]"
                        },
                        {
                          "type": "Icon?class=flexbox pointer;name=bi-x-lg;style:[height=2.5rem;opacity=0;transition=.2s;fontSize=1.5rem;backgroundColor=#fff;borderRadius=.5rem;right=0;position=absolute];click:[data().reservation-date.del();prev().txt()=;parent().prev().():[click();input().txt()=null]]"
                        }
                      ]
                    }
                  ]
                },
                {
                  "type": "Input?id=booking-status;path=status;label.text=Status;label.style.fontSize=1.2rem;clearable;style:[height=4rem;flex=1;borderRadius=.5rem;border=1px solid #ddd;backgroundColor=#fff;fontSize=1.2rem;transition=.1s];clicked.style.border=2px solid #0080FF;droplist.items='collections:().booking-status.status';droplist.item.style:[minHeight=3.5rem;fontSize=1.3rem]"
                },
                {
                  "type": "Input?path=agent;if():[data()]:[input.value=agents:().find():[id=data()].company-name];label.text=Agent;label.style.fontSize=1.2rem;clearable;style:[height=4rem;flex=1;borderRadius=.5rem;border=1px solid #ddd;backgroundColor=#fff;fontSize=1.2rem;transition=.1s];clicked.style.border=2px solid #0080FF;droplist.items='agents:().():company-name';droplist.item.style:[minHeight=3.5rem;fontSize=1.2rem];droplist.searchable?agent:().admin;user:().admin",
                  "controls": [
                    {
                      "event": "click:droplist?data()=agents:().find():[company-name=data()].id;loader.show;search():[collection=user;field.agent.equal=data()]:[users:()=search:().data.values();loader.hide]"
                    }
                  ]
                },
                {
                  "controls": [
                    {
                      "event": "click:droplist?data()=users:().find():[username=data()].id"
                    }
                  ],
                  "type": "Input?path=user;if():[data()]:[input.value=users:().find():[id=data()].username];label.text=User;label.style.fontSize=1.2rem;clearable;style:[height=4rem;flex=1;borderRadius=.5rem;border=1px solid #ddd;backgroundColor=#fff;fontSize=1.2rem;transition=.1s];clicked.style.border=2px solid #0080FF;droplist.items='users:().():username';droplist.item.style:[minHeight=3.5rem;fontSize=1.2rem];droplist.searchable?agent:().admin;user:().admin"
                },
                {
                  "type": "View?style:[flex=1]"
                }
              ],
              "type": "View?class=grid;style:[gap=1rem;gridTemplateColumns=1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr;flex=1]"
            }
          ]
        }
      ]
    },
    {
      "type": "View?view=bookings-list"
    }
  ],
  "type": "View?id=bookings-manager;class=flex-column;style():[width=100%;height=100%;padding=2rem;backgroundColor=#fff];if():[unreset-bookings:()]:[unreset-bookings:()=false]:[bookings:()=_list];search-booking:()=search-booking:()||_map",
  "creation-date": 1653729664265,
  "functions": {}
}