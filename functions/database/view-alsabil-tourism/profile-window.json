{
  "children": [
    {
      "children": [
        {
          "children": [
            {
              "type": "Text?text=Profile form;style:[fontSize=1.5rem]"
            },
            {
              "type": "View?class=flexbox;style.gap=1.5rem;style.marginLeft=auto",
              "children": [
                {
                  "type": "View?class=flexbox pointer;tooltip.text=cancel;style:[height=3rem;width=3rem;borderRadius=1.5rem;transition=.2s];hover.style.backgroundColor=#fff;click:[():[close-profile].click()]",
                  "children": [
                    {
                      "type": "Icon?name=bi-x-lg;style.color=#000;style.fontSize=1.7rem"
                    }
                  ]
                }
              ]
            }
          ],
          "type": "View:profile-form-header?class=flex align-center;style:[width=100%;backgroundColor=#ddd;borderRadius=1rem 1rem 0 0;padding=0.5rem 1rem]"
        },
        {
          "type": "View?class=flex column;Data=my-user;style:[width=100%;gap=2rem;padding=.5rem;marginBottom=2rem];my-user:()=user:().clone()",
          "children": [
            {
              "type": "View:profile-agent?class=flex column;style.gap=.5rem;style.width=100%",
              "children": [
                {
                  "children": [
                    {
                      "type": "View?class=flex;style:[height=13rem;width=100%]",
                      "children": [
                        {
                          "type": "Image?src=agent:().logo;style:[maxHeight=100%;maxWidth=100%]"
                        }
                      ]
                    },
                    {
                      "type": "View?class=flex;style:[gap=1rem;marginLeft=auto]",
                      "children": [
                        {
                          "children": [
                            {
                              "type": "View?class=horizontal;style:[gap=1rem;marginRight=auto]",
                              "children": [
                                {
                                  "type": "Text?text=Travel Agency;style:[color=#000;fontSize=1.4rem;fontWeight=bold;textAlign=left;width=12.5rem]"
                                },
                                {
                                  "type": "Text?text=agent:().company-name;style:[color=#000;fontSize=1.4rem;textAlign=left;maxWidth=25rem]"
                                }
                              ]
                            },
                            {
                              "children": [
                                {
                                  "type": "Text?text=Address;style:[color=#000;fontSize=1.4rem;fontWeight=bold;textAlign=left;width=12.5rem]"
                                },
                                {
                                  "type": "Text?text=agent:().company-head-office-country+', '+agent:().company-head-office-city+', '+agent:().company-head-office-address;style:[color=#000;fontSize=1.4rem;textAlign=left;maxWidth=25rem]"
                                }
                              ],
                              "type": "View?class=horizontal;style:[gap=1rem;marginRight=auto]"
                            },
                            {
                              "children": [
                                {
                                  "type": "Text?text=Contact Number;style:[color=#000;fontSize=1.4rem;fontWeight=bold;textAlign=left;width=12.5rem]"
                                },
                                {
                                  "type": "Text?text=agent:().contact-number;style:[color=#000;fontSize=1.4rem;textAlign=left]"
                                }
                              ],
                              "type": "View?class=horizontal;style:[gap=1rem;marginRight=auto]"
                            },
                            {
                              "type": "View?class=horizontal;style:[gap=1rem;marginRight=auto]",
                              "children": [
                                {
                                  "type": "Text?text=Email;style:[color=#000;fontSize=1.4rem;fontWeight=bold;textAlign=left;width=12.5rem]"
                                },
                                {
                                  "type": "Text?text=agent:().email;style:[color=#000;fontSize=1.4rem;textAlign=left;maxWidth=25rem]"
                                }
                              ]
                            }
                          ],
                          "type": "View?class=vertical;style:[gap=1rem;alignItems=flex-end]"
                        }
                      ]
                    }
                  ],
                  "type": "View?style:[gap=.5rem;width=100%;display=grid;gridTemplateColumns=1fr 1fr;padding=1rem;height=15rem]?agent:()"
                }
              ]
            },
            {
              "type": "View?class=flex column;style.gap=.5rem;style.width=100%",
              "children": [
                {
                  "type": "Text?class=flex;text=Registration Info;style:[width=100%;borderBottom=1px solid #ddd;fontSize=1.4rem;padding=1rem 0]"
                },
                {
                  "type": "View?style:[gap=1rem;width=100%;display=grid;gridTemplateColumns=1fr 1fr 1fr 1fr;padding=1rem]",
                  "children": [
                    {
                      "type": "Input?label:[text=Registration Id;location=outside;style.fontSize=1.3rem];readonly;copyable;path=id;clicked.style.border=2px solid #0080ff;style:[width=100%;height=3.5rem;borderRadius=.5rem;fontSize=1.3rem]"
                    },
                    {
                      "type": "Input?label:[text=Creation Date;location=outside;style.fontSize=1.3rem];readonly;if():[!data().creation-date]:[data().creation-date=today().timestamp()];input.value=data().creation-date.toSimplifiedDateTime();tooltip.text=data().creation-date.toSimplifiedDateTime();clicked.style.border=2px solid #0080ff;style:[width=100%;height=3.5rem;borderRadius=.5rem;fontSize=1.3rem]"
                    },
                    {
                      "type": "Input?label:[text=Created By;location=outside;style.fontSize=1.3rem];readonly;if():[!data().created-by]:[data().created-by=Mohamad Obeid];path=created-by;clicked.style.border=2px solid #0080ff;style:[width=100%;height=3.5rem;borderRadius=.5rem;fontSize=1.3rem]"
                    },
                    {
                      "type": "Input?label:[text=Status;location=outside;style.fontSize=1.3rem];readonly;if():[!data().status]:[data().status=Active];path=status;readonly;clicked.style.border=2px solid #0080ff;style:[width=100%;height=3.5rem;borderRadius=.5rem;fontSize=1.3rem]"
                    }
                  ]
                }
              ]
            },
            {
              "type": "View?class=flex column;style.gap=.5rem;style.width=100%",
              "children": [
                {
                  "type": "Text?class=flex;text=User Info;style:[width=100%;borderBottom=1px solid #ddd;fontSize=1.4rem;padding=1rem 0]"
                },
                {
                  "children": [
                    {
                      "type": "Input?label:[text=First Name;location=outside;style.fontSize=1.3rem];path=first-name;clicked.style.border=2px solid #0080ff;style:[width=100%;height=3.5rem;borderRadius=.5rem;fontSize=1.3rem]"
                    },
                    {
                      "type": "Input?label:[text=Last Name;location=outside;style.fontSize=1.3rem];path=last-name;clicked.style.border=2px solid #0080ff;style:[width=100%;height=3.5rem;borderRadius=.5rem;fontSize=1.3rem]"
                    },
                    {
                      "controls": [
                        {
                          "event": "input?():[contact-number-required].style().opacity=0;if():[!data()||data().split():' '.join():''.isNaN()||data().inc():'.']:[():[contact-number-required].style().opacity=1;valid-contact-number:()=false]:[valid-contact-number:()=true]"
                        }
                      ],
                      "type": "Input:contact-number?label:[text=Contact Number;location=outside;style.fontSize=1.3rem];required.text=Enter a valid contact number!;path=contact-number;if():[!data()||data().split():' '.join():''.isNaN()||data().inc():'.']:[valid-contact-number:()=false;required.style.opacity=1]:[valid-contact-number:()=true];clicked.style.border=2px solid #0080ff;style:[width=100%;height=3.5rem;borderRadius=.5rem;fontSize=1.3rem]"
                    },
                    {
                      "controls": [
                        {
                          "event": "input?():[email-required].style().opacity=0;if():[!data()||!data().inc():'@'||!data().inc():'.'||data().lastEl()='.']:[():[email-required].style().opacity=1;valid-email:()=false]:[valid-email:()=true]"
                        }
                      ],
                      "type": "Input:email?label:[text=Email;location=outside;style.fontSize=1.3rem];path=email;if():[!data()||!data().inc():'@'||!data().inc():'.'||data().lastEl()='.']:[valid-email:()=false;required.style.opacity=1]:[valid-email:()=true];required.text=Enter a valid email!;clicked.style.border=2px solid #0080ff;style:[width=100%;height=3.5rem;borderRadius=.5rem;fontSize=1.3rem]"
                    }
                  ],
                  "type": "View?style:[gap=1rem;width=100%;display=grid;gridTemplateColumns=1fr 1fr 1fr 1fr;padding=1rem]"
                }
              ]
            },
            {
              "children": [
                {
                  "type": "Text?class=flex;text=Account Info;style:[width=100%;borderBottom=1px solid #ddd;fontSize=1.4rem;padding=1rem 0]"
                },
                {
                  "type": "View?style:[gap=1rem;width=100%;display=grid;gridTemplateColumns=1fr 1fr 1fr 1fr;padding=1rem]",
                  "children": [
                    {
                      "type": "Input?label:[text=Username;location=outside;style.fontSize=1.3rem];readonly;path=username;clicked.style.border=2px solid #0080ff;style:[width=100%;height=3.5rem;borderRadius=.5rem;fontSize=1.3rem]"
                    },
                    {
                      "type": "Input:password?label:[text=Password;location=outside;style.fontSize=1.3rem];required.text=Password must contain at least 8 characters!;password;if():[!user:().password-changed]:[data().password=_string];path=password;clicked.style.border=2px solid #0080ff;style:[width=100%;height=3.5rem;borderRadius=.5rem;fontSize=1.3rem]",
                      "controls": [
                        {
                          "event": "input?():[password-required].style().opacity=0;if():[data().len()<8]:[():[password-required].style().opacity=1];Data().[password-changed]=true;if():[data()=old-pass:()]:[Data().[password-changed]=false]"
                        }
                      ]
                    }
                  ]
                }
              ],
              "type": "View?class=flex column;style.gap=.5rem;style.width=100%"
            }
          ]
        },
        {
          "children": [
            {
              "type": "Text?class=flexbox pointer;text=Save;style:[height=3rem;borderRadius=1.5rem;width=10rem;color=#fff;backgroundColor=blue;fontSize=1.3rem;opacity=0.8;transition=.3s];hover.style.opacity=1;click:[if():[!my-user:().password-changed||my-user:().password.len()<8||!valid-email:()||!valid-contact-number:()]:[if():[!my-user:().password-changed]:[note():[text=Kindly change your password!;type=danger]]:[note():[text=Kindly enter a valid password, email, and contact number!;type=danger]];if():[!my-user:().password-changed]:[():password.2ndChild().style().border=2px solid red]]:[loader.show;save():[data=my-user:();collection=user]:[user:()=my-user:().clone();note():[text=Profile saved successfully!];next().click();loader.hide]]]"
            },
            {
              "type": "Text:close-profile?class=flexbox pointer;text=Cancel;style:[height=3rem;borderRadius=1.5rem;width=10rem;color=#fff;backgroundColor=#888;fontSize=1.3rem;opacity=0.8;transition=.3s];hover.style.opacity=1;click:[if():[user:().password-changed]:[():profile-window.style():[opacity=0;pointerEvents=none]]:[note():[text=Kindly change your password!;type=danger];():password.2ndChild().style().border=2px solid red;if():[!valid-contact-number:()]:[():contact-number.2ndChild().style().border=2px solid red];if():[!valid-email:()]:[():email.2ndChild().style().border=2px solid red]]]"
            }
          ],
          "type": "View?class=flexbox;style:[width=100%;borderTop=1px solid #ddd;padding=2rem;justifyContent=flex-end;gap=1rem;marginTop=2rem;marginBottom=-1rem;position=relative]"
        }
      ],
      "type": "View?old-pass:()=user:().password;class=flex column;style:[width=100%;padding=1rem;borderRadius=1rem;backgroundColor=#fff;cursor=default;gap=2rem;overflowY=auto;height=100%]?user:()"
    }
  ],
  "functions": {
    "fn": ""
  },
  "creation-date": 1660334922954,
  "type": "View:profile-window?class=flexbox pointer;style:[opacity=0;pointerEvents=none;position=fixed;top=0;left=0;right=0;bottom=0;backgroundColor=#00000060;zIndex=10;transition=.2s;padding=10vh 5vw]",
  "id": "profile-window"
}