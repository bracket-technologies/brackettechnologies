{
  "view": "View:generalPopup?class=flexbox;style:[height=100vh;width=100vw;position=fixed;top=0;right=0;zIndex=5;opacity=0;transition='opacity .2s';visibility=hidden]",
  "children": [
    {
      "view": "View?style:[height=100%;width=100%;backgroundColor=black;opacity=0.5]"
    },
    {
      "view": "[View]:[data=generalPopup:()]?class=flex column;style:[transition=.2s;position=absolute;top=setTop();bottom=setBottom();right=setRight();left=setLeft();backgroundColor=#fff;padding=1rem;gap=.2rem;border-radius=_.borderRadius||.4rem]",
      "children": [
        {
          "view": "View?class=flexbox;style:[width=100%;height=4.5rem;justifyContent=space-between;backgroundColor=#f3f3f3;borderRadius=.4rem .4rem 0rem 0rem;padding=0rem 1rem]",
          "children": [
            {
              "view": "Text?text=_.title;style:[fontSize=1.6rem;fontWeight=bolder]"
            },
            {
              "view": "View?class=flex;style:[gap=1.3rem]",
              "children": [
                {
                  "view": "Icon?name=print;google.symbol;style:[fontSize=2.5rem;cursor=pointer];click:[():customPrintView2.html2pdf():[name='statement of account']]?if():[_.searchEngine=true]:[false]:[true]"
                },
                {
                  "#view": "Icon?name=save_as;google.symbol;style:[fontSize=2.1rem;cursor=pointer;paddingTop=.2rem];click:[saveSheet()]?_.saveAs"
                },
                {
                  "view": "Icon?name=Upload;google.symbol;style:[fontSize=2.5rem;cursor=pointer];click:[exportView()]?_.uploadIcon"
                },
                {
                  "view": "Icon?name=fullscreen;google.symbol;style:[display=if():[!mobile()]:[flex]:[none];fontSize=2.5rem;cursor=pointer];click:[fullscreen()]?!_.fullScreen"
                },
                {
                  "view": "Icon?name=Fullscreen_Exit;google.symbol;style:[display=if():[mobile()]:[flex]:[none];fontSize=2.5rem;cursor=pointer];click:[exitFullscreen()]"
                },
                {
                  "view": "Icon:closeGeneralPopup?name=Close;google.symbol;style:[fontSize=2.5rem;cursor=pointer];click:[checkIfOpenPrevForm();if():[generalPopup:().popupName=sheet]:[clearSheet()]]"
                }
              ]
            }
          ]
        },
        {
          "view": "View?style:[height='calc(100% - 4.5rem)';width=100%;overflowY=auto];#if():[_.popupName=sheet]:[addRowsOnScroll()]",
          "children": [
            {
              "view": "_.popupName"
            }
          ]
        }
      ]
    }
  ],
  "creationDate": 1709286389897,
  "__props__": {
    "db": "views",
    "collection": "71j7R0d8Z8p7E0d0n081r1e854",
    "id": "01l7z1G0k214l6y3o5Y3i4S5R9",
    "doc": "generalPopup",
    "creationDate": 1710246353459,
    "active": true,
    "createdBy": "41V7H078W8I8I780z1m9Y2E4Y2",
    "actions": {
      "exportView": "():customPrintView.style():[visibility=visible;opacity=1]",
      "addCustomInput": "_.inputInfo.subInput.push():[title=hello;grid=1fr 1fr 1fr 1fr 1fr]:[_.inputInfo.subInput.len()-1]",
      "setLeft": "if():[_.leftSize]:[_.leftSize]:[if():[mobile()]:[0vw]:[5vh]]",
      "addForm": {
        "checkType": "if():[_.type=image]:[checkImage()]:[checkInPath()]",
        "checkIfAvailableInPath": "if():[!__.[_.inputPath]]:[requiredInputsAvailable:()=false]",
        "checkForCondition": "if():[_.condition]:[checkIfConditionTrueInPath()]:[checkIfAvailableInPath()]",
        "checkDuplicatedPath": "if():[!doc().[_.duplicatedInputPath]]:[requiredInputsAvailable:()=false]",
        "addForm": "saveForm():[data=doc();collection=_.inputInfo.collection]:[if():[_.success]:[#closePopup();note():[text=_.message]]:[loader.hide;note():[text=taha;type=danger]]]",
        "checkInPath": "doc().[_.path]._():[__.input._():[if():[_.required]:[checkForCondition()]]]",
        "checkInDoc": "_.input._():[if():[_.required]:[checkIfHasCondition()]]",
        "checkIfDuplicatedInput": "if():[_.duplicatedInputPath]:[checkDuplicatedPath()]:[checkPath()]",
        "checkIfConditionTrueInPath": "conditionResult:()=true;_.condition._():[if():[!___.[_.conditionReference].in():[_.condition]]:[conditionResult:()=false]];if():[conditionResult:()]:[checkIfAvailableInPath()]",
        "[object Object]": "checkInputs();if():[requiredInputsAvailable:()]:[if():[_.inputInfo.saveAction]:[[_.inputInfo.saveAction]()]:[addForm()]]:[note():[text=Please fill all required inputs;type=danger]]",
        "checkImage": "if():[_.required]:[if():[!doc().[_.path]]:[requiredInputsAvailable:()=false]]",
        "checkPath": "if():[_.inputPath;!doc().[_.inputPath]]:[requiredInputsAvailable:()=false]",
        "checkIfHasCondition": "if():[_.condition]:[checkIfConditionTrueInDoc()]:[checkIfDuplicatedInput()]",
        "checkIfConditionTrueInDoc": "conditionResult:()=true;_.condition._():[if():[!doc().[_.conditionReference].in():[_.condition]]:[conditionResult:()=false]];if():[conditionResult:()]:[checkPath()]",
        "checkInputs": "requiredInputsAvailable:()=true;_.inputInfo.subInput._():[if():[_.path]:[checkType()]:[checkInDoc()]]",
        "_": "checkInputs();if():[requiredInputsAvailable:()]:[if():[_.inputInfo.saveAction]:[[_.inputInfo.saveAction]()]:[addForm()]]:[note():[text=Please fill all required inputs;type=danger]]"
      },
      "clearSheet": "currentHeader:().del();currentRow:().del()sheet:().del();currentSheetInfo:().del()",
      "setTop": "if():[_.topSize]:[_.topSize]:[if():[mobile()]:[0vw]:[5vh]]",
      "exitFullscreen": "3rdParent().style():[top=setTop();bottom=setBottom();right=setRight();left=setLeft();borderRadius=.4rem];prev().style().display=flex;style().display=none",
      "fullscreen": "3rdParent().style():[top=0;bottom=0;right=0;left=0;borderRadius=0];next().style().display=flex;style().display=none",
      "setBottom": "if():[_.bottomSize]:[_.bottomSize]:[if():[mobile()]:[0vw]:[5vh]]",
      "setRight": "if():[_.rightSize]:[_.rightSize]:[if():[mobile()]:[0vw]:[5vh]]",
      "closeGeneralPopup": "():generalPopup.style():[visibility=hidden;opacity=0];searchBoxResults:().del();[_.docName]:()=''",
      "addRowsOnScroll": {
        "_": "scroll:[if():[el().scrollHeight-[el().clientHeight+el().scrollTop]<50;().scrollHeihgt!=el().scrollHeight]:[().scrollHeihgt=el().scrollHeight;#():tahaahbal.style().display=flex;loader.show;range():4:[():sheetRowsView.insert():[view=():sheetRowsView.children.1]];loader.hide;#():tahaahbal.style().display=none;loopRange:()+=5]]"
      },
      "#checkIfOpenPrevForm": {
        "#pushInVar": "[[().manager.collection]:().[().manager.managers.find():[name=[createFormStack:().at():[-1]]].managerName].popupInfo.docName]:().[__.varName]=_.data.id",
        "addResponseInDoc": "if():[__.varName]:[pushInVar()]:[pushInList()];selected:().[__.inputInfo.collection].push():[_.data]",
        "[object Object]": "if():[createFormStack:().len()>1]:[createFormStack:().pullItem():[createFormStack:().at():[-1]];().group=collectionsInfo:().find():[managers.():collection.inc():[createFormStack:().at():[-1]]];manager=[().group.groupName]:().[().group.managers.find():[collection=createFormStack:().at():[-1]].manager];#if():[_.data]:[addResponseInDoc()];updatePopup()]:[closeGeneralPopup()]",
        "_": "if():[createFormStack:().len()>1]:[createFormStack:().pullItem():[createFormStack:().at():[-1]];().group=collectionsInfo:().find():[managers.():collection.inc():[createFormStack:().at():[-1]]];manager=[().group.groupName]:().[().group.managers.find():[collection=createFormStack:().at():[-1]].manager];updatePopup()]:[createFormStack:()=:;closeGeneralPopup()]",
        "updatePopup": "generalPopup:()=[title=[createFormStack:().at():[-1]].capitalize()+' Form';popupName=customForm;inputInfo=().manager.createFormInputs;docName=().manager.popupInfo.docName];if():[currentOpenManager:().permission]:[generalPopup:().permission=currentOpenManager:().permission;generalPopup:().defaultPermission=currentOpenManager:().defaultPermission];():generalPopup.update()::[():generalPopup.style():[visibility=visible;opacity=1]]",
        "#pushInList": "[[().manager.collection]:().[().manager.managers.find():[name=[createFormStack:().at():[-1]]].managerName].popupInfo.docName]:().[__.listName]=:;[[().manager.collection]:().[().manager.managers.find():[name=[createFormStack:().at():[-1]]].managerName].popupInfo.docName]:().[__.listName].push():[_.data.id]"
      }
    },
    "collapsed": [
      {
        "path": [
          "children",
          1,
          "children",
          0,
          "children",
          4
        ]
      },
      {
        "path": [
          "functions"
        ]
      },
      {
        "path": [
          "addRowsOnScroll2"
        ]
      },
      {
        "path": [
          "#rowBlur"
        ]
      },
      {
        "path": [
          "addForm"
        ]
      },
      {
        "path": [
          "#saveSheet"
        ]
      },
      {
        "path": [
          "#checkIfOpenPrevForm"
        ]
      }
    ],
    "comments": [],
    "folderPath": [],
    "version": 0,
    "projectID": "f1m7R0f878N8V7g0c1w8W9u1C6"
  }
}